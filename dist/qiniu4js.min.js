!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Qiniu=t():e.Qiniu=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}return i(e,null,[{key:"d",value:function(t){e._enable&&console.debug(t)}},{key:"l",value:function(t){e._enable&&console.log(t)}},{key:"e",value:function(t){e._enable&&console.error(t)}},{key:"w",value:function(t){e._enable&&console.warn(t)}},{key:"i",value:function(t){e._enable&&console.info(t)}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable=e}}]),e}();o._enable=!0,t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),s=n(9),u=n(11),a=n(2),l=n(0),c=n(5),f=n(8),h=n(7);n(12);var k=function(){function e(t){var n=this;r(this,e),this.FILE_INPUT_EL_ID="qiniu4js-input",this._taskQueue=[],this._tasking=!1,this._scale=[],this._saveKey=!1,this.handleFiles=function(){if(0!=n.fileInput.files.length){n.generateTask();var e=!1,t=[],r=!0,i=!1,o=void 0;try{for(var s,u=n.taskQueue[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var a=s.value,c=!0,f=!1,h=void 0;try{for(var k,y=n.interceptors[Symbol.iterator]();!(c=(k=y.next()).done);c=!0){var d=k.value;if(d.onIntercept(a)&&(t.push(a),l.default.d("任务拦截器拦截了任务:"),l.default.d(a)),d.onInterrupt(a)){e=!0;break}}}catch(e){f=!0,h=e}finally{try{!c&&y.return&&y.return()}finally{if(f)throw h}}}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}if(e)return void l.default.w("任务拦截器中断了任务队列");var p=!0,v=!1,_=void 0;try{for(var g,b=t[Symbol.iterator]();!(p=(g=b.next()).done);p=!0){var m=g.value,w=n.taskQueue.indexOf(m);-1!=w&&n.taskQueue.splice(w,1)}}catch(e){v=!0,_=e}finally{try{!p&&b.return&&b.return()}finally{if(v)throw _}}n.listener.onReady(n.taskQueue),n.handleImages().then(function(){n.auto&&(l.default.d("开始自动上传"),n.start())})}},this.resolveUUID=function(e){var t=/\$\(uuid\)/;return t.test(e)?e.replace(t,u.default.uuid()):e},this.resolveImageInfo=function(e,t){var n=/\$\(imageInfo\.width\)/,r=/\$\(imageInfo\.height\)/;return n.test(t)||r.test(t)?new Promise(function(i){var o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){t=t.replace(n,o.width.toString()),t=t.replace(r,o.height.toString()),i(t)}}):Promise.resolve(t)},this.onSaveKeyResolved=function(e){return n._tokenShare=n._tokenShare&&n._saveKey==e,e},this._retry=t.getRetry,this._size=t.getSize,this._chunk=t.getChunk,this._auto=t.getAuto,this._multiple=t.getMultiple,this._accept=t.getAccept,this._button=t.getButton,this._buttonEventName=t.getButtonEventName,this._compress=t.getCompress,this._scale=t.getScale,this._saveKey=t.getSaveKey,this._tokenFunc=t.getTokenFunc,this._tokenShare=t.getTokenShare,this._listener=Object.assign(new c.default,t.getListener),this._interceptors=t.getInterceptors,this._domain=t.getDomain,this._fileInputId=this.FILE_INPUT_EL_ID+"_"+(new Date).getTime(),l.default.enable=t.getIsDebug,this.validateOptions(),this.init()}return i(e,[{key:"init",value:function(){this.initFileInputEl()}},{key:"initFileInputEl",value:function(){var e=document.getElementById(this._fileInputId);if(this._fileInput=e||document.createElement("input"),this.fileInput.type="file",this.fileInput.id=this._fileInputId,this.fileInput.style.display="none",this.multiple&&(this.fileInput.multiple=!0),this.accept&&0!=this.accept.length){var t="",n=!0,r=!1,i=void 0;try{for(var o,s=this.accept[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){t+=o.value,t+=","}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}t.endsWith(",")&&(t=t.substring(0,t.length-1)),this.fileInput.accept=t,l.default.d("accept类型 "+t)}if(document.body.appendChild(this.fileInput),this.fileInput.addEventListener("change",this.handleFiles,!1),void 0!=this._button){document.getElementById(this._button).addEventListener(this._buttonEventName,this.chooseFile.bind(this))}}},{key:"resetUploader",value:function(){l.default.d("开始重置 uploader"),this.taskQueue.length=0,l.default.d("任务队列已清空"),this._token=null,l.default.d("token已清空"),l.default.d("uploader 重置完毕")}},{key:"generateTask",value:function(){this.resetUploader();for(var e=this.fileInput.files,t=0;t<this.fileInput.files.length;t++){var n=e[t],r=void 0;r=this.chunk&&n.size>a.default.BLOCK_SIZE?new s.ChunkTask(n,a.default.BLOCK_SIZE,this.size):new o.default(n),0==this._saveKey&&(r.key=this.listener.onTaskGetKey(r)),this.taskQueue.push(r)}}},{key:"handleImages",value:function(){var t=this,n=[];if(1!=this.compress||0!=this.scale[0]||0!=this.scale[1]){var r=!0,i=!1,o=void 0;try{for(var s,u=this.taskQueue[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){(function(){var r=s.value;if(!r.file.type.match("image.*"))return"continue";l.default.d(r.file.name+" 处理前的图片大小:"+r.file.size/1024+" kb");var i=document.createElement("canvas"),o=new Image,u=i.getContext("2d");o.src=URL.createObjectURL(r.file);var a=t;n.push(new Promise(function(e){return o.onload=function(){var t=o.width,n=o.height,s=a.scale[0],c=a.scale[1];0==s&&c>0?(i.width=t/n*c,i.height=c):0==c&&s>0?(i.width=s,i.height=n/t*s):s>0&&c>0?(i.width=s,i.height=c):(i.width=o.width,i.height=o.height),u.drawImage(o,0,0,i.width,i.height),console.log(i),console.log(i.toBlob),i.toBlob(function(t){e(t),l.default.d(r.file.name+" 处理后的图片大小:"+t.size/1024+" kb")},"image/jpeg",.95*a.compress)}}).then(function(t){t.name=r.file.name,r.file=t,e.isChunkTask(r)&&r.spliceFile2Block()}))})()}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}}return Promise.all(n)}},{key:"validateOptions",value:function(){if(l.default.d("开始检查构建参数合法性"),!this._tokenFunc)throw new Error("你必须提供一个获取Token的回调函数");if(!this.scale||!(this.scale instanceof Array)||2!=this.scale.length||this.scale[0]<0||this.scale[1]<0)throw new Error("scale必须是长度为2的number类型的数组,scale[0]为宽度，scale[1]为长度,必须大于等于0");l.default.d("构建参数检查完毕")}},{key:"start",value:function(){if(l.default.d("上传任务遍历开始"),0==this.fileInput.files.length)throw new Error("没有选中的文件，无法开始上传");if(this.tasking)throw new Error("任务执行中，请不要重复上传");this.listener.onStart(this.taskQueue);var t=!0,n=!1,r=void 0;try{for(var i,o=this.taskQueue[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(l.default.d("上传文件名："+s.file.name),l.default.d("上传文件大小："+s.file.size+"字节，"+s.file.size/1024+" kb，"+s.file.size/1024/1024+" mb"),e.isDirectTask(s))l.default.d("该上传任务为直传任务"),new f.default(this).upload(s);else{if(!e.isChunkTask(s))throw new Error("非法的task类型");l.default.d("该上传任务为分片任务"),new h.default(this).upload(s)}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"isTaskQueueFinish",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.taskQueue[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){if(!r.value.isFinish)return!1}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}return!0}},{key:"chooseFile",value:function(){this.fileInput.click()}},{key:"getToken",value:function(e){var t=this;return this._tokenShare&&void 0!=this._token?Promise.resolve(this._token):(l.default.d("开始获取上传token"),Promise.resolve(this._tokenFunc(this,e)).then(function(e){return l.default.d("上传token获取成功: "+e),t._token=e,e}))}},{key:"requestTaskToken",value:function(e,t){var n=this;return this.resolveSaveKey(e).then(function(e){return n.requestToken(t,e)})}},{key:"requestToken",value:function(e,t){return new Promise(function(n,r){"string"==typeof t&&(e+=(/\?/.test(e)?"&":"?")+"saveKey="+encodeURIComponent(t)),e+=(/\?/.test(e)?"&":"?")+(new Date).getTime();var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE)return 200==i.status?void n(i.response.uptoken):void r(i.response)},i.onabort=function(){r("aborted")},i.responseType="json",i.send()})}},{key:"resolveSaveKey",value:function(e){var t=this,n=this._saveKey;return"string"!=typeof n?Promise.resolve(void 0):Promise.resolve(n).then(this.resolveUUID).then(function(n){return t.resolveImageInfo(e.file,n)}).then(this.onSaveKeyResolved)}},{key:"retry",get:function(){return this._retry}},{key:"size",get:function(){return this._size}},{key:"auto",get:function(){return this._auto}},{key:"multiple",get:function(){return this._multiple}},{key:"accept",get:function(){return this._accept}},{key:"compress",get:function(){return this._compress}},{key:"scale",get:function(){return this._scale}},{key:"listener",get:function(){return this._listener}},{key:"fileInput",get:function(){return this._fileInput}},{key:"chunk",get:function(){return this._chunk}},{key:"taskQueue",get:function(){return this._taskQueue}},{key:"tasking",get:function(){return this._tasking},set:function(e){this._tasking=e}},{key:"interceptors",get:function(){return this._interceptors}},{key:"domain",get:function(){return this._domain}}],[{key:"isChunkTask",value:function(e){return e.constructor.name===s.ChunkTask.name&&e instanceof s.ChunkTask}},{key:"isDirectTask",value:function(e){return e.constructor.name===o.default.name&&e instanceof o.default}}]),e}();t.default=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),s=n(6),u=function(){function e(){r(this,e),this._retry=0,this._domain=e.UPLOAD_DOMAIN,this._scheme=window.location.protocol,this._size=1048576,this._chunk=!0,this._auto=!0,this._multiple=!0,this._accept=[],this._compress=1,this._scale=[0,0],this._saveKey=!1,this._tokenShare=!0,this._interceptors=[],this._isDebug=!1}return i(e,[{key:"domain",value:function(e){return this._domain=e,this}},{key:"scheme",value:function(e){return this._scheme=e,this}},{key:"interceptor",value:function(e){return this._interceptors.push(Object.assign(new s.default,e)),this}},{key:"retry",value:function(e){return this._retry=e,this}},{key:"auto",value:function(e){return this._auto=e,this}},{key:"multiple",value:function(e){return this._multiple=e,this}},{key:"accept",value:function(e){return this._accept=e,this}},{key:"button",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";return this._button=e,this._buttonEventName=t,this}},{key:"compress",value:function(e){return this._compress=Math.max(Math.min(e,1),0),this}},{key:"scale",value:function(e){return this._scale=e,this}},{key:"saveKey",value:function(e){return this._saveKey=e,this}},{key:"tokenUrl",value:function(e){return this._tokenFunc=function(t,n){return t.requestTaskToken(n,e)},this}},{key:"tokenFunc",value:function(e){return this._tokenFunc=function(t,n){return new Promise(function(t){e(t,n)})},this}},{key:"listener",value:function(e){return this._listener=e,this}},{key:"tokenShare",value:function(e){return this._tokenShare=e,this}},{key:"chunk",value:function(e){return this._chunk=e,this}},{key:"debug",value:function(e){return this._isDebug=e,this}},{key:"build",value:function(){return new o.default(this)}},{key:"getRetry",get:function(){return this._retry}},{key:"getSize",get:function(){return this._size}},{key:"getAuto",get:function(){return this._auto}},{key:"getMultiple",get:function(){return this._multiple}},{key:"getAccept",get:function(){return this._accept}},{key:"getButton",get:function(){return this._button}},{key:"getButtonEventName",get:function(){return this._buttonEventName}},{key:"getCompress",get:function(){return this._compress}},{key:"getScale",get:function(){return this._scale}},{key:"getListener",get:function(){return this._listener}},{key:"getSaveKey",get:function(){return this._saveKey}},{key:"getTokenFunc",get:function(){return this._tokenFunc}},{key:"getTokenShare",get:function(){return this._tokenShare}},{key:"getChunk",get:function(){return this._chunk}},{key:"getIsDebug",get:function(){return this._isDebug}},{key:"getInterceptors",get:function(){return this._interceptors}},{key:"getDomain",get:function(){var t=this._domain;if(null==t&&(t=e.UPLOAD_DOMAIN),"string"!=typeof t){var n=this._scheme;if("string"!=typeof n){var r=window.location.protocol;n=r.substring(0,r.length-1)}t=t[n]}return t.endsWith("/")?t.substring(0,t.length-1):t}}]),e}();u.MAX_CHUNK_SIZE=4194304,u.BLOCK_SIZE=u.MAX_CHUNK_SIZE,u.UPLOAD_DOMAIN={http:"http://upload.qiniu.com",https:"https://up.qbox.me"},t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t){r(this,e),this._retry=0,this._progress=0,this._isSuccess=!1,this._isFinish=!1,this._file=t,this._createDate=new Date}return i(e,[{key:"file",get:function(){return this._file},set:function(e){this._file=e}},{key:"retry",get:function(){return this._retry},set:function(e){this._retry=e}},{key:"createDate",get:function(){return this._createDate},set:function(e){this._createDate=e}},{key:"startDate",get:function(){return this._startDate},set:function(e){this._startDate=e}},{key:"endDate",get:function(){return this._endDate},set:function(e){this._endDate=e}},{key:"isSuccess",get:function(){return this._isSuccess},set:function(e){this._isSuccess=e}},{key:"progress",get:function(){return this._progress},set:function(e){this._progress=Math.min(Math.max(0,e),100)}},{key:"result",get:function(){return this._result},set:function(e){this._result=e}},{key:"error",get:function(){return this._error},set:function(e){this._error=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}},{key:"isFinish",get:function(){return this._isFinish},set:function(e){this._isFinish=e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.Uploader=r.default;var i=n(2);t.UploaderBuilder=i.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}return i(e,[{key:"onReady",value:function(e){}},{key:"onStart",value:function(e){}},{key:"onTaskProgress",value:function(e){}},{key:"onTaskGetKey",value:function(e){return null}},{key:"onTaskFail",value:function(e){}},{key:"onTaskSuccess",value:function(e){}},{key:"onTaskRetry",value:function(e){}},{key:"onFinish",value:function(e){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}return i(e,[{key:"onIntercept",value:function(e){return!1}},{key:"onInterrupt",value:function(e){return!1}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(t){r(this,e),this.uploader=t}return i(e,[{key:"init",value:function(e){this.uploader=e}},{key:"upload",value:function(e){var t=this;this.task=e,this.uploader.getToken(e).then(function(n){e.startDate=new Date,t.uploadBlock(n)})}},{key:"uploadBlock",value:function(e){var t=this;o.default.d("准备开始上传块");var n=Promise.resolve();o.default.d("共"+this.task.blocks.length+"块等待上传"),o.default.d("共"+this.task.totalChunkCount+"分片等待上传"),this.task.blocks.forEach(function(r,i){r.chunks.forEach(function(r,s){n=n.then(function(){return o.default.d("开始上传第"+(i+1)+"块,第"+(s+1)+"片"),t.uploadChunk(r,e)})})}),n.then(function(){return t.concatChunks(e)}).then(function(){t.uploader.isTaskQueueFinish()&&(o.default.d("上传任务队列已结束"),t.uploader.tasking=!1,t.uploader.listener.onFinish(t.uploader.taskQueue))}).catch(function(e){o.default.w(t.task.file.name+"分块上传失败"),t.task.error=e,t.task.isSuccess=!1,t.task.isFinish=!0,t.task.endDate=new Date,t.uploader.listener.onTaskFail(t.task)})}},{key:"uploadChunk",value:function(e,t){var n=this;return new Promise(function(r,i){var o=0==e.block.chunks.indexOf(e),s=e.block.chunks.indexOf(e),u=o?null:e.block.chunks[s-1],a=o?n.getUploadBlockUrl(e.block.data.size):n.getUploadChunkUrl(e.start,u?u.ctx:null,u?u.host:null),l=new XMLHttpRequest;l.open("POST",a+=(/\?/.test(a)?"&":"?")+(new Date).getTime(),!0),l.setRequestHeader("Content-Type","application/octet-stream"),l.setRequestHeader("Authorization","UpToken "+t),l.upload.onprogress=function(t){if(t.lengthComputable){var r=Math.round((n.task.finishedBlocksSize+e.start+t.loaded)/n.task.file.size*100);n.task.progress<r&&(n.task.progress=r,n.uploader.listener.onTaskProgress(n.task))}},l.upload.onload=function(){var t=Math.round((n.task.finishedBlocksSize+e.start+e.data.size)/n.task.file.size*100);n.task.progress<t&&(n.task.progress=t,n.uploader.listener.onTaskProgress(n.task))},l.onreadystatechange=function(){if(l.readyState==XMLHttpRequest.DONE)if(200==l.status&&""!=l.responseText){var t=JSON.parse(l.responseText);e.isFinish=!0,e.processing=!1,e.ctx=t.ctx,e.host=t.host;var n=e.block.chunks.indexOf(e),o=n!=e.block.chunks.length-1;o||(e.block.isFinish=!0,e.block.processing=!1),r()}else i(l.response)},l.send(e.data)})}},{key:"concatChunks",value:function(e){var t=this;return new Promise(function(n,r){var i=t.task.key?btoa(t.task.key):null;i&&(i=i.replace(/\+/g,"-"),i=i.replace(/\//g,"_"));var s=t.getMakeFileUrl(t.task.file.size,i),u="",a=!0,l=!1,c=void 0;try{for(var f,h=t.task.blocks[Symbol.iterator]();!(a=(f=h.next()).done);a=!0){var k=f.value;u+=k.chunks[k.chunks.length-1].ctx+","}}catch(e){l=!0,c=e}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}u.endsWith(",")&&(u=u.substring(0,u.length-1));var y=new XMLHttpRequest;y.open("POST",s+=(/\?/.test(s)?"&":"?")+(new Date).getTime(),!0),y.setRequestHeader("Content-Type","text/plain"),y.setRequestHeader("Authorization","UpToken "+e),y.onreadystatechange=function(){if(y.readyState==XMLHttpRequest.DONE)if(t.task.isFinish=!0,200==y.status&&""!=y.responseText){var e=JSON.parse(y.responseText);t.task.isSuccess=!0,t.task.result=e,t.task.endDate=new Date,t.uploader.listener.onTaskSuccess(t.task),n()}else t.retryTask(t.task)?(o.default.w(t.task.file.name+"分块上传失败,准备开始重传"),t.uploader.listener.onTaskRetry(t.task)):r(y.response)},y.send(u)})}},{key:"getUploadBlockUrl",value:function(e){return this.uploader.domain+"/mkblk/"+e}},{key:"getUploadChunkUrl",value:function(e,t,n){return(n||this.uploader.domain)+"/bput/"+t+"/"+e+"/"}},{key:"getMakeFileUrl",value:function(e,t){return t?this.uploader.domain+"/mkfile/"+e+"/key/"+t:this.uploader.domain+"/mkfile/"+e}},{key:"retryTask",value:function(e){return e.retry>=this.uploader.retry?(o.default.w(e.file.name+"达到重传次数上限"+this.uploader.retry+",停止重传"),!1):(e.retry++,o.default.w(e.file.name+"开始重传,当前重传次数"+e.retry),!0)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=function(){function e(t){r(this,e),this.uploader=t}return i(e,[{key:"upload",value:function(e){var t=this;this.task=e,this.uploader.getToken(e).then(function(n){e.startDate=new Date,t.uploadFile(n)})}},{key:"createFormData",value:function(e){var t=this.task,n=new FormData;return null!==t.key&&void 0!==t.key&&n.append("key",t.key),n.append("token",e),n.append("file",t.file),o.default.d("创建formData对象"),n}},{key:"uploadFile",value:function(e){var t=this,n=this.task,r=new XMLHttpRequest;r.upload.onprogress=function(e){if(e.lengthComputable){var r=Math.round(100*e.loaded/e.total);n.progress<r&&(n.progress=r,t.uploader.listener.onTaskProgress(n))}},r.upload.onload=function(){n.progress<100&&(n.progress=100,t.uploader.listener.onTaskProgress(n))};var i=this.uploader.domain;i+=(/\?/.test(this.uploader.domain)?"&":"?")+(new Date).getTime(),r.open("POST",i,!0),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status&&""!=r.responseText?(n.result=JSON.parse(r.responseText),n.isSuccess=!0,n.isFinish=!0,n.endDate=new Date,t.uploader.listener.onTaskSuccess(n)):t.retryTask(n)?(o.default.w(n.file.name+"上传失败,准备开始重传"),t.uploader.listener.onTaskRetry(n)):(o.default.w(n.file.name+"上传失败"),n.error=r.response,n.isSuccess=!1,n.isFinish=!0,n.endDate=new Date,t.uploader.listener.onTaskFail(n)),t.uploader.isTaskQueueFinish()&&(t.uploader.tasking=!1,t.uploader.listener.onFinish(t.uploader.taskQueue)))};var s=this.createFormData(e);r.send(s),o.default.d("发送ajax post 请求")}},{key:"retryTask",value:function(e){return o.default.d("开始尝试重传"),e.retry>=this.uploader.retry?(o.default.w(e.file.name+"达到重传次数上限"+this.uploader.retry+",停止重传"),!1):(e.retry++,o.default.w(e.file.name+"开始重传,当前重传次数"+e.retry),this.upload(e),!0)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),a=function(e){function t(e,n,o){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s._blocks=[],s._blockSize=0,s._chunkSize=0,s._blockSize=n,s._chunkSize=o,s.spliceFile2Block(),s}return o(t,e),s(t,[{key:"spliceFile2Block",value:function(){this._blocks=[];for(var e=this._file.size,t=this._file,n=Math.ceil(e/this._blockSize),r=0;r<n;r++){var i=r*this._blockSize,o=i+this._blockSize,s=new l(i,o,t.slice(i,o),this._chunkSize,t);this._blocks.push(s)}}},{key:"blocks",get:function(){return this._blocks}},{key:"processingBlock",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._blocks[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.processing)return o}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}throw Error("找不到正在处理的Block")}},{key:"finishedBlocksSize",get:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;e+=s.isFinish?s.data.size:0}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"chunks",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value,u=!0,a=!1,l=void 0;try{for(var c,f=s.chunks[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;e.push(h)}}catch(e){a=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(a)throw l}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"processingChunk",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._blocks[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.processing){var s=!0,u=!1,a=void 0;try{for(var l,c=o.chunks[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var f=l.value;if(f.processing)return f}}catch(e){u=!0,a=e}finally{try{!s&&c.return&&c.return()}finally{if(u)throw a}}}}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}throw Error("找不到正在处理的Chunk")}},{key:"totalChunkCount",get:function(){var e=0,t=!0,n=!1,r=void 0;try{for(var i,o=this._blocks[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){e+=i.value.chunks.length}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}}]),t}(u.default);t.ChunkTask=a;var l=function(){function e(t,n,i,o,s){r(this,e),this._chunks=[],this._isFinish=!1,this._processing=!1,this._data=i,this._start=t,this._end=n,this._file=s,this.spliceBlock2Chunk(o)}return s(e,[{key:"spliceBlock2Chunk",value:function(e){for(var t=this._data.size,n=this._data,r=Math.ceil(t/e),i=0;i<r;i++){var o=i*e,s=o+e,u=new c(o,s,n.slice(o,s),this);this._chunks.push(u)}}},{key:"processing",get:function(){return this._processing},set:function(e){this._processing=e}},{key:"file",get:function(){return this._file}},{key:"isFinish",get:function(){return this._isFinish},set:function(e){this._isFinish=e}},{key:"data",get:function(){return this._data}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"chunks",get:function(){return this._chunks}}]),e}();t.Block=l;var c=function(){function e(t,n,i,o){r(this,e),this._processing=!1,this._isFinish=!1,this._start=t,this._end=n,this._data=i,this._block=o}return s(e,[{key:"block",get:function(){return this._block}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"data",get:function(){return this._data}},{key:"isFinish",get:function(){return this._isFinish},set:function(e){this._isFinish=e}},{key:"host",get:function(){return this._host},set:function(e){this._host=e}},{key:"processing",get:function(){return this._processing},set:function(e){this._processing=e}},{key:"ctx",get:function(){return this._ctx},set:function(e){this._ctx=e}}]),e}();t.Chunk=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){r(this,e)}return i(e,null,[{key:"uuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}]),e}();t.default=o},function(e,t,n){"use strict"}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9xaW5pdTRqcy5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDYzNjJkZDQ5MGU1NzRjZDNkY2ZmIiwid2VicGFjazovLy8uL3NyYy91dGlsL0xvZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL1VwbG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvVXBsb2FkZXJCdWlsZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvdGFzay9CYXNlVGFzay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL2hvb2svU2ltcGxlVXBsb2FkTGlzdGVuZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC9pbnRlcmNlcHRvci9TaW1wbGVVcGxvYWRJbnRlcmNlcHRvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL3BhdHRyZW4vQ2h1bmtVcGxvYWRQYXR0ZXJuLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvcGF0dHJlbi9EaXJlY3RVcGxvYWRQYXR0ZXJuLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvdGFzay9DaHVua1Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC90YXNrL0RpcmVjdFRhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC91dWlkL1VVSUQudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJ3cml0YWJsZSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIkxvZyIsIl9lbmFibGUiLCJjb25zb2xlIiwiZGVidWciLCJsb2ciLCJlcnJvciIsIndhcm4iLCJpbmZvIiwic2V0IiwiZGVmYXVsdCIsIkRpcmVjdFRhc2tfMSIsIkNodW5rVGFza18xIiwiVVVJRF8xIiwiVXBsb2FkZXJCdWlsZGVyXzEiLCJMb2dfMSIsIlNpbXBsZVVwbG9hZExpc3RlbmVyXzEiLCJEaXJlY3RVcGxvYWRQYXR0ZXJuXzEiLCJDaHVua1VwbG9hZFBhdHRlcm5fMSIsIlVwbG9hZGVyIiwiYnVpbGRlciIsIl90aGlzMiIsIkZJTEVfSU5QVVRfRUxfSUQiLCJfdGFza1F1ZXVlIiwiX3Rhc2tpbmciLCJfc2NhbGUiLCJfc2F2ZUtleSIsImhhbmRsZUZpbGVzIiwiZmlsZUlucHV0IiwiZmlsZXMiLCJnZW5lcmF0ZVRhc2siLCJpc0ludGVycnVwdCIsImludGVyY2VwdGVkVGFza3MiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwidGFza1F1ZXVlIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInRhc2siLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJpbnRlcmNlcHRvcnMiLCJpbnRlcmNlcHRvciIsIm9uSW50ZXJjZXB0IiwicHVzaCIsIm9uSW50ZXJydXB0IiwiZXJyIiwicmV0dXJuIiwidyIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIl90YXNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibGlzdGVuZXIiLCJvblJlYWR5IiwiaGFuZGxlSW1hZ2VzIiwidGhlbiIsImF1dG8iLCJzdGFydCIsInJlc29sdmVVVUlEIiwicmUiLCJ0ZXN0IiwicmVwbGFjZSIsInV1aWQiLCJyZXNvbHZlSW1hZ2VJbmZvIiwiYmxvYiIsIndpZHRoUmUiLCJoZWlnaHRSZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaW1nIiwiSW1hZ2UiLCJzcmMiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJvbmxvYWQiLCJ3aWR0aCIsInRvU3RyaW5nIiwiaGVpZ2h0Iiwib25TYXZlS2V5UmVzb2x2ZWQiLCJzYXZlS2V5IiwiX3Rva2VuU2hhcmUiLCJfcmV0cnkiLCJnZXRSZXRyeSIsIl9zaXplIiwiZ2V0U2l6ZSIsIl9jaHVuayIsImdldENodW5rIiwiX2F1dG8iLCJnZXRBdXRvIiwiX211bHRpcGxlIiwiZ2V0TXVsdGlwbGUiLCJfYWNjZXB0IiwiZ2V0QWNjZXB0IiwiX2J1dHRvbiIsImdldEJ1dHRvbiIsIl9idXR0b25FdmVudE5hbWUiLCJnZXRCdXR0b25FdmVudE5hbWUiLCJfY29tcHJlc3MiLCJnZXRDb21wcmVzcyIsImdldFNjYWxlIiwiZ2V0U2F2ZUtleSIsIl90b2tlbkZ1bmMiLCJnZXRUb2tlbkZ1bmMiLCJnZXRUb2tlblNoYXJlIiwiX2xpc3RlbmVyIiwiYXNzaWduIiwiZ2V0TGlzdGVuZXIiLCJfaW50ZXJjZXB0b3JzIiwiZ2V0SW50ZXJjZXB0b3JzIiwiX2RvbWFpbiIsImdldERvbWFpbiIsIl9maWxlSW5wdXRJZCIsIkRhdGUiLCJnZXRUaW1lIiwiZW5hYmxlIiwiZ2V0SXNEZWJ1ZyIsInZhbGlkYXRlT3B0aW9ucyIsImluaXQiLCJpbml0RmlsZUlucHV0RWwiLCJleGlzdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJfZmlsZUlucHV0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJpZCIsInN0eWxlIiwiZGlzcGxheSIsIm11bHRpcGxlIiwiYWNjZXB0IiwiYWNjZXB0VmFsdWUiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCIsIl9kaWRJdGVyYXRvckVycm9yNCIsIl9pdGVyYXRvckVycm9yNCIsIl9zdGVwNCIsIl9pdGVyYXRvcjQiLCJlbmRzV2l0aCIsInN1YnN0cmluZyIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaG9vc2VGaWxlIiwiYmluZCIsIl90b2tlbiIsInJlc2V0VXBsb2FkZXIiLCJmaWxlIiwiY2h1bmsiLCJzaXplIiwiQkxPQ0tfU0laRSIsIkNodW5rVGFzayIsIm9uVGFza0dldEtleSIsIl90aGlzMyIsInByb21pc2VzIiwiY29tcHJlc3MiLCJzY2FsZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241IiwiX2RpZEl0ZXJhdG9yRXJyb3I1IiwiX2l0ZXJhdG9yRXJyb3I1IiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsIm1hdGNoIiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsIl90aGlzIiwiaW1nVyIsImltZ0giLCJzY2FsZVciLCJzY2FsZUgiLCJkcmF3SW1hZ2UiLCJ0b0Jsb2IiLCJpc0NodW5rVGFzayIsInNwbGljZUZpbGUyQmxvY2siLCJhbGwiLCJFcnJvciIsIkFycmF5IiwidGFza2luZyIsIm9uU3RhcnQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiIsIl9kaWRJdGVyYXRvckVycm9yNiIsIl9pdGVyYXRvckVycm9yNiIsIl9zdGVwNiIsIl9pdGVyYXRvcjYiLCJfdGFzazIiLCJpc0RpcmVjdFRhc2siLCJ1cGxvYWQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyIsIl9kaWRJdGVyYXRvckVycm9yNyIsIl9pdGVyYXRvckVycm9yNyIsIl9zdGVwNyIsIl9pdGVyYXRvcjciLCJpc0ZpbmlzaCIsImNsaWNrIiwiX3RoaXM0IiwidG9rZW4iLCJ1cmwiLCJfdGhpczUiLCJyZXNvbHZlU2F2ZUtleSIsInJlcXVlc3RUb2tlbiIsInJlamVjdCIsImVuY29kZVVSSUNvbXBvbmVudCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJET05FIiwic3RhdHVzIiwicmVzcG9uc2UiLCJ1cHRva2VuIiwib25hYm9ydCIsInJlc3BvbnNlVHlwZSIsInNlbmQiLCJfdGhpczYiLCJjb25zdHJ1Y3RvciIsIlVwbG9hZGVyXzEiLCJTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcl8xIiwiVXBsb2FkZXJCdWlsZGVyIiwiVVBMT0FEX0RPTUFJTiIsIl9zY2hlbWUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInByb3RvY29sIiwiX2lzRGVidWciLCJfaW50ZXJjZXB0b3IiLCJldmVudE5hbWUiLCJhcmd1bWVudHMiLCJNYXRoIiwibWF4IiwibWluIiwiX3Rva2VuVXJsIiwidXBsb2FkZXIiLCJyZXF1ZXN0VGFza1Rva2VuIiwiX2RlYnVnIiwiZG9tYWluIiwic2NoZW1lIiwiTUFYX0NIVU5LX1NJWkUiLCJodHRwIiwiaHR0cHMiLCJCYXNlVGFzayIsIl9wcm9ncmVzcyIsIl9pc1N1Y2Nlc3MiLCJfaXNGaW5pc2giLCJfZmlsZSIsIl9jcmVhdGVEYXRlIiwiX3N0YXJ0RGF0ZSIsIl9lbmREYXRlIiwiX3Jlc3VsdCIsIl9lcnJvciIsIl9rZXkiLCJTaW1wbGVVcGxvYWRMaXN0ZW5lciIsIlNpbXBsZVVwbG9hZEludGVyY2VwdG9yIiwiQ2h1bmtVcGxvYWRQYXR0ZXJuIiwiZ2V0VG9rZW4iLCJzdGFydERhdGUiLCJ1cGxvYWRCbG9jayIsImNoYWluIiwiYmxvY2tzIiwidG90YWxDaHVua0NvdW50IiwiZm9yRWFjaCIsImJsb2NrIiwiYmxvY2tJbmRleCIsImNodW5rcyIsImNodW5rSW5kZXgiLCJ1cGxvYWRDaHVuayIsImNvbmNhdENodW5rcyIsImlzVGFza1F1ZXVlRmluaXNoIiwib25GaW5pc2giLCJjYXRjaCIsImlzU3VjY2VzcyIsImVuZERhdGUiLCJvblRhc2tGYWlsIiwiaXNGaXJzdENodW5rSW5CbG9jayIsInByZXZDaHVuayIsImdldFVwbG9hZEJsb2NrVXJsIiwiZGF0YSIsImdldFVwbG9hZENodW5rVXJsIiwiaG9zdCIsInNldFJlcXVlc3RIZWFkZXIiLCJvbnByb2dyZXNzIiwiZSIsImxlbmd0aENvbXB1dGFibGUiLCJwcm9ncmVzcyIsInJvdW5kIiwiZmluaXNoZWRCbG9ja3NTaXplIiwibG9hZGVkIiwib25UYXNrUHJvZ3Jlc3MiLCJyZXNwb25zZVRleHQiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJwcm9jZXNzaW5nIiwiX2NodW5rSW5kZXgiLCJoYXNOZXh0Q2h1bmtJblRoaXNCbG9jayIsImVuY29kZWRLZXkiLCJidG9hIiwiZ2V0TWFrZUZpbGVVcmwiLCJjdHhMaXN0U3RyaW5nIiwib25UYXNrU3VjY2VzcyIsInJldHJ5VGFzayIsIm9uVGFza1JldHJ5IiwiYmxvY2tTaXplIiwiZmlsZVNpemUiLCJyZXRyeSIsIkRpcmVjdFVwbG9hZFBhdHRlcm4iLCJ1cGxvYWRGaWxlIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInRvdGFsIiwiY3JlYXRlRm9ybURhdGEiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQmFzZVRhc2tfMSIsIl9CYXNlVGFza18xJGRlZmF1bHQiLCJjaHVua1NpemUiLCJnZXRQcm90b3R5cGVPZiIsIl9ibG9ja3MiLCJfYmxvY2tTaXplIiwiX2NodW5rU2l6ZSIsImJsb2NrQ291bnQiLCJjZWlsIiwiZW5kIiwiQmxvY2siLCJzbGljZSIsImFycmF5IiwiY291bnQiLCJfY2h1bmtzIiwiX3Byb2Nlc3NpbmciLCJfZGF0YSIsIl9zdGFydCIsIl9lbmQiLCJzcGxpY2VCbG9jazJDaHVuayIsImNodW5rQ291bnQiLCJDaHVuayIsIl9ibG9jayIsIl9ob3N0IiwiX2N0eCIsIkRpcmVjdFRhc2siLCJhcHBseSIsIlVVSUQiLCJyIiwicmFuZG9tIiwiZmxvb3IiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELElBQ0Esa0JBQUFHLGdCQUFBQyxJQUNBRCxVQUFBSCxHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLE1BQUFELElBRUFELEVBQUEsTUFBQUMsS0FDQ0ssS0FBQSxXQUNELE1DQWdCLFVBQVVDLEdDTjFCLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBUCxPQUdBLElBQUFDLEdBQUFPLEVBQUFELElBQ0FFLEVBQUFGLEVBQ0FHLEdBQUEsRUFDQVYsV0FVQSxPQU5BSyxHQUFBRSxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBdkJBLEdBQUFRLEtBK0RBLE9BbkNBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBRyxFQUFBLFNBQUFLLEdBQTJDLE1BQUFBLElBRzNDUixFQUFBUyxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBWCxFQUFBWSxFQUFBbEIsRUFBQWdCLElBQ0FHLE9BQUFDLGVBQUFwQixFQUFBZ0IsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFYLEVBQUFrQixFQUFBLFNBQUF2QixHQUNBLEdBQUFnQixHQUFBaEIsS0FBQXdCLFdBQ0EsV0FBMkIsTUFBQXhCLEdBQUEsU0FDM0IsV0FBaUMsTUFBQUEsR0FFakMsT0FEQUssR0FBQVMsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWCxFQUFBWSxFQUFBLFNBQUFRLEVBQUFDLEdBQXNELE1BQUFSLFFBQUFTLFVBQUFDLGVBQUFsQixLQUFBZSxFQUFBQyxJQUd0RHJCLEVBQUF3QixFQUFBLEdBR0F4QixJQUFBeUIsRUFBQSxLRGdCTSxTQUFVOUIsRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FJaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT0V6Ri9DLEdGMkZBLElFeEZxQmdDLEdBQUEsV0Z5RmpCLFFBQVNBLEtBQ0xkLEVBQWdCNUIsS0FBTTBDLEdBcUQxQixNQWxEQVYsR0FBYVUsRUFBSyxPQUNkSCxJQUFLLElBQ0w3QixNQUFPLFNFdkZnQlksR0FDZm9CLEVBQVNDLFNBR1ZDLFFBQU1DLE1BQ2pCdkIsTUZ5RklpQixJQUFLLElBQ0w3QixNQUFPLFNFeEZnQlksR0FDZm9CLEVBQVNDLFNBR1ZDLFFBQUlFLElBQ2Z4QixNRjBGSWlCLElBQUssSUFDTDdCLE1BQU8sU0V6RmdCWSxHQUNmb0IsRUFBU0MsU0FHVkMsUUFBTUcsTUFDakJ6QixNRjJGSWlCLElBQUssSUFDTDdCLE1BQU8sU0UxRmdCWSxHQUNmb0IsRUFBU0MsU0FHVkMsUUFBS0ksS0FDaEIxQixNRjRGSWlCLElBQUssSUFDTDdCLE1BQU8sU0UzRmdCWSxHQUNmb0IsRUFBU0MsU0FHVkMsUUFBS0ssS0FDaEIzQixNRjZGSWlCLElBQUssU0FDTHBCLElBQUssV0V0SUMsTUFBS25CLE1BQ2YyQyxTRndJSU8sSUFBSyxTRXRJdUJ4QyxHQUN4QlYsS0FBUTJDLFFBQ2hCakMsTUZ5SU9nQyxJRWpKT0EsR0FBT0MsU0FBaUIsRUE4QzFDL0MsRUFBQXVELFFBQW1CVCxHRjJHYixTQUFVN0MsRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FJaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT0FBTyxHR2xLdEQsSUFBQTBDLEdBQUFsRCxFQUEyQyxJQUMzQ21ELEVBQUFuRCxFQUEyQyxHQUUzQ29ELEVBQUFwRCxFQUErQixJQUMvQnFELEVBQUFyRCxFQUFnRCxHQUNoRHNELEVBQUF0RCxFQUE4QixHQUc5QnVELEVBQUF2RCxFQUErRCxHQUMvRHdELEVBQUF4RCxFQUFnRSxHQUNoRXlELEVBQUF6RCxFQUE4RCxFQUM5REEsR0FFQSxHSGdLQSxJQUFJMEQsR0FBVyxXR3ZJWCxRQUFBQSxHQUFvQ0MsR0h5SWhDLEdBQUlDLEdBQVM5RCxJQUViNEIsR0FBZ0I1QixLQUFNNEQsR0duS2xCNUQsS0FBZ0IrRCxpQkFBNEIsaUJBSTVDL0QsS0FBVWdFLGNBQ1ZoRSxLQUFRaUUsVUFBa0IsRUFXMUJqRSxLQUFNa0UsVUFFTmxFLEtBQVFtRSxVQUEyQixFQXFHbkNuRSxLQUFXb0UsWUFBRyxXQUVmLEdBQWtDLEdBQTdCTixFQUFVTyxVQUFNQyxNQUFPbEMsT0FBNUIsQ0FLQzBCLEVBQWdCUyxjQUdwQixJQUFlQyxJQUFrQixFQUNiQyxLSHNEWkMsR0FBNEIsRUFDNUJDLEdBQW9CLEVBQ3BCQyxNQUFpQkMsRUFFckIsS0d2REMsT0FBMkJDLEdBQTNCQyxFQUFnQmpCLEVBQVdrQixVQUFBQyxPQUFBQyxjQUFBUixHQUFBSSxFQUFBQyxFQUFBSSxRQUFBQyxNQUFBVixHQUFBLEdBQUUsR0FBckJXLEdBQUFQLEVBQUFwRSxNSDBERzRFLEdBQTZCLEVBQzdCQyxHQUFxQixFQUNyQkMsTUFBa0JYLEVBRXRCLEtHN0RILE9BQXFDWSxHQUFyQ0MsRUFBdUI1QixFQUFjNkIsYUFBQVYsT0FBQUMsY0FBQUksR0FBQUcsRUFBQUMsRUFBQVAsUUFBQUMsTUFBQUUsR0FBQSxHQUFFLEdBQXhCTSxHQUFBSCxFQUFBL0UsS0FRYixJQU5Za0YsRUFBWUMsWUFBT1IsS0FDZFosRUFBS3FCLEtBQU9ULEdBQzVCN0IsRUFBR0wsUUFBRXhDLEVBQWdCLGVBQ3JCNkMsRUFBR0wsUUFBRXhDLEVBQ1QwRSxJQUVlTyxFQUFZRyxZQUFPVixHQUFFLENBRXJCYixHQUFRLENBRXZCLFNIa0VNLE1BQU93QixHQUNMVCxHQUFxQixFQUNyQkMsRUFBa0JRLEVBQ3BCLFFBQ0UsS0FDU1YsR0FBOEJJLEVBQVdPLFFBQzFDUCxFQUFXTyxTQUVqQixRQUNFLEdBQUlWLEVBQ0EsS0FBTUMsTUFLeEIsTUFBT1EsR0FDTHJCLEdBQW9CLEVBQ3BCQyxFQUFpQm9CLEVBQ25CLFFBQ0UsS0FDU3RCLEdBQTZCSyxFQUFVa0IsUUFDeENsQixFQUFVa0IsU0FFaEIsUUFDRSxHQUFJdEIsRUFDQSxLQUFNQyxJR3ZGbkIsR0FBYUosRUFHaEIsV0FGSWhCLEdBQUdMLFFBQUUrQyxFQUFpQixlSGdHdEIsSUFBSUMsSUFBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxNQUFrQnhCLEVBRXRCLEtHL0ZDLE9BQTZCeUIsR0FBN0JDLEVBQTZCOUIsRUFBQVEsT0FBQUMsY0FBQWlCLEdBQUFHLEVBQUFDLEVBQUFwQixRQUFBQyxNQUFBZSxHQUFBLEdBQUUsR0FBdkJLLEdBQUFGLEVBQUE1RixNQUNBK0YsRUFBTzNDLEVBQVVrQixVQUFRMEIsUUFBT0YsSUFDekIsR0FBUEMsR0FDRDNDLEVBQVVrQixVQUFPMkIsT0FBTUYsRUFDL0IsSUhxR0UsTUFBT1QsR0FDTEksR0FBcUIsRUFDckJDLEVBQWtCTCxFQUNwQixRQUNFLEtBQ1NHLEdBQThCSSxFQUFXTixRQUMxQ00sRUFBV04sU0FFakIsUUFDRSxHQUFJRyxFQUNBLEtBQU1DLElHM0dsQnZDLEVBQVM4QyxTQUFRQyxRQUFLL0MsRUFBWWtCLFdBSWxDbEIsRUFBZWdELGVBQUtDLEtBQUMsV0FFYmpELEVBQU1rRCxPQUNWeEQsRUFBR0wsUUFBRXhDLEVBQVcsVUFDWm1ELEVBQ1JtRCxhQXdQQWpILEtBQVdrSCxZQUFHLFNBQVV2RixHQUM1QixHQUFNd0YsR0FBZ0IsWUFDbkIsT0FBR0EsR0FBS0MsS0FBSXpGLEdBQ0hBLEVBQVEwRixRQUFHRixFQUFFN0QsRUFBSUgsUUFDN0JtRSxRQUVKM0YsR0FFUTNCLEtBQWdCdUgsaUJBQUcsU0FBV0MsRUFBVzdGLEdBQzdDLEdBQVc4RixHQUE0Qix5QkFDM0JDLEVBQTZCLHlCQUN0QyxPQUFTRCxHQUFLTCxLQUFHekYsSUFBYStGLEVBQUtOLEtBQUl6RixHQUdwQyxHQUFZZ0csU0FBUyxTQUFRQyxHQUMvQixHQUFPQyxHQUFHLEdBQVlDLE1BQ25CRCxHQUFJRSxJQUFNQyxJQUFnQkMsZ0JBQU9ULEdBQ2pDSyxFQUFPSyxPQUFHLFdBQ1J2RyxFQUFJQSxFQUFRMEYsUUFBUUksRUFBS0ksRUFBTU0sTUFBYUMsWUFDNUN6RyxFQUFJQSxFQUFRMEYsUUFBU0ssRUFBS0csRUFBT1EsT0FBYUQsWUFDeENSLEVBQ1hqRyxNQVRjZ0csUUFBUUMsUUFDMUJqRyxJQVlJM0IsS0FBaUJzSSxrQkFBRyxTQUFnQkMsR0FFbEMsTUFERnpFLEdBQVkwRSxZQUFPMUUsRUFBWTBFLGFBQVExRSxFQUFTSyxVQUFZb0UsRUFFcEVBLEdBeGFRdkksS0FBT3lJLE9BQVU1RSxFQUFVNkUsU0FDM0IxSSxLQUFNMkksTUFBVTlFLEVBQVMrRSxRQUN6QjVJLEtBQU82SSxPQUFVaEYsRUFBVWlGLFNBQzNCOUksS0FBTStJLE1BQVVsRixFQUFTbUYsUUFDekJoSixLQUFVaUosVUFBVXBGLEVBQWFxRixZQUNqQ2xKLEtBQVFtSixRQUFVdEYsRUFBV3VGLFVBQzdCcEosS0FBUXFKLFFBQVV4RixFQUFXeUYsVUFDN0J0SixLQUFpQnVKLGlCQUFVMUYsRUFBb0IyRixtQkFDL0N4SixLQUFVeUosVUFBVTVGLEVBQWE2RixZQUNqQzFKLEtBQU9rRSxPQUFVTCxFQUFVOEYsU0FDM0IzSixLQUFTbUUsU0FBVU4sRUFBWStGLFdBQy9CNUosS0FBVzZKLFdBQVVoRyxFQUFjaUcsYUFDbkM5SixLQUFZd0ksWUFBVTNFLEVBQWVrRyxjQUNyQy9KLEtBQVVnSyxVQUFTakosT0FBT2tKLE9BQUMsR0FBSXhHLEdBQXNCTixRQUFTVSxFQUFjcUcsYUFDNUVsSyxLQUFjbUssY0FBVXRHLEVBQWlCdUcsZ0JBQ3pDcEssS0FBUXFLLFFBQVV4RyxFQUFXeUcsVUFDN0J0SyxLQUFnQnVLLGFBQU92SyxLQUFpQitELGlCQUFBLEtBQUksR0FBVXlHLE9BQWFDLFVBQ3ZFakgsRUFBR0wsUUFBT3VILE9BQVU3RyxFQUFZOEcsV0FFNUIzSyxLQUFtQjRLLGtCQUVuQjVLLEtBQ1I2SyxPSDR2QkEsTUF4ZEE3SSxHQUFhNEIsSUFDVHJCLElBQUssT0FDTDdCLE1BQU8sV0doU0hWLEtBQ1I4SyxxQkh1U0l2SSxJQUFLLGtCQUNMN0IsTUFBTyxXR2hTUCxHQUFTcUssR0FBZ0RDLFNBQWVDLGVBQUtqTCxLQUFldUssYUFlekYsSUFaQ3ZLLEtBQVdrTCxXQUFRSCxHQUFtQkMsU0FBY0csY0FBVSxTQUM5RG5MLEtBQVVxRSxVQUFLK0csS0FBVSxPQUN6QnBMLEtBQVVxRSxVQUFHZ0gsR0FBT3JMLEtBQWN1SyxhQUNsQ3ZLLEtBQVVxRSxVQUFNaUgsTUFBUUMsUUFBVSxPQUc5QnZMLEtBQVV3TCxXQUVWeEwsS0FBVXFFLFVBQVNtSCxVQUMzQixHQUdReEwsS0FBT3lMLFFBQTRCLEdBQXBCekwsS0FBT3lMLE9BQU9ySixPQUFNLENBQ3ZDLEdBQWVzSixHQUFjLEdBRFlDLEdBQUEsRUhrU2pDQyxHQUFxQixFQUNyQkMsTUFBa0JoSCxFQUV0QixLR25TQyxPQUF5QmlILEdBQXpCQyxFQUFpQi9MLEtBQVF5TCxPQUFBeEcsT0FBQUMsY0FBQXlHLEdBQUFHLEVBQUFDLEVBQUE1RyxRQUFBQyxNQUFBdUcsR0FBQSxHQUNmRCxHQURESSxFQUFBcEwsTUFFQ2dMLEdBQ2YsS0h1U00sTUFBTzFGLEdBQ0w0RixHQUFxQixFQUNyQkMsRUFBa0I3RixFQUNwQixRQUNFLEtBQ1MyRixHQUE4QkksRUFBVzlGLFFBQzFDOEYsRUFBVzlGLFNBRWpCLFFBQ0UsR0FBSTJGLEVBQ0EsS0FBTUMsSUcvU1BILEVBQVNNLFNBQU0sT0FDZk4sRUFBY0EsRUFBVU8sVUFBRSxFQUFhUCxFQUFPdEosT0FDN0QsSUFDSXBDLEtBQVVxRSxVQUFPb0gsT0FBZUMsRUFDcENsSSxFQUFHTCxRQUFHeEMsRUFBQSxZQUNWK0ssR0FRRyxHQUxLVixTQUFLa0IsS0FBWUMsWUFBS25NLEtBQVlxRSxXQUd0Q3JFLEtBQVVxRSxVQUFpQitILGlCQUFTLFNBQU1wTSxLQUFZb0UsYUFBUyxPQUVyQ1MsSUFBdEI3RSxLQUFRcUosUUFBZ0IsQ0FDRjJCLFNBQWVDLGVBQUtqTCxLQUFVcUosU0FDakMrQyxpQkFBS3BNLEtBQWlCdUosaUJBQU12SixLQUFXcU0sV0FBS0MsS0FDdkV0TSxXSHdUQXVDLElBQUssZ0JBQ0w3QixNQUFPLFdHalRQOEMsRUFBR0wsUUFBRXhDLEVBQWtCLGlCQUNuQlgsS0FBVWdGLFVBQU81QyxPQUFLLEVBQzFCb0IsRUFBR0wsUUFBRXhDLEVBQVksV0FDYlgsS0FBT3VNLE9BQVEsS0FDbkIvSSxFQUFHTCxRQUFFeEMsRUFBYSxZQUNsQjZDLEVBQUdMLFFBQUV4QyxFQUNULG9CSDBUSTRCLElBQUssZUFLTDdCLE1BQU8sV0d6T0hWLEtBQWlCd00sZUFLakIsS0FBQyxHQUhJbEksR0FBaUJ0RSxLQUFVcUUsVUFBT0MsTUFHakNqRSxFQUFZLEVBQUdBLEVBQU9MLEtBQVVxRSxVQUFNQyxNQUFPbEMsT0FBSy9CLElBQUcsQ0FDM0QsR0FBUW9NLEdBQWNuSSxFQUFJakUsR0FFUGdGLE1BQUEsRUFHWEEsR0FEQXJGLEtBQU0wTSxPQUFRRCxFQUFLRSxLQUFHcEosRUFBZUosUUFBWXlKLFdBQzlDLEdBQUl2SixHQUFTd0osVUFBS0osRUFBRWxKLEVBQWVKLFFBQVd5SixXQUFNNU0sS0FDL0QyTSxNQUVXLEdBQUl2SixHQUFVRCxRQUN6QnNKLEdBQzJCLEdBQW5Cek0sS0FBU21FLFdBQ1RrQixFQUFJOUMsSUFBT3ZDLEtBQVM0RyxTQUFha0csYUFDekN6SCxJQUNJckYsS0FBVWdGLFVBQUtjLEtBQ3ZCVCxPSDZPQTlDLElBQUssZUFDTDdCLE1BQU8sV0FDSCxHQUFJcU0sR0FBUy9NLEtHeE9MZ04sSUFFVCxJQUFtQixHQUFkaE4sS0FBU2lOLFVBQTJCLEdBQWRqTixLQUFNa04sTUFBRyxJQUE0QixHQUFmbE4sS0FBTWtOLE1BQUcsR0FBTSxDQUFFLEdBQUFDLElBQUEsRUgyT3pEQyxHQUFxQixFQUNyQkMsTUFBa0J4SSxFQUV0QixLRzdPQyxPQUEyQnlJLEdBQTNCQyxFQUFnQnZOLEtBQVdnRixVQUFBQyxPQUFBQyxjQUFBaUksR0FBQUcsRUFBQUMsRUFBQXBJLFFBQUFDLE1BQUErSCxHQUFBLElIOE9aLFdBQ1IsR0cvT0M5SCxHQUFBaUksRUFBQTVNLEtBQ04sS0FBTTJFLEVBQUtvSCxLQUFLckIsS0FBTW9DLE1BQVksV0FFckMsZ0JBQ0FoSyxHQUFHTCxRQUFHeEMsRUFBTzBFLEVBQUtvSCxLQUFLN0wsS0FBQSxhQUFpQnlFLEVBQUtvSCxLQUFLRSxLQUFjLFdBRWhFLElBQVVjLEdBQWtEekMsU0FBY0csY0FBVyxVQUU5RXRELEVBQXFCLEdBQVlDLE9BQ2pDNEYsRUFBNkRELEVBQVdFLFdBQU8sS0FDbkY5RixHQUFJRSxJQUFNQyxJQUFnQkMsZ0JBQUs1QyxFQUFPb0gsS0FHekMsSUFBaUJtQixHQUFBYixDQUVUQyxHQUFLbEgsS0FBQSxHQUFZNkIsU0FBQSxTQUFlQyxHQUFSLE1BQ3pCQyxHQUFPSyxPQUFHLFdBRVQsR0FBUTJGLEdBQU1oRyxFQUFPTSxNQUNiMkYsRUFBTWpHLEVBQVFRLE9BRVowRixFQUFRSCxFQUFNVixNQUFJLEdBQ2xCYyxFQUFRSixFQUFNVixNQUFJLEVBRWIsSUFBTGEsR0FBZUMsRUFBSyxHQUNwQlAsRUFBTXRGLE1BQU8wRixFQUFPQyxFQUFVRSxFQUM5QlAsRUFBT3BGLE9BQ2pCMkYsR0FDb0IsR0FBTEEsR0FBZUQsRUFBSyxHQUN6Qk4sRUFBTXRGLE1BQVU0RixFQUNoQk4sRUFBT3BGLE9BQU95RixFQUFPRCxFQUMvQkUsR0FDZUEsRUFBSSxHQUFVQyxFQUFLLEdBQ3hCUCxFQUFNdEYsTUFBVTRGLEVBQ2hCTixFQUFPcEYsT0FDakIyRixJQUVVUCxFQUFNdEYsTUFBTU4sRUFBT00sTUFDbkJzRixFQUFPcEYsT0FBTVIsRUFDdkJRLFFBR0dxRixFQUFVTyxVQUFJcEcsRUFBRyxFQUFHLEVBQVE0RixFQUFNdEYsTUFBUXNGLEVBQVNwRixRQUUvQ3pGLFFBQUlFLElBQVMySyxHQUNiN0ssUUFBSUUsSUFBTzJLLEVBQVNTLFFBRXJCVCxFQUFPUyxPQUFDLFNBQVcxRyxHQUNkSSxFQUFPSixHQUNkaEUsRUFBR0wsUUFBR3hDLEVBQU8wRSxFQUFLb0gsS0FBSzdMLEtBQUEsYUFBaUI0RyxFQUFLbUYsS0FDakQsYUFBZSxhQUNuQixJQUQwQmlCLEVBQVNYLGFBRWpDbEcsS0FBQyxTQUFVUyxHQUNUQSxFQUFLNUcsS0FBT3lFLEVBQUtvSCxLQUFNN0wsS0FDdkJ5RSxFQUFLb0gsS0FBUWpGLEVBQ0w1RCxFQUFZdUssWUFBTzlJLElBQ1ZBLEVBQ3JCK0ksMkJINE9GLE1BQU9wSSxHQUNMb0gsR0FBcUIsRUFDckJDLEVBQWtCckgsRUFDcEIsUUFDRSxLQUNTbUgsR0FBOEJJLEVBQVd0SCxRQUMxQ3NILEVBQVd0SCxTQUVqQixRQUNFLEdBQUltSCxFQUNBLEtBQU1DLEtHbFBwQixNQUFRMUYsU0FBSTBHLElBQ3RCckIsTUg2UEl6SyxJQUFLLGtCQUNMN0IsTUFBTyxXR3ZQSixHQURIOEMsRUFBR0wsUUFBRXhDLEVBQWdCLGdCQUNaWCxLQUFZNkosV0FDakIsS0FBTSxJQUFTeUUsT0FDbkIsc0JBQ0csS0FBTXRPLEtBQU1rTixTQUFVbE4sS0FBTWtOLGdCQUFrQnFCLFNBQTBCLEdBQWxCdk8sS0FBTWtOLE1BQU85SyxRQUFhcEMsS0FBTWtOLE1BQUcsR0FBSSxHQUFRbE4sS0FBTWtOLE1BQUcsR0FBSyxFQUNsSCxLQUFNLElBQVNvQixPQUNuQiwyREFDQTlLLEdBQUdMLFFBQUV4QyxFQUNULGVIK1BJNEIsSUFBSyxRQUNMN0IsTUFBTyxXR3hQSixHQUZIOEMsRUFBR0wsUUFBZXhDLEVBQUEsWUFFbUIsR0FBN0JYLEtBQVVxRSxVQUFNQyxNQUFPbEMsT0FDM0IsS0FBTSxJQUFTa00sT0FDbkIsaUJBRUcsSUFBS3RPLEtBQVN3TyxRQUNiLEtBQU0sSUFBU0YsT0FDbkIsZ0JBRUl0TyxNQUFTNEcsU0FBUTZILFFBQUt6TyxLQUFZZ0YsVUgwUGxDLElBQUkwSixJQUE2QixFQUM3QkMsR0FBcUIsRUFDckJDLE1BQWtCL0osRUFFdEIsS0czUEMsT0FBMkJnSyxHQUEzQkMsRUFBZ0I5TyxLQUFXZ0YsVUFBQUMsT0FBQUMsY0FBQXdKLEdBQUFHLEVBQUFDLEVBQUEzSixRQUFBQyxNQUFBc0osR0FBQSxHQUFFLEdBQXJCSyxHQUFBRixFQUFBbk8sS0FJTixJQUhIOEMsRUFBR0wsUUFBR3hDLEVBQUEsU0FBYW9PLEVBQUt0QyxLQUFTN0wsTUFDakM0QyxFQUFHTCxRQUFHeEMsRUFBQSxVQUFjb08sRUFBS3RDLEtBQUtFLEtBQUEsTUFBVW9DLEVBQUt0QyxLQUFLRSxLQUFPLFlBQVdvQyxFQUFLdEMsS0FBS0UsS0FBTyxLQUFjLFlBRXZGL0ksRUFBYW9MLGFBQU9ELEdBQzVCdkwsRUFBR0wsUUFBRXhDLEVBQWUsY0FFcEIsR0FBSStDLEdBQW1CUCxRQUFNbkQsTUFBT2lQLE9BQ3hDRixPQUNJLEtBQWFuTCxFQUFZdUssWUFBT1ksR0FNaEMsS0FBTSxJQUFTVCxPQUNuQixZQU5JOUssR0FBR0wsUUFBRXhDLEVBQWUsY0FFcEIsR0FBSWdELEdBQWtCUixRQUFNbkQsTUFBT2lQLE9BQ3ZDRixLSGlRRSxNQUFPL0ksR0FDTDJJLEdBQXFCLEVBQ3JCQyxFQUFrQjVJLEVBQ3BCLFFBQ0UsS0FDUzBJLEdBQThCSSxFQUFXN0ksUUFDMUM2SSxFQUFXN0ksU0FFakIsUUFDRSxHQUFJMEksRUFDQSxLQUFNQyxRQVd0QnJNLElBQUssb0JBQ0w3QixNQUFPLFdBQ0gsR0FBSXdPLElBQTZCLEVBQzdCQyxHQUFxQixFQUNyQkMsTUFBa0J2SyxFQUV0QixLR2hSQyxPQUEyQndLLEdBQTNCQyxFQUFnQnRQLEtBQVdnRixVQUFBQyxPQUFBQyxjQUFBZ0ssR0FBQUcsRUFBQUMsRUFBQW5LLFFBQUFDLE1BQUE4SixHQUFBLEdBQ3pCLElBRE1HLEVBQUEzTyxNQUNVNk8sU0FDVCxPQUNWLEdIcVJFLE1BQU92SixHQUNMbUosR0FBcUIsRUFDckJDLEVBQWtCcEosRUFDcEIsUUFDRSxLQUNTa0osR0FBOEJJLEVBQVdySixRQUMxQ3FKLEVBQVdySixTQUVqQixRQUNFLEdBQUlrSixFQUNBLEtBQU1DLElHN1JoQixPQUNWLEtId1NJN00sSUFBSyxhQUNMN0IsTUFBTyxXR25TSFYsS0FBVXFFLFVBQ2xCbUwsV0hzU0lqTixJQUFLLFdBQ0w3QixNQUFPLFNHclNtQjJFLEdIc1N0QixHQUFJb0ssR0FBU3pQLElHclNkLE9BQUtBLE1BQVl3SSxpQkFBNkIzRCxJQUFyQjdFLEtBQU91TSxPQUNqQjVFLFFBQVFDLFFBQUs1SCxLQUMvQnVNLFNBQ0EvSSxFQUFHTCxRQUFrQnhDLEVBQUEsZUFDZmdILFFBQWdCQyxRQUFLNUgsS0FBVzZKLFdBQUs3SixLQUFRcUYsSUFBSzBCLEtBQUMsU0FBYzJJLEdBRzdELE1BRk5sTSxHQUFHTCxRQUFHeEMsRUFBQSxnQkFBeUIrTyxHQUMzQkQsRUFBT2xELE9BQVNtRCxFQUV4QkEsUUgwU0FuTixJQUFLLG1CQUNMN0IsTUFBTyxTR3hTMkIyRSxFQUFhc0ssR0h5UzNDLEdBQUlDLEdBQVM1UCxJR3hTWCxPQUFBQSxNQUFvQjZQLGVBQU14SyxHQUFLMEIsS0FBQyxTQUFnQndCLEdBQzVDLE1BQUtxSCxHQUFhRSxhQUFJSCxFQUNoQ3BILFFINlNBaEcsSUFBSyxlQUNMN0IsTUFBTyxTRzNTcUJpUCxFQUFpQnBILEdBQ3ZDLFVBQVlaLFNBQUMsU0FBUUMsRUFBUW1JLEdBQ0EsZ0JBQWJ4SCxLQUNYb0gsSUFBVyxLQUFLdkksS0FBS3VJLEdBQU0sSUFBTyxLQUFhLFdBQXFCSyxtQkFDM0V6SCxJQUNHb0gsSUFBVyxLQUFLdkksS0FBS3VJLEdBQU0sSUFBTyxNQUFJLEdBQVduRixPQUFXQyxTQUUvRCxJQUFPd0YsR0FBbUIsR0FBcUJDLGVBQzVDRCxHQUFLRSxLQUFNLE1BQUtSLEdBQVEsR0FDeEJNLEVBQW1CRyxtQkFBRyxXQUNsQixHQUFJSCxFQUFXSSxZQUFrQkgsZUFBTUksS0FHdkMsTUFBbUIsTUFBZkwsRUFBT00sV0FDSDNJLEdBQUlxSSxFQUFTTyxTQUFVQyxhQUc1QlYsR0FBSUUsRUFDZE8sV0FDR1AsRUFBUVMsUUFBRyxXQUNKWCxFQUNWLFlBQ0dFLEVBQWFVLGFBQVUsT0FDdkJWLEVBQ1BXLFlINlNBck8sSUFBSyxpQkFDTDdCLE1BQU8sU0czUzBCMkUsR0g0UzdCLEdBQUl3TCxHQUFTN1EsS0czU051SSxFQUFPdkksS0FBVW1FLFFBQ3pCLE9BQTRCLGdCQUFib0UsR0FDQVosUUFBUUMsWUFDMUIvQyxJQUNNOEMsUUFBZ0JDLFFBQVNXLEdBQ3RCeEIsS0FBSy9HLEtBQWFrSCxhQUNsQkgsS0FBQSxTQUFBd0IsR0FBUSxNQUFRc0ksR0FBaUJ0SixpQkFBS2xDLEVBQUtvSCxLQUFXbEUsS0FDdER4QixLQUFLL0csS0FDbEJzSSxzQkg4U0kvRixJQUFLLFFBQ0xwQixJQUFLLFdHOVFDLE1BQUtuQixNQUNmeUksVUhpUklsRyxJQUFLLE9BQ0xwQixJQUFLLFdHL1FDLE1BQUtuQixNQUNmMkksU0hrUklwRyxJQUFLLE9BQ0xwQixJQUFLLFdHaFJDLE1BQUtuQixNQUNmK0ksU0htUkl4RyxJQUFLLFdBQ0xwQixJQUFLLFdHalJDLE1BQUtuQixNQUNmaUosYUhvUkkxRyxJQUFLLFNBQ0xwQixJQUFLLFdHbFJDLE1BQUtuQixNQUNmbUosV0hxUkk1RyxJQUFLLFdBQ0xwQixJQUFLLFdHblJDLE1BQUtuQixNQUNmeUosYUhzUklsSCxJQUFLLFFBQ0xwQixJQUFLLFdHcFJDLE1BQUtuQixNQUNma0UsVUh1UkkzQixJQUFLLFdBQ0xwQixJQUFLLFdHclJDLE1BQUtuQixNQUNmZ0ssYUh3Ukl6SCxJQUFLLFlBQ0xwQixJQUFLLFdHdFJDLE1BQUtuQixNQUNma0wsY0h5UkkzSSxJQUFLLFFBQ0xwQixJQUFLLFdHdlJDLE1BQUtuQixNQUNmNkksVUgwUkl0RyxJQUFLLFlBQ0xwQixJQUFLLFdHeFJDLE1BQUtuQixNQUNmZ0UsY0gyUkl6QixJQUFLLFVBQ0xwQixJQUFLLFdHeFJDLE1BQUtuQixNQUNmaUUsVUgwUklmLElBQUssU0d4UmlCeEMsR0FDbEJWLEtBQVNpRSxTQUNqQnZELEtIMFJJNkIsSUFBSyxlQUNMcEIsSUFBSyxXR3hSQyxNQUFLbkIsTUFDZm1LLGlCSDJSSTVILElBQUssU0FDTHBCLElBQUssV0d6UkMsTUFBS25CLE1BQ2ZxSyxhSDRSSTlILElBQUssY0FDTDdCLE1BQU8sU0dwbUI4QjJFLEdBQy9CLE1BQUtBLEdBQVl5TCxZQUFLbFEsT0FBS3lDLEVBQVN3SixVQUFLak0sTUFBUXlFLFlBQVloQyxHQUN2RXdKLGFING1CSXRLLElBQUssZUFDTDdCLE1BQU8sU0d0bUIrQjJFLEdBQ2hDLE1BQUtBLEdBQVl5TCxZQUFLbFEsT0FBS3dDLEVBQVVELFFBQUt2QyxNQUFReUUsWUFBWWpDLEdBQ3hFRCxZSHltQk9TLElHMVNYaEUsR0FBQXVELFFBQXdCUyxHSGlUbEIsU0FBVS9ELEVBQVFELEVBQVNNLEdBRWpDLFlBS0EsU0FBUzBCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUk5QixHQUFJLEVBQUdBLEVBQUk4QixFQUFNQyxPQUFRL0IsSUFBSyxDQUFFLEdBQUlnQyxHQUFhRixFQUFNOUIsRUFBSWdDLEdBQVduQixXQUFhbUIsRUFBV25CLGFBQWMsRUFBT21CLEVBQVdwQixjQUFlLEVBQVUsU0FBV29CLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXZCLE9BQU9DLGVBQWVrQixFQUFRRyxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVQLEVBQWFVLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUCxFQUFpQkgsRUFBWU4sVUFBV2dCLEdBQWlCQyxHQUFhUixFQUFpQkgsRUFBYVcsR0FBcUJYLEtBSWhpQmYsUUFBT0MsZUFBZXBCLEVBQVMsY0FBZ0JjLE9BQU8sR0kxMEJ0RCxJQUFBcVEsR0FBQTdRLEVBQWtDLEdBSWxDOFEsRUFBQTlRLEVBQTRFLEdKODBCeEUrUSxFQUFrQixXSXQwQnRCLFFBQUFBLEtKdzBCUXJQLEVBQWdCNUIsS0FBTWlSLEdJbjBCbEJqUixLQUFNeUksT0FBYSxFQUNuQnpJLEtBQU9xSyxRQUEwQjRHLEVBQWVDLGNBQ2hEbFIsS0FBT21SLFFBQWlCQyxPQUFTQyxTQUFVQyxTQUMzQ3RSLEtBQUsySSxNQUFlLFFBQ3BCM0ksS0FBTTZJLFFBQWlCLEVBQ3ZCN0ksS0FBSytJLE9BQWlCLEVBQ3RCL0ksS0FBU2lKLFdBQWlCLEVBQzFCakosS0FBT21KLFdBR1BuSixLQUFTeUosVUFBYSxFQUN0QnpKLEtBQU1rRSxRQUFlLEVBQUssR0FFMUJsRSxLQUFRbUUsVUFBMkIsRUFFbkNuRSxLQUFXd0ksYUFBaUIsRUFDNUJ4SSxLQUFhbUssaUJBQ2JuSyxLQUFRdVIsVUFBa0IsRUo4b0NsQyxNQXBVQXZQLEdBQWFpUCxJQUNUMU8sSUFBSyxTQUNMN0IsTUFBTyxTSXAwQmlCMkosR0FFbEIsTUFERnJLLE1BQVFxSyxRQUFVQSxFQUUxQnJLLFFKNDBCSXVDLElBQUssU0FDTDdCLE1BQU8sU0l0MEJpQnlRLEdBRWxCLE1BREZuUixNQUFRbVIsUUFBVUEsRUFFMUJuUixRSjgwQkl1QyxJQUFLLGNBQ0w3QixNQUFPLFNJeDBCZ0M4USxHQUVqQyxNQURGeFIsTUFBY21LLGNBQUtyRSxLQUFPL0UsT0FBT2tKLE9BQUMsR0FBSStHLEdBQXlCN04sUUFBZ0JxTyxJQUV2RnhSLFFKZzFCSXVDLElBQUssUUFDTDdCLE1BQU8sU0kxMEJlK0gsR0FFaEIsTUFERnpJLE1BQU95SSxPQUFTQSxFQUV4QnpJLFFKMjFCSXVDLElBQUssT0FDTDdCLE1BQU8sU0kzMEJjcUksR0FFZixNQURGL0ksTUFBTStJLE1BQVFBLEVBRXRCL0ksUUptMUJJdUMsSUFBSyxXQUNMN0IsTUFBTyxTSTcwQnNCdUksR0FFdkIsTUFERmpKLE1BQVVpSixVQUFZQSxFQUU5QmpKLFFKdzFCSXVDLElBQUssU0FDTDdCLE1BQU8sU0kvMEJtQnlJLEdBRXBCLE1BREZuSixNQUFRbUosUUFBVUEsRUFFMUJuSixRSncxQkl1QyxJQUFLLFNBQ0w3QixNQUFPLFNJajFCaUIySSxHSmsxQnBCLEdJbDFCK0JvSSxHQUFBQyxVQUFBdFAsT0FBQSxPQUFBeUMsS0FBQTZNLFVBQUEsR0FBQUEsVUFBQSxHQUFVLE9BR3ZDLE9BRkYxUixNQUFRcUosUUFBVUEsRUFDbEJySixLQUFpQnVKLGlCQUFha0ksRUFFdEN6UixRSjIxQkl1QyxJQUFLLFdBQ0w3QixNQUFPLFNJcjFCcUIrSSxHQUV0QixNQURGekosTUFBVXlKLFVBQU9rSSxLQUFJQyxJQUFLRCxLQUFJRSxJQUFTcEksRUFBSSxHQUFLLEdBRXhEekosUUo2MUJJdUMsSUFBSyxRQUNMN0IsTUFBTyxTSXYxQmlCd0QsR0FFbEIsTUFERmxFLE1BQU9rRSxPQUFTQSxFQUV4QmxFLFFKKzFCSXVDLElBQUssVUFDTDdCLE1BQU8sU0l6MUI2QnlELEdBRTlCLE1BREZuRSxNQUFTbUUsU0FBV0EsRUFFNUJuRSxRSmkyQkl1QyxJQUFLLFdBQ0w3QixNQUFPLFNJMzFCcUJvUixHQUl0QixNQUhGOVIsTUFBVzZKLFdBQUcsU0FBbUJrSSxFQUFnQjFNLEdBQzNDLE1BQVMwTSxHQUFpQkMsaUJBQUszTSxFQUN6Q3lNLElBRUo5UixRSm0yQkl1QyxJQUFLLFlBQ0w3QixNQUFPLFNJNzFCeUJtSixHQU0xQixNQUxGN0osTUFBVzZKLFdBQUcsU0FBbUJrSSxFQUFnQjFNLEdBQzNDLFVBQVlzQyxTQUFDLFNBQVFDLEdBQ2RpQyxFQUFRakMsRUFDckJ2QyxNQUdSckYsUUpxMkJJdUMsSUFBSyxXQUNMN0IsTUFBTyxTSS8xQjZCc0osR0FFOUIsTUFERmhLLE1BQVVnSyxVQUFZQSxFQUU5QmhLLFFKdTJCSXVDLElBQUssYUFDTDdCLE1BQU8sU0lqMkIwQjhILEdBRTNCLE1BREZ4SSxNQUFZd0ksWUFBY0EsRUFFbEN4SSxRSnkyQkl1QyxJQUFLLFFBQ0w3QixNQUFPLFNJbjJCZ0JtSSxHQUVqQixNQURGN0ksTUFBTzZJLE9BQVNBLEVBRXhCN0ksUUoyMkJJdUMsSUFBSyxRQUNMN0IsTUFBTyxTSXIyQmdCdVIsR0FFakIsTUFERmpTLE1BQVN1UixTQUFTVSxFQUUxQmpTLFFKdTJCSXVDLElBQUssUUFDTDdCLE1BQU8sV0lyeEJELE1BQUMsSUFBSXFRLEdBQVE1TixRQUN2Qm5ELFNKd3hCSXVDLElBQUssV0FDTHBCLElBQUssV0kxMkJDLE1BQUtuQixNQUNmeUksVUo2MkJJbEcsSUFBSyxVQUNMcEIsSUFBSyxXSTMyQkMsTUFBS25CLE1BQ2YySSxTSjgyQklwRyxJQUFLLFVBQ0xwQixJQUFLLFdJNTJCQyxNQUFLbkIsTUFDZitJLFNKKzJCSXhHLElBQUssY0FDTHBCLElBQUssV0k3MkJDLE1BQUtuQixNQUNmaUosYUpnM0JJMUcsSUFBSyxZQUNMcEIsSUFBSyxXSTkyQkMsTUFBS25CLE1BQ2ZtSixXSmkzQkk1RyxJQUFLLFlBQ0xwQixJQUFLLFdJLzJCQyxNQUFLbkIsTUFDZnFKLFdKazNCSTlHLElBQUsscUJBQ0xwQixJQUFLLFdJaDNCQyxNQUFLbkIsTUFDZnVKLG9CSm0zQkloSCxJQUFLLGNBQ0xwQixJQUFLLFdJajNCQyxNQUFLbkIsTUFDZnlKLGFKbzNCSWxILElBQUssV0FDTHBCLElBQUssV0lsM0JDLE1BQUtuQixNQUNma0UsVUpxM0JJM0IsSUFBSyxjQUNMcEIsSUFBSyxXSW4zQkMsTUFBS25CLE1BQ2ZnSyxhSnMzQkl6SCxJQUFLLGFBQ0xwQixJQUFLLFdJcDNCQyxNQUFLbkIsTUFDZm1FLFlKdTNCSTVCLElBQUssZUFDTHBCLElBQUssV0lyM0JDLE1BQUtuQixNQUNmNkosY0p3M0JJdEgsSUFBSyxnQkFDTHBCLElBQUssV0l0M0JDLE1BQUtuQixNQUNmd0ksZUp5M0JJakcsSUFBSyxXQUNMcEIsSUFBSyxXSXYzQkMsTUFBS25CLE1BQ2Y2SSxVSjAzQkl0RyxJQUFLLGFBQ0xwQixJQUFLLFdJeDNCQyxNQUFLbkIsTUFDZnVSLFlKMjNCSWhQLElBQUssa0JBQ0xwQixJQUFLLFdJejNCQyxNQUFLbkIsTUFDZm1LLGlCSjQzQkk1SCxJQUFLLFlBQ0xwQixJQUFLLFdJMTNCTCxHQUFVK1EsR0FBWWxTLEtBQVNxSyxPQUk1QixJQUhnQixNQUFUNkgsSUFDQUEsRUFBa0JqQixFQUM1QkMsZUFDOEIsZ0JBQWJnQixHQUFlLENBQzVCLEdBQVVDLEdBQU9uUyxLQUFTbVIsT0FDdkIsSUFBMkIsZ0JBQWJnQixHQUFlLENBQzVCLEdBQVliLEdBQVNGLE9BQVNDLFNBQVVDLFFBQ2xDYSxHQUFXYixFQUFVckYsVUFBRSxFQUFVcUYsRUFBT2xQLE9BQ2xELEdBQ004UCxFQUFTQSxFQUNuQkMsR0FDTSxNQUFPRCxHQUFTbEcsU0FBSyxLQUFTa0csRUFBVWpHLFVBQUUsRUFBUWlHLEVBQU85UCxPQUFLLEdBQ3hFOFAsTUo4M0JPakIsSUlucUNPQSxHQUFjbUIsZUFBSSxRQUNsQm5CLEVBQVVyRSxXQUFrQnFFLEVBQWdCbUIsZUFDNUNuQixFQUFhQyxlQUFRbUIsS0FBMkIsMEJBQU9DLE1BQXdCLHNCQTBTakcxUyxFQUFBdUQsUUFBK0I4TixHSmk0QnpCLFNBQVVwUixFQUFRRCxFQUFTTSxHQUVqQyxZQUtBLFNBQVMwQixHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJOUIsR0FBSSxFQUFHQSxFQUFJOEIsRUFBTUMsT0FBUS9CLElBQUssQ0FBRSxHQUFJZ0MsR0FBYUYsRUFBTTlCLEVBQUlnQyxHQUFXbkIsV0FBYW1CLEVBQVduQixhQUFjLEVBQU9tQixFQUFXcEIsY0FBZSxFQUFVLFNBQVdvQixLQUFZQSxFQUFXQyxVQUFXLEdBQU12QixPQUFPQyxlQUFla0IsRUFBUUcsRUFBV0UsSUFBS0YsSUFBaUIsTUFBTyxVQUFVUCxFQUFhVSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVAsRUFBaUJILEVBQVlOLFVBQVdnQixHQUFpQkMsR0FBYVIsRUFBaUJILEVBQWFXLEdBQXFCWCxLQUloaUJmLFFBQU9DLGVBQWVwQixFQUFTLGNBQWdCYyxPQUFPLEdBS3RELElBQUk2UixHQUFXLFdLeHJDWCxRQUFBQSxHQUFzQjlGLEdMMHJDbEI3SyxFQUFnQjVCLEtBQU11UyxHS3JzQ2hCdlMsS0FBTXlJLE9BQWEsRUFLbkJ6SSxLQUFTd1MsVUFBYSxFQUN0QnhTLEtBQVV5UyxZQUFrQixFQUM1QnpTLEtBQVMwUyxXQUFrQixFQUs3QjFTLEtBQU0yUyxNQUFRbEcsRUFDZHpNLEtBQVk0UyxZQUFHLEdBQ3ZCcEksTUwyeENBLE1BMUZBeEksR0FBYXVRLElBQ1RoUSxJQUFLLE9BQ0xwQixJQUFLLFdLaHNDQyxNQUFLbkIsTUFDZjJTLE9Ma3NDSXpQLElBQUssU0toc0NpQnVKLEdBQ2xCek0sS0FBTTJTLE1BQ2RsRyxLTGtzQ0lsSyxJQUFLLFFBQ0xwQixJQUFLLFdLaHNDQyxNQUFLbkIsTUFDZnlJLFFMa3NDSXZGLElBQUssU0toc0NjeEMsR0FDZlYsS0FBT3lJLE9BQ2YvSCxLTGtzQ0k2QixJQUFLLGFBQ0xwQixJQUFLLFdLaHNDQyxNQUFLbkIsTUFDZjRTLGFMa3NDSTFQLElBQUssU0toc0NpQnhDLEdBQ2xCVixLQUFZNFMsWUFDcEJsUyxLTGtzQ0k2QixJQUFLLFlBQ0xwQixJQUFLLFdLaHNDQyxNQUFLbkIsTUFDZjZTLFlMa3NDSTNQLElBQUssU0toc0NnQnhDLEdBQ2pCVixLQUFXNlMsV0FDbkJuUyxLTGtzQ0k2QixJQUFLLFVBQ0xwQixJQUFLLFdLaHNDQyxNQUFLbkIsTUFDZjhTLFVMa3NDSTVQLElBQUssU0toc0NjeEMsR0FDZlYsS0FBUzhTLFNBQ2pCcFMsS0xrc0NJNkIsSUFBSyxZQUNMcEIsSUFBSyxXS2hzQ0MsTUFBS25CLE1BQ2Z5UyxZTGtzQ0l2UCxJQUFLLFNLaHNDbUJ4QyxHQUNwQlYsS0FBV3lTLFdBQ25CL1IsS0xrc0NJNkIsSUFBSyxXQUNMcEIsSUFBSyxXS2hzQ0MsTUFBS25CLE1BQ2Z3UyxXTGtzQ0l0UCxJQUFLLFNLaHNDaUJ4QyxHQUNsQlYsS0FBVXdTLFVBQU9iLEtBQUlFLElBQUtGLEtBQUlDLElBQUUsRUFBUWxSLEdBQ2hELFFMa3NDSTZCLElBQUssU0FDTHBCLElBQUssV0svckNDLE1BQUtuQixNQUNmK1MsU0xpc0NJN1AsSUFBSyxTSy9yQ094QyxHQUNSVixLQUFRK1MsUUFDaEJyUyxLTGlzQ0k2QixJQUFLLFFBQ0xwQixJQUFLLFdLL3JDQyxNQUFLbkIsTUFDZmdULFFMaXNDSTlQLElBQUssU0svckNNeEMsR0FDUFYsS0FBT2dULE9BQ2Z0UyxLTGlzQ0k2QixJQUFLLE1BQ0xwQixJQUFLLFdLOXJDQyxNQUFLbkIsTUFDZmlULE1MZ3NDSS9QLElBQUssU0s5ckNZeEMsR0FDYlYsS0FBS2lULEtBQ2J2UyxLTGdzQ0k2QixJQUFLLFdBQ0xwQixJQUFLLFdLOXJDQyxNQUFLbkIsTUFDZjBTLFdMZ3NDSXhQLElBQUssU0s5ckNrQnhDLEdBQ25CVixLQUFVMFMsVUFDbEJoUyxNTGlzQ082UixJSzlyQ1gzUyxHQUFBdUQsUUFBd0JvUCxHTHFzQ2xCLFNBQVUxUyxFQUFRRCxFQUFTTSxHQUVqQyxZQUdBYSxRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT0FBTyxHTTF6Q3RELElBQUFxUSxHQUFBN1EsRUFBeUMsRUFFaENOLEdBQUFnRSxTQUZGbU4sRUFFVTVOLE9BRGpCLElBQUFJLEdBQUFyRCxFQUF1RCxFQUNwQ04sR0FBQXFSLGdCQURaMU4sRUFDMkJKLFNOZzBDNUIsU0FBVXRELEVBQVFELEVBQVNNLEdBRWpDLFlBS0EsU0FBUzBCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUk5QixHQUFJLEVBQUdBLEVBQUk4QixFQUFNQyxPQUFRL0IsSUFBSyxDQUFFLEdBQUlnQyxHQUFhRixFQUFNOUIsRUFBSWdDLEdBQVduQixXQUFhbUIsRUFBV25CLGFBQWMsRUFBT21CLEVBQVdwQixjQUFlLEVBQVUsU0FBV29CLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXZCLE9BQU9DLGVBQWVrQixFQUFRRyxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVQLEVBQWFVLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUCxFQUFpQkgsRUFBWU4sVUFBV2dCLEdBQWlCQyxHQUFhUixFQUFpQkgsRUFBYVcsR0FBcUJYLEtBSWhpQmYsUUFBT0MsZUFBZXBCLEVBQVMsY0FBZ0JjLE9PejBDL0MsR1AyMENBLElPejBDV3dTLEdBQUEsV1AwMENQLFFBQVNBLEtBQ0x0UixFQUFnQjVCLEtBQU1rVCxHQStCMUIsTUE1QkFsUixHQUFha1IsSUFDVDNRLElBQUssVUFDTDdCLE1BQU8sU09oMUNjc0UsT1BrMUNyQnpDLElBQUssVUFDTDdCLE1BQU8sU09oMUNjc0UsT1BrMUNyQnpDLElBQUssaUJBQ0w3QixNQUFPLFNPaDFDYzJFLE9QazFDckI5QyxJQUFLLGVBQ0w3QixNQUFPLFNPaDFDWTJFLEdBQ2IsTUFDVixTUGsxQ0k5QyxJQUFLLGFBQ0w3QixNQUFPLFNPajFDVTJFLE9QbTFDakI5QyxJQUFLLGdCQUNMN0IsTUFBTyxTT2oxQ2EyRSxPUG0xQ3BCOUMsSUFBSyxjQUNMN0IsTUFBTyxTT2oxQ1cyRSxPUG0xQ2xCOUMsSUFBSyxXQUNMN0IsTUFBTyxTT2oxQ2VzRSxRUG8xQ25Ca08sSU9oMUNYdFQsR0FBQXVELFFBQXFDK1AsR1B1MUMvQixTQUFVclQsRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FJaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT1EzM0MvQyxHUjYzQ0EsSVEzM0NleVMsR0FBQSxXUjQzQ1gsUUFBU0EsS0FDTHZSLEVBQWdCNUIsS0FBTW1ULEdBZTFCLE1BWkFuUixHQUFhbVIsSUFDVDVRLElBQUssY0FDTDdCLE1BQU8sU1FsNENlMkUsR0FDaEIsT0FDVixLUm80Q0k5QyxJQUFLLGNBQ0w3QixNQUFPLFNRbjRDZTJFLEdBQ2hCLE9BQ1YsTVJzNENPOE4sSVFsNENYdlQsR0FBQXVELFFBQXVDZ1EsR1J5NENqQyxTQUFVdFQsRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FJaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT0FBTyxHUzk1Q3RELElBQUE4QyxHQUFBdEQsRUFBaUMsR1RvNkM3QmtULEVBQXFCLFdTMzVDckIsUUFBQUEsR0FBOEJyQixHVDY1QzFCblEsRUFBZ0I1QixLQUFNb1QsR1M1NUNsQnBULEtBQVMrUixTQUNqQkEsRVQwb0RBLE1BMU9BL1AsR0FBYW9SLElBQ1Q3USxJQUFLLE9BQ0w3QixNQUFPLFNTaDZDWXFSLEdBQ2YvUixLQUFTK1IsU0FDakJBLEtUazZDSXhQLElBQUssU0FDTDdCLE1BQU8sU1NqNkNXMkUsR1RrNkNkLEdBQUl1SSxHQUFRNU4sSVNqNkNaQSxNQUFLcUYsS0FBUUEsRUFFYnJGLEtBQVMrUixTQUFTc0IsU0FBTWhPLEdBQUswQixLQUFDLFNBQWMySSxHQUN4Q3JLLEVBQVVpTyxVQUFHLEdBQVc5SSxNQUN4Qm9ELEVBQVkyRixZQUNwQjdELFFUcTZDQW5OLElBQUssY0FDTDdCLE1BQU8sU1NuNkNzQmdQLEdUbzZDekIsR0FBSTVMLEdBQVM5RCxJU242Q2pCd0QsR0FBR0wsUUFBY3hDLEVBQUEsVUFDakIsSUFBUzZTLEdBQXdCN0wsUUFBV0MsU0FDNUNwRSxHQUFHTCxRQUFHeEMsRUFBQSxJQUFRWCxLQUFLcUYsS0FBT29PLE9BQWdCclIsT0FBQSxTQUMxQ29CLEVBQUdMLFFBQUd4QyxFQUFBLElBQVFYLEtBQUtxRixLQUEwQnFPLGdCQUFBLFVBRXpDMVQsS0FBS3FGLEtBQU9vTyxPQUFRRSxRQUFDLFNBQU1DLEVBQVlDLEdBQ2xDRCxFQUFPRSxPQUFRSCxRQUFDLFNBQU1qSCxFQUFZcUgsR0FDOUJQLElBQWF6TSxLQUFDLFdBRVQsTUFETnZELEdBQUdMLFFBQVd4QyxFQUFBLFNBQVdrVCxFQUFXLFVBQVdFLEVBQVUsUUFDOUNqUSxFQUFZa1EsWUFBTXRILEVBQ2pDZ0QsU0FLSDhELEVBQUt6TSxLQUFDLFdBQ0QsTUFBS2pELEdBQWFtUSxhQUM1QnZFLEtBQU8zSSxLQUFDLFdBRUlqRCxFQUFTaU8sU0FBcUJtQyxzQkFDbEMxUSxFQUFHTCxRQUFnQnhDLEVBQUEsYUFHZm1ELEVBQVNpTyxTQUFRdkQsU0FBUyxFQUcxQjFLLEVBQVNpTyxTQUFTbkwsU0FBU3VOLFNBQUtyUSxFQUFTaU8sU0FDakQvTSxjQUNJb1AsTUFBQyxTQUFTNUQsR0FDZGhOLEVBQUdMLFFBQUcrQyxFQUFPcEMsRUFBS3VCLEtBQUtvSCxLQUFlN0wsS0FBQSxVQUNsQ2tELEVBQUt1QixLQUFNdEMsTUFBWXlOLEVBQ3ZCMU0sRUFBS3VCLEtBQVVnUCxXQUFTLEVBQ3hCdlEsRUFBS3VCLEtBQVNrSyxVQUFRLEVBQ3RCekwsRUFBS3VCLEtBQVFpUCxRQUFHLEdBQVc5SixNQUMzQjFHLEVBQVNpTyxTQUFTbkwsU0FBVzJOLFdBQUt6USxFQUMxQ3VCLFdUbTZDQTlDLElBQUssY0FDTDdCLE1BQU8sU1NqNkNxQmdNLEVBQWVnRCxHVGs2Q3ZDLEdBQUkzQyxHQUFTL00sSVNqNkNYLFdBQVkySCxTQUFDLFNBQVFDLEVBQVFtSSxHQUMvQixHQUF1QnlFLEdBQTBDLEdBQWxDOUgsRUFBTWtILE1BQU9FLE9BQVFwTixRQUFPZ0csR0FDN0NxSCxFQUFRckgsRUFBTWtILE1BQU9FLE9BQVFwTixRQUFRZ0csR0FFdEMrSCxFQUEyQkQsRUFBTyxLQUFROUgsRUFBTWtILE1BQU9FLE9BQVdDLEVBQU0sR0FFOUVwRSxFQUE4QjZFLEVBQU96SCxFQUFrQjJILGtCQUFNaEksRUFBTWtILE1BQUtlLEtBQU1oSSxNQUFPSSxFQUFrQjZILGtCQUFNbEksRUFBTXpGLE1BQVd3TixFQUFZQSxFQUFJL0csSUFBTyxLQUFXK0csRUFBWUEsRUFBS0ksS0FBUyxNQUUxTDVFLEVBQW1CLEdBQXFCQyxlQUM1Q0QsR0FBS0UsS0FBTyxPQUFLUixJQUFXLEtBQUt2SSxLQUFLdUksR0FBTSxJQUFPLE1BQUksR0FBV25GLE9BQVVDLFdBQVEsR0FDcEZ3RixFQUFpQjZFLGlCQUFlLGVBQThCLDRCQUM5RDdFLEVBQWlCNkUsaUJBQWtCLDJCQUFvQnBGLEdBR3ZETyxFQUFPaEIsT0FBVzhGLFdBQUcsU0FBaUJDLEdBQ2xDLEdBQUVBLEVBQWtCQyxpQkFBRSxDQUNyQixHQUFZQyxHQUFPdkQsS0FBTXdELE9BQU9wSSxFQUFLMUgsS0FBbUIrUCxtQkFBUTFJLEVBQU16RixNQUFJK04sRUFBUUssUUFBT3RJLEVBQUsxSCxLQUFLb0gsS0FBTUUsS0FBUSxJQUN6R0ksR0FBSzFILEtBQVM2UCxTQUFZQSxJQUMxQm5JLEVBQUsxSCxLQUFTNlAsU0FBWUEsRUFDMUJuSSxFQUFTZ0YsU0FBU25MLFNBQWUwTyxlQUFLdkksRUFDOUMxSCxTQUtMNEssRUFBT2hCLE9BQU8vRyxPQUFHLFdBQ2hCLEdBQVlnTixHQUFPdkQsS0FBTXdELE9BQU9wSSxFQUFLMUgsS0FBbUIrUCxtQkFBUTFJLEVBQU16RixNQUFReUYsRUFBS2lJLEtBQU1oSSxNQUFPSSxFQUFLMUgsS0FBS29ILEtBQU1FLEtBQVEsSUFDaEhJLEdBQUsxSCxLQUFTNlAsU0FBWUEsSUFDMUJuSSxFQUFLMUgsS0FBUzZQLFNBQVlBLEVBQzFCbkksRUFBU2dGLFNBQVNuTCxTQUFlME8sZUFBS3ZJLEVBQzlDMUgsUUFJRDRLLEVBQW1CRyxtQkFBRyxXQUNsQixHQUFJSCxFQUFXSSxZQUFrQkgsZUFBTUksS0FDbkMsR0FBa0IsS0FBZEwsRUFBT00sUUFBa0MsSUFBcEJOLEVBQWFzRixhQUFTLENBQzlDLEdBQVVDLEdBQVlDLEtBQU1DLE1BQUl6RixFQUFlc0YsYUFDMUM3SSxHQUFTNkMsVUFBUSxFQUNqQjdDLEVBQVdpSixZQUFTLEVBQ3BCakosRUFBSWdCLElBQVM4SCxFQUFLOUgsSUFDbEJoQixFQUFLbUksS0FBU1csRUFBTVgsSUFDekIsSUFBY2UsR0FBZ0JsSixFQUFNa0gsTUFBT0UsT0FBUXBOLFFBQVFnRyxHQUNoQ21KLEVBQXNCRCxHQUFTbEosRUFBTWtILE1BQU9FLE9BQU8xUixPQUFLLENBQ3REeVQsS0FDcEJuSixFQUFNa0gsTUFBU3JFLFVBQVEsRUFDdkI3QyxFQUFNa0gsTUFBVytCLFlBQzFCLEdBRUovTixRQUVVbUksR0FBSUUsRUFDZE8sV0FJTFAsRUFBS1csS0FBTWxFLEVBQ2xCaUksV1QrNUNBcFMsSUFBSyxlQUNMN0IsTUFBTyxTUzU1Q3VCZ1AsR1Q2NUMxQixHQUFJRCxHQUFTelAsSVM1NUNYLFdBQVkySCxTQUFDLFNBQVFDLEVBQVFtSSxHQUMvQixHQUFjK0YsR0FBWXJHLEVBQUtwSyxLQUFJOUMsSUFBT3dULEtBQUt0RyxFQUFLcEssS0FBSzlDLEtBQVEsSUFFbER1VCxLQUNEQSxFQUFhQSxFQUFRek8sUUFBTSxNQUFPLEtBQ2xDeU8sRUFBYUEsRUFBUXpPLFFBQU0sTUFDekMsS0FDQSxJQUFPc0ksR0FBT0YsRUFBZXVHLGVBQUt2RyxFQUFLcEssS0FBS29ILEtBQUtFLEtBQWNtSixHQUU5Q0csRUFBTSxHVCs1Q2Z2UixHQUE0QixFQUM1QkMsR0FBb0IsRUFDcEJDLE1BQWlCQyxFQUVyQixLU2o2Q0MsT0FBOEJDLEdBQTlCQyxFQUFpQjBLLEVBQUtwSyxLQUFRb08sT0FBQXhPLE9BQUFDLGNBQUFSLEdBQUFJLEVBQUFDLEVBQUFJLFFBQUFDLE1BQUFWLEdBQUEsR0FBRSxHQUF2QmtQLEdBQUE5TyxFQUFBcEUsS0FFR3VWLElBRFFyQyxFQUFPRSxPQUFNRixFQUFPRSxPQUFPMVIsT0FBTSxHQUN4QnNMLElBQ2xDLEtUcTZDTSxNQUFPMUgsR0FDTHJCLEdBQW9CLEVBQ3BCQyxFQUFpQm9CLEVBQ25CLFFBQ0UsS0FDU3RCLEdBQTZCSyxFQUFVa0IsUUFDeENsQixFQUFVa0IsU0FFaEIsUUFDRSxHQUFJdEIsRUFDQSxLQUFNQyxJUzc2Q0xxUixFQUFTakssU0FBTSxPQUNmaUssRUFBZ0JBLEVBQVVoSyxVQUFFLEVBQWVnSyxFQUFPN1QsT0FDbkUsR0FFQSxJQUFPNk4sR0FBbUIsR0FBcUJDLGVBQzVDRCxHQUFLRSxLQUFPLE9BQUtSLElBQVcsS0FBS3ZJLEtBQUt1SSxHQUFNLElBQU8sTUFBSSxHQUFXbkYsT0FBVUMsV0FBUSxHQUNwRndGLEVBQWlCNkUsaUJBQWUsZUFBZ0IsY0FDaEQ3RSxFQUFpQjZFLGlCQUFrQiwyQkFBb0JwRixHQUN2RE8sRUFBbUJHLG1CQUFHLFdBQ2xCLEdBQUlILEVBQVdJLFlBQWtCSCxlQUFNSSxLQUVuQyxHQURDYixFQUFLcEssS0FBU2tLLFVBQVEsRUFDTCxLQUFkVSxFQUFPTSxRQUFrQyxJQUFwQk4sRUFBYXNGLGFBQVMsQ0FDOUMsR0FBVUMsR0FBWUMsS0FBTUMsTUFBSXpGLEVBQWVzRixhQUMzQzlGLEdBQUtwSyxLQUFVZ1AsV0FBUSxFQUN2QjVFLEVBQUtwSyxLQUFPbVEsT0FBVUEsRUFDdEIvRixFQUFLcEssS0FBUWlQLFFBQUcsR0FBVzlKLE1BQzNCaUYsRUFBU3NDLFNBQVNuTCxTQUFjc1AsY0FBS3pHLEVBQU9wSyxNQUVwRHVDLFFBQ2E2SCxHQUFVMEcsVUFBSzFHLEVBQU9wSyxPQUMvQjdCLEVBQUdMLFFBQUcrQyxFQUFPdUosRUFBS3BLLEtBQUtvSCxLQUFzQjdMLEtBQUEsaUJBQ3pDNk8sRUFBU3NDLFNBQVNuTCxTQUFZd1AsWUFBSzNHLEVBQzNDcEssT0FFVTBLLEVBQUlFLEVBQ2RPLFdBR0xQLEVBQUtXLEtBQ1pxRixRVHc3Q0ExVCxJQUFLLG9CQUNMN0IsTUFBTyxTU2o3Q2lDMlYsR0FDakMsTUFBT3JXLE1BQVMrUixTQUFPRyxPQUFBLFVBQ2xDbUUsS1QwN0NJOVQsSUFBSyxvQkFDTDdCLE1BQU8sU1NuN0M2QnVHLEVBQWF5RyxFQUFlbUgsR0FDekQsT0FBT0EsR0FBYzdVLEtBQVMrUixTQUFPRyxRQUFBLFNBQVl4RSxFQUFBLElBQzVEekcsRUFBQSxPVDQ3Q0kxRSxJQUFLLGlCQUNMN0IsTUFBTyxTU3I3QzZCNFYsRUFBb0JSLEdBQ3JELE1BQVlBLEdBQ0c5VixLQUFTK1IsU0FBT0csT0FBQSxXQUFtQm9FLEVBQUEsUUFDckRSLEVBRWtCOVYsS0FBUytSLFNBQU9HLE9BQUEsV0FDbENvRSxLVHU3Q0EvVCxJQUFLLFlBQ0w3QixNQUFPLFNTcDdDc0IyRSxHQUUxQixNQUFLQSxHQUFNa1IsT0FBUXZXLEtBQVMrUixTQUFPd0UsT0FDbEMvUyxFQUFHTCxRQUFHK0MsRUFBT2IsRUFBS29ILEtBQUs3TCxLQUFBLFdBQWVaLEtBQVMrUixTQUFld0UsTUFBQSxVQUVsRSxJQUNJbFIsRUFBU2tSLFFBQ2IvUyxFQUFHTCxRQUFHK0MsRUFBT2IsRUFBS29ILEtBQUs3TCxLQUFBLGNBQWtCeUUsRUFBVWtSLFFBS3ZELE9UczdDT25ELElTajdDWHhULEdBQUF1RCxRQUFtQ2lRLEdUdzdDN0IsU0FBVXZULEVBQVFELEVBQVNNLEdBRWpDLFlBS0EsU0FBUzBCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUk5QixHQUFJLEVBQUdBLEVBQUk4QixFQUFNQyxPQUFRL0IsSUFBSyxDQUFFLEdBQUlnQyxHQUFhRixFQUFNOUIsRUFBSWdDLEdBQVduQixXQUFhbUIsRUFBV25CLGFBQWMsRUFBT21CLEVBQVdwQixjQUFlLEVBQVUsU0FBV29CLEtBQVlBLEVBQVdDLFVBQVcsR0FBTXZCLE9BQU9DLGVBQWVrQixFQUFRRyxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVVQLEVBQWFVLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZUCxFQUFpQkgsRUFBWU4sVUFBV2dCLEdBQWlCQyxHQUFhUixFQUFpQkgsRUFBYVcsR0FBcUJYLEtBSWhpQmYsUUFBT0MsZUFBZXBCLEVBQVMsY0FBZ0JjLE9BQU8sR1VycUR0RCxJQUFBOEMsR0FBQXRELEVBQWlDLEdWMnFEN0JzVyxFQUFzQixXVW5xRHRCLFFBQUFBLEdBQThCekUsR1ZxcUQxQm5RLEVBQWdCNUIsS0FBTXdXLEdVcHFEbEJ4VyxLQUFTK1IsU0FDakJBLEVWbXlEQSxNQXRIQS9QLEdBQWF3VSxJQUNUalUsSUFBSyxTQUNMN0IsTUFBTyxTVXpxRFkyRSxHVjBxRGYsR0FBSXVJLEdBQVE1TixJVXpxRFpBLE1BQUtxRixLQUFRQSxFQUVickYsS0FBUytSLFNBQVNzQixTQUFNaE8sR0FBSzBCLEtBQUMsU0FBYzJJLEdBQ3hDckssRUFBVWlPLFVBQUcsR0FBVzlJLE1BQ3hCb0QsRUFBVzZJLFdBQ25CL0csUVZtckRBbk4sSUFBSyxpQkFDTDdCLE1BQU8sU1UxcUR5QmdQLEdBQ2hDLEdBQVFySyxHQUFtQnJGLEtBQU1xRixLQUNyQnFSLEVBQWEsR0FBZUMsU0FZbEMsT0FUZSxRQUFidFIsRUFBSTlDLFNBQW9Dc0MsS0FBbkJRLEVBQUk5QyxLQUNyQm1VLEVBQU9FLE9BQU0sTUFBTXZSLEVBQy9COUMsS0FFUW1VLEVBQU9FLE9BQVEsUUFBU2xILEdBQ3hCZ0gsRUFBT0UsT0FBTyxPQUFNdlIsRUFBT29ILE1BRW5DakosRUFBR0wsUUFBbUJ4QyxFQUFBLGdCQUcxQitWLEtWNnFESW5VLElBQUssYUFDTDdCLE1BQU8sU1V2cURxQmdQLEdWd3FEeEIsR0FBSTVMLEdBQVM5RCxLVXZxRFRxRixFQUFtQnJGLEtBQU1xRixLQUUxQjRLLEVBQW1CLEdBQXFCQyxlQUc1Q0QsR0FBT2hCLE9BQVc4RixXQUFHLFNBQWlCQyxHQUNsQyxHQUFFQSxFQUFrQkMsaUJBQUUsQ0FDckIsR0FBWUMsR0FBT3ZELEtBQU13RCxNQUFpQixJQUFkSCxFQUFPSyxPQUFXTCxFQUFRNkIsTUFDOUN4UixHQUFTNlAsU0FBWUEsSUFDckI3UCxFQUFTNlAsU0FBWUEsRUFDckJwUixFQUFTaU8sU0FBU25MLFNBQWUwTyxlQUN6Q2pRLE1BS0w0SyxFQUFPaEIsT0FBTy9HLE9BQUcsV0FDUjdDLEVBQVM2UCxTQUFPLE1BQ2hCN1AsRUFBUzZQLFNBQU8sSUFDaEJwUixFQUFTaU8sU0FBU25MLFNBQWUwTyxlQUN6Q2pRLElBSUosSUFBT3NLLEdBQU8zUCxLQUFTK1IsU0FBUUcsTUFFNUJ2QyxLQUFXLEtBQUt2SSxLQUFLcEgsS0FBUytSLFNBQVFHLFFBQU0sSUFBTyxNQUFJLEdBQVcxSCxPQUFXQyxVQUM3RXdGLEVBQUtFLEtBQU8sT0FBS1IsR0FBUSxHQUV6Qk0sRUFBbUJHLG1CQUFHLFdBQ2RILEVBQVdJLFlBQWtCSCxlQUFNSSxPQUNqQixLQUFkTCxFQUFPTSxRQUFrQyxJQUFwQk4sRUFBYXNGLGNBQ2pDbFEsRUFBT21RLE9BQU9DLEtBQU1DLE1BQUl6RixFQUFlc0YsY0FDdkNsUSxFQUFVZ1AsV0FBUSxFQUNsQmhQLEVBQVNrSyxVQUFRLEVBQ2pCbEssRUFBUWlQLFFBQUcsR0FBVzlKLE1BQ3RCMUcsRUFBU2lPLFNBQVNuTCxTQUFjc1AsY0FDeEM3USxJQUNhdkIsRUFBVXFTLFVBQU85USxJQUMxQjdCLEVBQUdMLFFBQUcrQyxFQUFPYixFQUFLb0gsS0FBb0I3TCxLQUFBLGVBQ2xDa0QsRUFBU2lPLFNBQVNuTCxTQUFZd1AsWUFDdEMvUSxLQUVJN0IsRUFBR0wsUUFBRytDLEVBQU9iLEVBQUtvSCxLQUFhN0wsS0FBQSxRQUMzQnlFLEVBQU10QyxNQUFNa04sRUFBVU8sU0FDdEJuTCxFQUFVZ1AsV0FBUyxFQUNuQmhQLEVBQVNrSyxVQUFRLEVBQ2pCbEssRUFBUWlQLFFBQUcsR0FBVzlKLE1BQ3RCMUcsRUFBU2lPLFNBQVNuTCxTQUFXMk4sV0FDckNsUCxJQUdRdkIsRUFBU2lPLFNBQXFCbUMsc0JBRTlCcFEsRUFBU2lPLFNBQVF2RCxTQUFTLEVBRzFCMUssRUFBU2lPLFNBQVNuTCxTQUFTdU4sU0FBS3JRLEVBQVNpTyxTQUNqRC9NLGFBSVIsSUFBWTBSLEdBQWlCMVcsS0FBZThXLGVBQVFwSCxFQUNqRE8sR0FBS1csS0FBVzhGLEdBQ25CbFQsRUFBR0wsUUFBRXhDLEVBQ1QscUJWc3FESTRCLElBQUssWUFDTDdCLE1BQU8sU1UvcER1QjJFLEdBRzNCLE1BRkg3QixHQUFHTCxRQUFFeEMsRUFBVyxVQUVSMEUsRUFBTWtSLE9BQVF2VyxLQUFTK1IsU0FBT3dFLE9BQ2xDL1MsRUFBR0wsUUFBRytDLEVBQU9iLEVBQUtvSCxLQUFLN0wsS0FBQSxXQUFlWixLQUFTK1IsU0FBZXdFLE1BQUEsVUFFbEUsSUFDSWxSLEVBQVNrUixRQUNiL1MsRUFBR0wsUUFBRytDLEVBQU9iLEVBQUtvSCxLQUFLN0wsS0FBQSxjQUFrQnlFLEVBQVVrUixPQUMvQ3ZXLEtBQU9pUCxPQUFPNUosSUFFdEIsT1ZrcURPbVIsSVU5cERYNVcsR0FBQXVELFFBQW9DcVQsR1ZxcUQ5QixTQUFVM1csRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2dWLEdBQTJCQyxFQUFNelcsR0FBUSxJQUFLeVcsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPMVcsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QnlXLEVBQVB6VyxFQUVsTyxRQUFTMlcsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJclYsV0FBVSxpRUFBb0VxVixHQUFlRCxHQUFTM1YsVUFBWVQsT0FBT3NXLE9BQU9ELEdBQWNBLEVBQVc1VixXQUFhc1AsYUFBZXBRLE1BQU95VyxFQUFValcsWUFBWSxFQUFPb0IsVUFBVSxFQUFNckIsY0FBYyxLQUFlbVcsSUFBWXJXLE9BQU91VyxlQUFpQnZXLE9BQU91VyxlQUFlSCxFQUFVQyxHQUFjRCxFQUFTSSxVQUFZSCxHQU5qZSxHQUFJcFYsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FRaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT0FBTyxHV3AwRHRELElBQUE4VyxHQUFBdFgsRUFBa0MsR0FJbEIyTSxFQUFBLFNBQUE0SyxHQVlaLFFBQUE1SyxHQUFzQkosRUFBbUI0SixFQUFtQnFCLEdBQ25EOVYsRUFBQTVCLEtBQUE2TSxFWHMwREwsSUFBSWUsR0FBUW1KLEVBQTJCL1csTUFBTzZNLEVBQVUwSyxXQUFheFcsT0FBTzRXLGVBQWU5SyxJQUFZdE0sS0FBS1AsS1d0MERoR3lNLEdYODBEWixPV3oxREltQixHQUFPZ0ssV0FDUGhLLEVBQVVpSyxXQUFhLEVBQ3ZCakssRUFBVWtLLFdBQWEsRUFVdkJsSyxFQUFXaUssV0FBYXhCLEVBQ3hCekksRUFBV2tLLFdBQWFKLEVBQ3hCOUosRUFDUlEsbUJYMDBEV1IsRUFrUVgsTUF0UkFzSixHQUFVckssRUFBVzRLLEdBMkJyQnpWLEVBQWE2SyxJQUNUdEssSUFBSyxtQkFDTDdCLE1BQU8sV1c3MERIVixLQUFRNFgsVUFNUixLQUFDLEdBTE90QixHQUFldFcsS0FBTTJTLE1BQU1oRyxLQUMvQkYsRUFBYXpNLEtBQU8yUyxNQUVkb0YsRUFBT3BHLEtBQUtxRyxLQUFTMUIsRUFBT3RXLEtBQWE2WCxZQUU3Q3hYLEVBQUksRUFBR0EsRUFBYTBYLEVBQUsxWCxJQUFBLENBQy9CLEdBQVM0RyxHQUFZNUcsRUFBT0wsS0FBWTZYLFdBQ2pDSSxFQUFnQmhSLEVBQU9qSCxLQUFZNlgsV0FFakNqRSxFQUFVLEdBQVNzRSxHQUFNalIsRUFBS2dSLEVBQU14TCxFQUFNMEwsTUFBTWxSLEVBQU1nUixHQUFNalksS0FBVzhYLFdBQVFyTCxFQUVwRnpNLE1BQVE0WCxRQUFLOVIsS0FDckI4TixPWHExREFyUixJQUFLLFNBQ0xwQixJQUFLLFdXOTBEQyxNQUFLbkIsTUFDZjRYLFdYczFESXJWLElBQUssa0JBQ0xwQixJQUFLLFdBQ0QsR0FBSXVELElBQTRCLEVBQzVCQyxHQUFvQixFQUNwQkMsTUFBaUJDLEVBRXJCLEtXcjFEQyxPQUEwQkMsR0FBMUJDLEVBQWlCL0UsS0FBUzRYLFFBQUEzUyxPQUFBQyxjQUFBUixHQUFBSSxFQUFBQyxFQUFBSSxRQUFBQyxNQUFBVixHQUFBLEdBQUUsR0FBbkJrUCxHQUFBOU8sRUFBQXBFLEtBQ1AsSUFBT2tULEVBQVkrQixXQUdoQixNQUNWL0IsSVh5MURNLE1BQU81TixHQUNMckIsR0FBb0IsRUFDcEJDLEVBQWlCb0IsRUFDbkIsUUFDRSxLQUNTdEIsR0FBNkJLLEVBQVVrQixRQUN4Q2xCLEVBQVVrQixTQUVoQixRQUNFLEdBQUl0QixFQUNBLEtBQU1DLElXbDJEdEIsS0FBVzBKLE9BQ2Ysb0JYeTJESS9MLElBQUsscUJBQ0xwQixJQUFLLFdXdjJETCxHQUFRd0wsR0FBYSxFWHkyRGJ4RyxHQUE2QixFQUM3QkMsR0FBcUIsRUFDckJDLE1BQWtCeEIsRUFFdEIsS1c1MkRDLE9BQTBCeUIsR0FBMUJDLEVBQWlCdkcsS0FBUzRYLFFBQUEzUyxPQUFBQyxjQUFBaUIsR0FBQUcsRUFBQUMsRUFBQXBCLFFBQUFDLE1BQUFlLEdBQUEsR0FBRSxHQUFuQnlOLEdBQUF0TixFQUFBNUYsS0FDRmlNLElBQU1pSCxFQUFTckUsU0FBUXFFLEVBQUtlLEtBQUtoSSxLQUM3QyxHWGczRE0sTUFBTzNHLEdBQ0xJLEdBQXFCLEVBQ3JCQyxFQUFrQkwsRUFDcEIsUUFDRSxLQUNTRyxHQUE4QkksRUFBV04sUUFDMUNNLEVBQVdOLFNBRWpCLFFBQ0UsR0FBSUcsRUFDQSxLQUFNQyxJV3ozRGhCLE1BQ1ZzRyxNWGc0RElwSyxJQUFLLFNBQ0xwQixJQUFLLFdXOTNETCxHQUFTaVgsTVhnNEREOVMsR0FBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxNQUFrQlgsRUFFdEIsS1duNERDLE9BQTBCWSxHQUExQkMsRUFBaUIxRixLQUFTNFgsUUFBQTNTLE9BQUFDLGNBQUFJLEdBQUFHLEVBQUFDLEVBQUFQLFFBQUFDLE1BQUFFLEdBQUEsR0FBRSxHQUFuQnNPLEdBQUFuTyxFQUFBL0UsTVhzNERFaUwsR0FBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxNQUFrQmhILEVBRXRCLEtXejRESCxPQUEwQmlILEdBQTFCQyxFQUFrQjZILEVBQVFFLE9BQUE3TyxPQUFBQyxjQUFBeUcsR0FBQUcsRUFBQUMsRUFBQTVHLFFBQUFDLE1BQUF1RyxHQUFBLEdBQUUsR0FBbkJlLEdBQUFaLEVBQUFwTCxLQUNMMFgsR0FBS3RTLEtBQ2Q0RyxJWDY0RFUsTUFBTzFHLEdBQ0w0RixHQUFxQixFQUNyQkMsRUFBa0I3RixFQUNwQixRQUNFLEtBQ1MyRixHQUE4QkksRUFBVzlGLFFBQzFDOEYsRUFBVzlGLFNBRWpCLFFBQ0UsR0FBSTJGLEVBQ0EsS0FBTUMsTUFLeEIsTUFBTzdGLEdBQ0xULEdBQXFCLEVBQ3JCQyxFQUFrQlEsRUFDcEIsUUFDRSxLQUNTVixHQUE4QkksRUFBV08sUUFDMUNQLEVBQVdPLFNBRWpCLFFBQ0UsR0FBSVYsRUFDQSxLQUFNQyxJV3A2RGhCLE1BQ1Y0UyxNWGc3REk3VixJQUFLLGtCQUNMcEIsSUFBSyxXQUNELEdBQUlnTSxJQUE2QixFQUM3QkMsR0FBcUIsRUFDckJDLE1BQWtCeEksRUFFdEIsS1cvNkRDLE9BQTBCeUksR0FBMUJDLEVBQWlCdk4sS0FBUzRYLFFBQUEzUyxPQUFBQyxjQUFBaUksR0FBQUcsRUFBQUMsRUFBQXBJLFFBQUFDLE1BQUErSCxHQUFBLEdBQUUsR0FBbkJ5RyxHQUFBdEcsRUFBQTVNLEtBQ1AsSUFBT2tULEVBQVkrQixXQUFuQixDWHE3REssR0FBSWpILElBQTZCLEVBQzdCQyxHQUFxQixFQUNyQkMsTUFBa0IvSixFQUV0QixLV3Q3REgsT0FBMEJnSyxHQUExQkMsRUFBa0I4RSxFQUFRRSxPQUFBN08sT0FBQUMsY0FBQXdKLEdBQUFHLEVBQUFDLEVBQUEzSixRQUFBQyxNQUFBc0osR0FBQSxHQUFFLEdBQW5CaEMsR0FBQW1DLEVBQUFuTyxLQUNQLElBQU9nTSxFQUFZaUosV0FHaEIsTUFDVmpKLElYMDdEVSxNQUFPMUcsR0FDTDJJLEdBQXFCLEVBQ3JCQyxFQUFrQjVJLEVBQ3BCLFFBQ0UsS0FDUzBJLEdBQThCSSxFQUFXN0ksUUFDMUM2SSxFQUFXN0ksU0FFakIsUUFDRSxHQUFJMEksRUFDQSxLQUFNQyxPQUt4QixNQUFPNUksR0FDTG9ILEdBQXFCLEVBQ3JCQyxFQUFrQnJILEVBQ3BCLFFBQ0UsS0FDU21ILEdBQThCSSxFQUFXdEgsUUFDMUNzSCxFQUFXdEgsU0FFakIsUUFDRSxHQUFJbUgsRUFDQSxLQUFNQyxJV2o5RHRCLEtBQVdpQixPQUNmLG9CWDY5REkvTCxJQUFLLGtCQUNMcEIsSUFBSyxXV3Y5REwsR0FBU2tYLEdBQUssRVh5OURObkosR0FBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxNQUFrQnZLLEVBRXRCLEtXNTlEQyxPQUEwQndLLEdBQTFCQyxFQUFpQnRQLEtBQVM0WCxRQUFBM1MsT0FBQUMsY0FBQWdLLEdBQUFHLEVBQUFDLEVBQUFuSyxRQUFBQyxNQUFBOEosR0FBQSxHQUN0Qm1KLEdBREtoSixFQUFBM08sTUFDV29ULE9BQ3pCMVIsUVhnK0RNLE1BQU80RCxHQUNMbUosR0FBcUIsRUFDckJDLEVBQWtCcEosRUFDcEIsUUFDRSxLQUNTa0osR0FBOEJJLEVBQVdySixRQUMxQ3FKLEVBQVdySixTQUVqQixRQUNFLEdBQUlrSixFQUNBLEtBQU1DLElXeitEaEIsTUFDVmlKLE9YaS9ET3hMLEdXN2xFYTJLLEVBQVFyVSxRQXVVeEJ2RCxHQUFBaU4sVUFBU0EsQ1g4eERqQixJQUFJcUwsR0FBUSxXV2wrRFIsUUFBQUEsR0FBeUJqUixFQUFhZ1IsRUFBWXRELEVBQW1CK0MsRUFBWWpMLEdYNCtEN0U3SyxFQUFnQjVCLEtBQU1rWSxHV3ovRGxCbFksS0FBT3NZLFdBQ1B0WSxLQUFTMFMsV0FBa0IsRUFDM0IxUyxLQUFXdVksYUFBa0IsRUFZN0J2WSxLQUFNd1ksTUFBUTdELEVBQ2QzVSxLQUFPeVksT0FBU3hSLEVBQ2hCakgsS0FBSzBZLEtBQU9ULEVBQ1pqWSxLQUFNMlMsTUFBUWxHLEVBQ2R6TSxLQUFrQjJZLGtCQUMxQmpCLEdYK2tFQSxNQXpGQTFWLEdBQWFrVyxJQUNUM1YsSUFBSyxvQkFDTDdCLE1BQU8sU1duL0RnQ2dYLEdBS25DLElBQUMsR0FKUXJCLEdBQWVyVyxLQUFNd1ksTUFBTTdMLEtBQ2hDZ0ksRUFBYTNVLEtBQU93WSxNQUVkSSxFQUFPakgsS0FBS3FHLEtBQVUzQixFQUFjcUIsR0FDeENyWCxFQUFZLEVBQUdBLEVBQWF1WSxFQUFLdlksSUFBQSxDQUN2QyxHQUFTNEcsR0FBWTVHLEVBQWFxWCxFQUMzQk8sRUFBZ0JoUixFQUFheVEsRUFFM0JoTCxFQUFVLEdBQVNtTSxHQUFNNVIsRUFBS2dSLEVBQU10RCxFQUFNd0QsTUFBTWxSLEVBQU1nUixHQUFRalksS0FFbkVBLE1BQVFzWSxRQUFLeFMsS0FDckI0RyxPWDIvREFuSyxJQUFLLGFBQ0xwQixJQUFLLFdXcC9EQyxNQUFLbkIsTUFDZnVZLGFYcy9ESXJWLElBQUssU1dwL0RvQnhDLEdBQ3JCVixLQUFZdVksWUFDcEI3WCxLWDIvREk2QixJQUFLLE9BQ0xwQixJQUFLLFdXci9EQyxNQUFLbkIsTUFDZjJTLFNYNi9ESXBRLElBQUssV0FDTHBCLElBQUssV1d2L0RDLE1BQUtuQixNQUNmMFMsV1h5L0RJeFAsSUFBSyxTV3YvRGtCeEMsR0FDbkJWLEtBQVUwUyxVQUNsQmhTLEtYOC9ESTZCLElBQUssT0FDTHBCLElBQUssV1d4L0RDLE1BQUtuQixNQUNmd1ksU1hnZ0VJalcsSUFBSyxRQUNMcEIsSUFBSyxXVzEvREMsTUFBS25CLE1BQ2Z5WSxVWGtnRUlsVyxJQUFLLE1BQ0xwQixJQUFLLFdXNS9EQyxNQUFLbkIsTUFDZjBZLFFYKy9ESW5XLElBQUssU0FDTHBCLElBQUssV1c3L0RDLE1BQUtuQixNQUNmc1ksWVhpZ0VPSixJV2o1RFF0WSxHQUFBc1ksTUFBS0EsQ1h5NUR4QixJQUFJVyxHQUFRLFdXbC9EUixRQUFBQSxHQUF5QjVSLEVBQWFnUixFQUFZdEQsRUFBY2YsR1gyL0Q1RGhTLEVBQWdCNUIsS0FBTTZZLEdXeGdFbEI3WSxLQUFXdVksYUFBa0IsRUFDN0J2WSxLQUFTMFMsV0FBa0IsRUFhM0IxUyxLQUFPeVksT0FBU3hSLEVBQ2hCakgsS0FBSzBZLEtBQU9ULEVBQ1pqWSxLQUFNd1ksTUFBUTdELEVBQ2QzVSxLQUFPOFksT0FDZmxGLEVYeWxFQSxNQXBGQTVSLEdBQWE2VyxJQUNUdFcsSUFBSyxRQUNMcEIsSUFBSyxXV2hnRUMsTUFBS25CLE1BQ2Y4WSxVWHdnRUl2VyxJQUFLLFFBQ0xwQixJQUFLLFdXbGdFQyxNQUFLbkIsTUFDZnlZLFVYMGdFSWxXLElBQUssTUFDTHBCLElBQUssV1dwZ0VDLE1BQUtuQixNQUNmMFksUVg0Z0VJblcsSUFBSyxPQUNMcEIsSUFBSyxXV3RnRUMsTUFBS25CLE1BQ2Z3WSxTWDhnRUlqVyxJQUFLLFdBQ0xwQixJQUFLLFdXeGdFQyxNQUFLbkIsTUFDZjBTLFdYMGdFSXhQLElBQUssU1d2Z0VrQnhDLEdBQ25CVixLQUFVMFMsVUFDbEJoUyxLWHlnRUk2QixJQUFLLE9BQ0xwQixJQUFLLFdXdGdFQyxNQUFLbkIsTUFDZitZLE9Yd2dFSTdWLElBQUssU1d0Z0VheEMsR0FDZFYsS0FBTStZLE1BQ2RyWSxLWDZnRUk2QixJQUFLLGFBQ0xwQixJQUFLLFdXdGdFQyxNQUFLbkIsTUFDZnVZLGFYd2dFSXJWLElBQUssU1d0Z0VvQnhDLEdBQ3JCVixLQUFZdVksWUFDcEI3WCxLWDZnRUk2QixJQUFLLE1BQ0xwQixJQUFLLFdXdGdFQyxNQUFLbkIsTUFDZmdaLE1Yd2dFSTlWLElBQUssU1d0Z0VZeEMsR0FDYlYsS0FBS2daLEtBQ2J0WSxNWHlnRU9tWSxJV3JnRWVqWixHQUFBaVosTUFBS0EsR1g0Z0V6QixTQUFVaFosRUFBUUQsRUFBU00sR0FFakMsWUFHQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU2dWLEdBQTJCQyxFQUFNelcsR0FBUSxJQUFLeVcsRUFBUSxLQUFNLElBQUlDLGdCQUFlLDREQUFnRSxRQUFPMVcsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QnlXLEVBQVB6VyxFQUVsTyxRQUFTMlcsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJclYsV0FBVSxpRUFBb0VxVixHQUFlRCxHQUFTM1YsVUFBWVQsT0FBT3NXLE9BQU9ELEdBQWNBLEVBQVc1VixXQUFhc1AsYUFBZXBRLE1BQU95VyxFQUFValcsWUFBWSxFQUFPb0IsVUFBVSxFQUFNckIsY0FBYyxLQUFlbVcsSUFBWXJXLE9BQU91VyxlQUFpQnZXLE9BQU91VyxlQUFlSCxFQUFVQyxHQUFjRCxFQUFTSSxVQUFZSCxHQUVqZXJXLE9BQU9DLGVBQWVwQixFQUFTLGNBQWdCYyxPQUFPLEdZbDJFdEQsSUFBQThXLEdBQUF0WCxFQUFrQyxHQUlqQitZLEVBQUEsU0FBQXhCLEdadTJFZixRQUFTd0IsS0FHUCxNQUZBclgsR0FBZ0I1QixLQUFNaVosR0FFZmxDLEVBQTJCL1csTUFBT2laLEVBQVcxQixXQUFheFcsT0FBTzRXLGVBQWVzQixJQUFhQyxNQUFNbFosS0FBTTBSLFlBR2xILE1BUkF3RixHQUFVK0IsRUFBWXhCLEdBUWZ3QixHWTcyRWdCekIsRUFFeEJyVSxRQUVEdkQsR0FBQXVELFFBQTBCOFYsR1pnM0VwQixTQUFVcFosRUFBUUQsRUFBU00sR0FFakMsWUFLQSxTQUFTMEIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSTlCLEdBQUksRUFBR0EsRUFBSThCLEVBQU1DLE9BQVEvQixJQUFLLENBQUUsR0FBSWdDLEdBQWFGLEVBQU05QixFQUFJZ0MsR0FBV25CLFdBQWFtQixFQUFXbkIsYUFBYyxFQUFPbUIsRUFBV3BCLGNBQWUsRUFBVSxTQUFXb0IsS0FBWUEsRUFBV0MsVUFBVyxHQUFNdkIsT0FBT0MsZUFBZWtCLEVBQVFHLEVBQVdFLElBQUtGLElBQWlCLE1BQU8sVUFBVVAsRUFBYVUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlQLEVBQWlCSCxFQUFZTixVQUFXZ0IsR0FBaUJDLEdBQWFSLEVBQWlCSCxFQUFhVyxHQUFxQlgsS0FJaGlCZixRQUFPQyxlQUFlcEIsRUFBUyxjQUFnQmMsT2FqNEUvQyxHYm00RUEsSWFsNEVzQnlZLEdBQUEsV2JtNEVsQixRQUFTQSxLQUNMdlgsRUFBZ0I1QixLQUFNbVosR0FlMUIsTUFaQW5YLEdBQWFtWCxFQUFNLE9BQ2Y1VyxJQUFLLE9BQ0w3QixNQUFPLFdheDRFUCxHQUFLQyxJQUFHLEdBQVU2SixPQUFXQyxTQUN2Qiw4Q0FBK0NwRCxRQUFRLFFBQUUsU0FBVzVHLEdBQ3RFLEdBQUsyWSxJQUFLelksRUFBc0IsR0FBZmdSLEtBQVMwSCxVQUFXLEdBQUssQ0FFcEMsT0FETDFZLEdBQU9nUixLQUFNMkgsTUFBRTNZLEVBQU8sS0FDUCxLQUFQRixFQUFjMlksRUFBUSxFQUFOQSxFQUFjLEdBQVNoUixTQUNwRCxVYjY0RUcrUSxJYXo0RVh2WixHQUFBdUQsUUFBb0JnVyxHYmc1RWQsU0FBVXRaLEVBQVFELEVBQVNNLEdBRWpDIiwiZmlsZSI6InFpbml1NGpzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlFpbml1XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlFpbml1XCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlFpbml1XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlFpbml1XCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIExvZyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2coKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2cpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhMb2csIG51bGwsIFt7XG4gICAgICAgIGtleTogXCJkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkKG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKCFMb2cuX2VuYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcob2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImxcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGwob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIUxvZy5fZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5sb2cob2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGUob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIUxvZy5fZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihvYmplY3QpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwid1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdyhvYmplY3QpIHtcbiAgICAgICAgICAgIGlmICghTG9nLl9lbmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLndhcm4ob2JqZWN0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImlcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGkob2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoIUxvZy5fZW5hYmxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5pbmZvKG9iamVjdCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJlbmFibGVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTG9nO1xufSgpO1xuXG5Mb2cuX2VuYWJsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSBMb2c7XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRGlyZWN0VGFza18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG52YXIgQ2h1bmtUYXNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xudmFyIFVVSURfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xudmFyIFVwbG9hZGVyQnVpbGRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBMb2dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgU2ltcGxlVXBsb2FkTGlzdGVuZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG52YXIgRGlyZWN0VXBsb2FkUGF0dGVybl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBDaHVua1VwbG9hZFBhdHRlcm5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxudmFyIFVwbG9hZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVwbG9hZGVyKGJ1aWxkZXIpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVwbG9hZGVyKTtcblxuICAgICAgICB0aGlzLkZJTEVfSU5QVVRfRUxfSUQgPSAncWluaXU0anMtaW5wdXQnO1xuICAgICAgICB0aGlzLl90YXNrUXVldWUgPSBbXTsgLy/ku7vliqHpmJ/liJdcbiAgICAgICAgdGhpcy5fdGFza2luZyA9IGZhbHNlOyAvL+S7u+WKoeaJp+ihjOS4rVxuICAgICAgICB0aGlzLl9zY2FsZSA9IFtdOyAvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5TnvKnmlL5baDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5TnvKnmlL5baDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWkhOeQhuaWh+S7tlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ6YCJ5Lit5paH5Lu25bCx6L+U5ZueXG4gICAgICAgICAgICBpZiAoX3RoaXMyLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v55Sf5oiQdGFza1xuICAgICAgICAgICAgX3RoaXMyLmdlbmVyYXRlVGFzaygpO1xuICAgICAgICAgICAgLy/mmK/lkKbkuK3mlq3ku7vliqFcbiAgICAgICAgICAgIHZhciBpc0ludGVycnVwdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGludGVyY2VwdGVkVGFza3MgPSBbXTtcbiAgICAgICAgICAgIC8v5Lu75Yqh5oum5oiq5Zmo6L+H5rukXG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfdGhpczIudGFza1F1ZXVlW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFzayA9IF9zdGVwLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSBfdGhpczIuaW50ZXJjZXB0b3JzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAzOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zID0gKF9zdGVwMyA9IF9pdGVyYXRvcjMubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGludGVyY2VwdG9yID0gX3N0ZXAzLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mi6bmiKrnlJ/mlYhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJjZXB0b3Iub25JbnRlcmNlcHQodGFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJjZXB0ZWRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQoXCLku7vliqHmi6bmiKrlmajmi6bmiKrkuobku7vliqE6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQodGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5omT5pat55Sf5pWIXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLm9uSW50ZXJydXB0KHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5bCG5omT5pat5qCH5b+X5L2N6K6+5Li6dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ludGVycnVwdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNJbnRlcnJ1cHQpIHtcbiAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncoXCLku7vliqHmi6bmiKrlmajkuK3mlq3kuobku7vliqHpmJ/liJdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ku47ku7vliqHpmJ/liJfkuK3ljrvpmaTku7vliqFcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSBpbnRlcmNlcHRlZFRhc2tzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGFzayA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpczIudGFza1F1ZXVlLmluZGV4T2YoX3Rhc2spO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi50YXNrUXVldWUuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL+Wbnuiwg+WHveaVsOWHveaVsFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzMi5saXN0ZW5lci5vblJlYWR5KF90aGlzMi50YXNrUXVldWUpO1xuICAgICAgICAgICAgLy/lpITnkIblm77niYdcbiAgICAgICAgICAgIF90aGlzMi5oYW5kbGVJbWFnZXMoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvL+iHquWKqOS4iuS8oFxuICAgICAgICAgICAgICAgIGlmIChfdGhpczIuYXV0bykge1xuICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQoXCLlvIDlp4voh6rliqjkuIrkvKBcIik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc29sdmVVVUlEID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHZhciByZSA9IC9cXCRcXCh1dWlkXFwpLztcbiAgICAgICAgICAgIGlmIChyZS50ZXN0KHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHMucmVwbGFjZShyZSwgVVVJRF8xLmRlZmF1bHQudXVpZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlc29sdmVJbWFnZUluZm8gPSBmdW5jdGlvbiAoYmxvYiwgcykge1xuICAgICAgICAgICAgdmFyIHdpZHRoUmUgPSAvXFwkXFwoaW1hZ2VJbmZvXFwud2lkdGhcXCkvO1xuICAgICAgICAgICAgdmFyIGhlaWdodFJlID0gL1xcJFxcKGltYWdlSW5mb1xcLmhlaWdodFxcKS87XG4gICAgICAgICAgICBpZiAoIXdpZHRoUmUudGVzdChzKSAmJiAhaGVpZ2h0UmUudGVzdChzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMucmVwbGFjZSh3aWR0aFJlLCBpbWcud2lkdGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBzLnJlcGxhY2UoaGVpZ2h0UmUsIGltZy5oZWlnaHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU2F2ZUtleVJlc29sdmVkID0gZnVuY3Rpb24gKHNhdmVLZXkpIHtcbiAgICAgICAgICAgIF90aGlzMi5fdG9rZW5TaGFyZSA9IF90aGlzMi5fdG9rZW5TaGFyZSAmJiBfdGhpczIuX3NhdmVLZXkgPT0gc2F2ZUtleTtcbiAgICAgICAgICAgIHJldHVybiBzYXZlS2V5O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9yZXRyeSA9IGJ1aWxkZXIuZ2V0UmV0cnk7XG4gICAgICAgIHRoaXMuX3NpemUgPSBidWlsZGVyLmdldFNpemU7XG4gICAgICAgIHRoaXMuX2NodW5rID0gYnVpbGRlci5nZXRDaHVuaztcbiAgICAgICAgdGhpcy5fYXV0byA9IGJ1aWxkZXIuZ2V0QXV0bztcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBidWlsZGVyLmdldE11bHRpcGxlO1xuICAgICAgICB0aGlzLl9hY2NlcHQgPSBidWlsZGVyLmdldEFjY2VwdDtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gYnVpbGRlci5nZXRCdXR0b247XG4gICAgICAgIHRoaXMuX2J1dHRvbkV2ZW50TmFtZSA9IGJ1aWxkZXIuZ2V0QnV0dG9uRXZlbnROYW1lO1xuICAgICAgICB0aGlzLl9jb21wcmVzcyA9IGJ1aWxkZXIuZ2V0Q29tcHJlc3M7XG4gICAgICAgIHRoaXMuX3NjYWxlID0gYnVpbGRlci5nZXRTY2FsZTtcbiAgICAgICAgdGhpcy5fc2F2ZUtleSA9IGJ1aWxkZXIuZ2V0U2F2ZUtleTtcbiAgICAgICAgdGhpcy5fdG9rZW5GdW5jID0gYnVpbGRlci5nZXRUb2tlbkZ1bmM7XG4gICAgICAgIHRoaXMuX3Rva2VuU2hhcmUgPSBidWlsZGVyLmdldFRva2VuU2hhcmU7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyID0gT2JqZWN0LmFzc2lnbihuZXcgU2ltcGxlVXBsb2FkTGlzdGVuZXJfMS5kZWZhdWx0KCksIGJ1aWxkZXIuZ2V0TGlzdGVuZXIpO1xuICAgICAgICB0aGlzLl9pbnRlcmNlcHRvcnMgPSBidWlsZGVyLmdldEludGVyY2VwdG9ycztcbiAgICAgICAgdGhpcy5fZG9tYWluID0gYnVpbGRlci5nZXREb21haW47XG4gICAgICAgIHRoaXMuX2ZpbGVJbnB1dElkID0gdGhpcy5GSUxFX0lOUFVUX0VMX0lEICsgXCJfXCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgTG9nXzEuZGVmYXVsdC5lbmFibGUgPSBidWlsZGVyLmdldElzRGVidWc7XG4gICAgICAgIHRoaXMudmFsaWRhdGVPcHRpb25zKCk7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJbmk43kvZxcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKFVwbG9hZGVyLCBbe1xuICAgICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEZpbGVJbnB1dEVsKCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWIneWni+WMlmZpbGUgaW5wdXQgZWxlbWVudFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImluaXRGaWxlSW5wdXRFbFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdEZpbGVJbnB1dEVsKCkge1xuICAgICAgICAgICAgLy/mn6Xor6Llt7Lnu4/lrZjlnKjnmoRmaWxlIGlucHV0XG4gICAgICAgICAgICB2YXIgZXhpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9maWxlSW5wdXRJZCk7XG4gICAgICAgICAgICAvL+WIm+W7umlucHV05YWD57SgXG4gICAgICAgICAgICB0aGlzLl9maWxlSW5wdXQgPSBleGlzdCA/IGV4aXN0IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7IC8vdHlwZSBmaWxlXG4gICAgICAgICAgICB0aGlzLmZpbGVJbnB1dC5pZCA9IHRoaXMuX2ZpbGVJbnB1dElkOyAvL2lkIOaWueS+v+WQjumdouafpeaJvlxuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy/pmpDol49maWxlIGlucHV0XG4gICAgICAgICAgICAvL+WkmuaWh+S7tlxuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAvL+WkmuaWh+S7tlxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5paH5Lu257G75Z6LXG4gICAgICAgICAgICBpZiAodGhpcy5hY2NlcHQgJiYgdGhpcy5hY2NlcHQubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgYWNjZXB0VmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNCA9IHRoaXMuYWNjZXB0W1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA0OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ID0gKF9zdGVwNCA9IF9pdGVyYXRvcjQubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfc3RlcDQudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdFZhbHVlICs9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0VmFsdWUgKz0gJywnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yNCA9IGVycjtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCAmJiBfaXRlcmF0b3I0LnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFjY2VwdFZhbHVlLmVuZHNXaXRoKCcsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0VmFsdWUgPSBhY2NlcHRWYWx1ZS5zdWJzdHJpbmcoMCwgYWNjZXB0VmFsdWUubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LmFjY2VwdCA9IGFjY2VwdFZhbHVlO1xuICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcImFjY2VwdFxcdTdDN0JcXHU1NzhCIFwiICsgYWNjZXB0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/lsIZpbnB1dOWFg+e0oOa3u+WKoOWIsGJvZHnlrZDoioLngrnnmoTmnKvlsL5cbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5maWxlSW5wdXQpO1xuICAgICAgICAgICAgLy/pgInmi6nmlofku7bnm5HlkKzlmahcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlRmlsZXMsIGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9idXR0b24gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2J1dHRvbik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fYnV0dG9uRXZlbnROYW1lLCB0aGlzLmNob29zZUZpbGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOS4iuS8oOWujOaIkOaIluiAheWksei0peWQjizlr7nmnKzmrKHkuIrkvKDku7vliqHov5vooYzmuIXmiatcbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZXNldFVwbG9hZGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldFVwbG9hZGVyKCkge1xuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwi5byA5aeL6YeN572uIHVwbG9hZGVyXCIpO1xuICAgICAgICAgICAgdGhpcy50YXNrUXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIuS7u+WKoemYn+WIl+W3sua4heepulwiKTtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcInRva2Vu5bey5riF56m6XCIpO1xuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwidXBsb2FkZXIg6YeN572u5a6M5q+VXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmmK/lkKbmmK/liIblnZfku7vliqFcbiAgICAgICAgICogQHBhcmFtIHRhc2tcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2VuZXJhdGVUYXNrXCIsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOeUn+aIkHRhc2tcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZVRhc2soKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXIoKTtcbiAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZUlucHV0LmZpbGVzO1xuICAgICAgICAgICAgLy/pgY3ljoZmaWxlcyDliJvlu7rkuIrkvKDku7vliqFcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlSW5wdXQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZSA9IGZpbGVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciB0YXNrID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIC8v5Y+q5pyJ5Zyo5byA5ZCv5YiG5Z2X5LiK5Lyg77yM5bm25LiU5paH5Lu25aSn5bCP5aSn5LqONG1i55qE5pe25YCZ5omN6L+b6KGM5YiG5Z2X5LiK5LygXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmsgJiYgZmlsZS5zaXplID4gVXBsb2FkZXJCdWlsZGVyXzEuZGVmYXVsdC5CTE9DS19TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sgPSBuZXcgQ2h1bmtUYXNrXzEuQ2h1bmtUYXNrKGZpbGUsIFVwbG9hZGVyQnVpbGRlcl8xLmRlZmF1bHQuQkxPQ0tfU0laRSwgdGhpcy5zaXplKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXNrID0gbmV3IERpcmVjdFRhc2tfMS5kZWZhdWx0KGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2F2ZUtleSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmtleSA9IHRoaXMubGlzdGVuZXIub25UYXNrR2V0S2V5KHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlpITnkIblm77niYct57yp5pS+Lei0qOmHj+WOi+e8qVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImhhbmRsZUltYWdlc1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSW1hZ2VzKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcHJlc3MgIT0gMSB8fCB0aGlzLnNjYWxlWzBdICE9IDAgfHwgdGhpcy5zY2FsZVsxXSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I1ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yNSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2sgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFzay5maWxlLnR5cGUubWF0Y2goJ2ltYWdlLionKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQodGFzay5maWxlLm5hbWUgKyBcIiBcXHU1OTA0XFx1NzQwNlxcdTUyNERcXHU3Njg0XFx1NTZGRVxcdTcyNDdcXHU1OTI3XFx1NUMwRjpcIiArIHRhc2suZmlsZS5zaXplIC8gMTAyNCArIFwiIGtiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwodGFzay5maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IF90aGlzMztcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1cgPSBpbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWdIID0gaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjYWxlVyA9IF90aGlzLnNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGVIID0gX3RoaXMuc2NhbGVbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY2FsZVcgPT0gMCAmJiBzY2FsZUggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBpbWdXIC8gaW1nSCAqIHNjYWxlSDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY2FsZUg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2NhbGVIID09IDAgJiYgc2NhbGVXID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZ0ggLyBpbWdXICogc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNjYWxlVyA+IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHNjYWxlSDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+Z6YeM55qE6ZW/5a695piv57uY5Yi25Yiw55S75biD5LiK55qE5Zu+54mH55qE6ZW/5a69XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYW52YXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYW52YXMudG9CbG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8wLjk15piv5pyA5o6l6L+R5Y6f5Zu+5aSn5bCP77yM5aaC5p6c6LSo6YeP5Li6MeeahOivneS8muWvvOiHtOavlOWOn+WbvuWkp+WHoOWAjeOAglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMudG9CbG9iKGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKHRhc2suZmlsZS5uYW1lICsgXCIgXFx1NTkwNFxcdTc0MDZcXHU1NDBFXFx1NzY4NFxcdTU2RkVcXHU3MjQ3XFx1NTkyN1xcdTVDMEY6XCIgKyBibG9iLnNpemUgLyAxMDI0ICsgXCIga2JcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiaW1hZ2UvanBlZ1wiLCBfdGhpcy5jb21wcmVzcyAqIDAuOTUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChibG9iKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvYi5uYW1lID0gdGFzay5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5maWxlID0gYmxvYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoVXBsb2FkZXIuaXNDaHVua1Rhc2sodGFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zcGxpY2VGaWxlMkJsb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjUgPSB0aGlzLnRhc2tRdWV1ZVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3JldCA9PT0gXCJjb250aW51ZVwiKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjUgPSBlcnI7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjUgJiYgX2l0ZXJhdG9yNS5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I1LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOajgOmqjOmAiemhueWQiOazleaAp1xuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInZhbGlkYXRlT3B0aW9uc1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zKCkge1xuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwi5byA5aeL5qOA5p+l5p6E5bu65Y+C5pWw5ZCI5rOV5oCnXCIpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl90b2tlbkZ1bmMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S9oOW/hemhu+aPkOS+m+S4gOS4quiOt+WPllRva2Vu55qE5Zue6LCD5Ye95pWwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2NhbGUgfHwgISh0aGlzLnNjYWxlIGluc3RhbmNlb2YgQXJyYXkpIHx8IHRoaXMuc2NhbGUubGVuZ3RoICE9IDIgfHwgdGhpcy5zY2FsZVswXSA8IDAgfHwgdGhpcy5zY2FsZVsxXSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NjYWxl5b+F6aG75piv6ZW/5bqm5Li6MueahG51bWJlcuexu+Wei+eahOaVsOe7hCxzY2FsZVswXeS4uuWuveW6pu+8jHNjYWxlWzFd5Li66ZW/5bqmLOW/hemhu+Wkp+S6juetieS6jjAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIuaehOW7uuWPguaVsOajgOafpeWujOavlVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5byA5aeL5LiK5LygXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3RhcnRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwiXFx1NEUwQVxcdTRGMjBcXHU0RUZCXFx1NTJBMVxcdTkwNERcXHU1Mzg2XFx1NUYwMFxcdTU5Q0JcIik7XG4gICAgICAgICAgICBpZiAodGhpcy5maWxlSW5wdXQuZmlsZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ayoeaciemAieS4reeahOaWh+S7tu+8jOaXoOazleW8gOWni+S4iuS8oCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudGFza2luZykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5Lu75Yqh5omn6KGM5Lit77yM6K+35LiN6KaB6YeN5aSN5LiK5LygJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyLm9uU3RhcnQodGhpcy50YXNrUXVldWUpO1xuICAgICAgICAgICAgLy/pgY3ljobku7vliqHpmJ/liJdcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I2ID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3I2ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSB0aGlzLnRhc2tRdWV1ZVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IChfc3RlcDYgPSBfaXRlcmF0b3I2Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3Rhc2syID0gX3N0ZXA2LnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTRFMEFcXHU0RjIwXFx1NjU4N1xcdTRFRjZcXHU1NDBEXFx1RkYxQVwiICsgX3Rhc2syLmZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTRFMEFcXHU0RjIwXFx1NjU4N1xcdTRFRjZcXHU1OTI3XFx1NUMwRlxcdUZGMUFcIiArIF90YXNrMi5maWxlLnNpemUgKyBcIlxcdTVCNTdcXHU4MjgyXFx1RkYwQ1wiICsgX3Rhc2syLmZpbGUuc2l6ZSAvIDEwMjQgKyBcIiBrYlxcdUZGMENcIiArIF90YXNrMi5maWxlLnNpemUgLyAxMDI0IC8gMTAyNCArIFwiIG1iXCIpO1xuICAgICAgICAgICAgICAgICAgICAvL+agueaNruS7u+WKoeeahOexu+Wei+iwg+eUqOS4jeWQjOeahOS4iuS8oOaooeW8j+i/m+ihjOS4iuS8oFxuICAgICAgICAgICAgICAgICAgICBpZiAoVXBsb2FkZXIuaXNEaXJlY3RUYXNrKF90YXNrMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZCgn6K+l5LiK5Lyg5Lu75Yqh5Li655u05Lyg5Lu75YqhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+ebtOS8oFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERpcmVjdFVwbG9hZFBhdHRlcm5fMS5kZWZhdWx0KHRoaXMpLnVwbG9hZChfdGFzazIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFVwbG9hZGVyLmlzQ2h1bmtUYXNrKF90YXNrMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZCgn6K+l5LiK5Lyg5Lu75Yqh5Li65YiG54mH5Lu75YqhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WIhuWdl+S4iuS8oFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENodW5rVXBsb2FkUGF0dGVybl8xLmRlZmF1bHQodGhpcykudXBsb2FkKF90YXNrMik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+mdnuazleeahHRhc2vnsbvlnosnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I2ID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ICYmIF9pdGVyYXRvcjYucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I2LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmiYDmnInku7vliqHmmK/lkKblrozmiJBcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiaXNUYXNrUXVldWVGaW5pc2hcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzVGFza1F1ZXVlRmluaXNoKCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjcgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNyA9IHRoaXMudGFza1F1ZXVlW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA3OyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gKF9zdGVwNyA9IF9pdGVyYXRvcjcubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjcgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfdGFzazMgPSBfc3RlcDcudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGFzazMuaXNGaW5pc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yNyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I3ID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ICYmIF9pdGVyYXRvcjcucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3I3LnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I3O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6YCJ5oup5paH5Lu2XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY2hvb3NlRmlsZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2hvb3NlRmlsZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRUb2tlblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9rZW4odGFzaykge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl90b2tlblNoYXJlICYmIHRoaXMuX3Rva2VuICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fdG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwiXFx1NUYwMFxcdTU5Q0JcXHU4M0I3XFx1NTNENlxcdTRFMEFcXHU0RjIwdG9rZW5cIik7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3Rva2VuRnVuYyh0aGlzLCB0YXNrKSkudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQoXCJcXHU0RTBBXFx1NEYyMHRva2VuXFx1ODNCN1xcdTUzRDZcXHU2MjEwXFx1NTI5RjogXCIgKyB0b2tlbik7XG4gICAgICAgICAgICAgICAgX3RoaXM0Ll90b2tlbiA9IHRva2VuO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmVxdWVzdFRhc2tUb2tlblwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdFRhc2tUb2tlbih0YXNrLCB1cmwpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlU2F2ZUtleSh0YXNrKS50aGVuKGZ1bmN0aW9uIChzYXZlS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5yZXF1ZXN0VG9rZW4odXJsLCBzYXZlS2V5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmVxdWVzdFRva2VuXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9rZW4odXJsLCBzYXZlS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2F2ZUtleSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAoL1xcPy8udGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyBcInNhdmVLZXk9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc2F2ZUtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVybCArPSAoL1xcPy8udGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlICE9IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlLnVwdG9rZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnYWJvcnRlZCcpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZXNvbHZlU2F2ZUtleVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZVNhdmVLZXkodGFzaykge1xuICAgICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBzYXZlS2V5ID0gdGhpcy5fc2F2ZUtleTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2F2ZUtleSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzYXZlS2V5KS50aGVuKHRoaXMucmVzb2x2ZVVVSUQpLnRoZW4oZnVuY3Rpb24gKHNhdmVLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LnJlc29sdmVJbWFnZUluZm8odGFzay5maWxlLCBzYXZlS2V5KTtcbiAgICAgICAgICAgIH0pLnRoZW4odGhpcy5vblNhdmVLZXlSZXNvbHZlZCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZXRyeVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXRyeTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNpemVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImF1dG9cIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXV0bztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm11bHRpcGxlXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiYWNjZXB0XCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2VwdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNvbXByZXNzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXByZXNzO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic2NhbGVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2NhbGU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJsaXN0ZW5lclwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcjtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImZpbGVJbnB1dFwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWxlSW5wdXQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjaHVua1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaHVuaztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInRhc2tRdWV1ZVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90YXNrUXVldWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ0YXNraW5nXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl90YXNraW5nID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJpbnRlcmNlcHRvcnNcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJjZXB0b3JzO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZG9tYWluXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpbjtcbiAgICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAgICBrZXk6IFwiaXNDaHVua1Rhc2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ2h1bmtUYXNrKHRhc2spIHtcbiAgICAgICAgICAgIHJldHVybiB0YXNrLmNvbnN0cnVjdG9yLm5hbWUgPT09IENodW5rVGFza18xLkNodW5rVGFzay5uYW1lICYmIHRhc2sgaW5zdGFuY2VvZiBDaHVua1Rhc2tfMS5DaHVua1Rhc2s7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaYr+WQpuaYr+ebtOS8oOS7u+WKoVxuICAgICAgICAgKiBAcGFyYW0gdGFza1xuICAgICAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJpc0RpcmVjdFRhc2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRGlyZWN0VGFzayh0YXNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFzay5jb25zdHJ1Y3Rvci5uYW1lID09PSBEaXJlY3RUYXNrXzEuZGVmYXVsdC5uYW1lICYmIHRhc2sgaW5zdGFuY2VvZiBEaXJlY3RUYXNrXzEuZGVmYXVsdDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBVcGxvYWRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gVXBsb2FkZXI7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgVXBsb2FkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG52YXIgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3JfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG4vKipcbiAqIFVwbG9hZGVyQnVpbGRlclxuICpcbiAqL1xuXG52YXIgVXBsb2FkZXJCdWlsZGVyID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVwbG9hZGVyQnVpbGRlcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFVwbG9hZGVyQnVpbGRlcik7XG5cbiAgICAgICAgdGhpcy5fcmV0cnkgPSAwOyAvL+acgOWkp+mHjeivleasoeaVsFxuICAgICAgICB0aGlzLl9kb21haW4gPSBVcGxvYWRlckJ1aWxkZXIuVVBMT0FEX0RPTUFJTjsgLy/kuIrkvKDln5/lkI1cbiAgICAgICAgdGhpcy5fc2NoZW1lID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sOyAvL+S4iuS8oOWfn+WQjeeahCBzY2hlbWVcbiAgICAgICAgdGhpcy5fc2l6ZSA9IDEwMjQgKiAxMDI0OyAvL+WIhueJh+Wkp+WwjyzljZXkvY3lrZfoioIs5LiK6ZmQNG0s5LiN6IO95Li6MFxuICAgICAgICB0aGlzLl9jaHVuayA9IHRydWU7IC8v5YiG5Z2X5LiK5LygXG4gICAgICAgIHRoaXMuX2F1dG8gPSB0cnVlOyAvL+iHquWKqOS4iuS8oCzmr4/mrKHpgInmi6nmlofku7blkI5cbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSB0cnVlOyAvL+aYr+WQpuaUr+aMgeWkmuaWh+S7tlxuICAgICAgICB0aGlzLl9hY2NlcHQgPSBbXTsgLy/mjqXlj5fnmoTmlofku7bnsbvlnotcbiAgICAgICAgdGhpcy5fY29tcHJlc3MgPSAxOyAvL+WbvueJh+WOi+e8qei0qOmHj1xuICAgICAgICB0aGlzLl9zY2FsZSA9IFswLCAwXTsgLy/nvKnmlL7lpKflsI8s6ZmQ5a6a6auY5bqm562J5q+UW2g6MjAwLHc6MF0s6ZmQ5a6a5a695bqm562J5q+UW2g6MCx3OjEwMF0s6ZmQ5a6a6ZW/5a69W2g6MjAwLHc6MTAwXVxuICAgICAgICB0aGlzLl9zYXZlS2V5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Rva2VuU2hhcmUgPSB0cnVlOyAvL+WIhuS6q3Rva2VuLOWmguaenOS4umZhbHNlLOavj+S4gOasoUhUVFDor7fmsYLpg73pnIDopoHmlrDojrflj5ZUb2tlblxuICAgICAgICB0aGlzLl9pbnRlcmNlcHRvcnMgPSBbXTsgLy/ku7vliqHmi6bmiKrlmahcbiAgICAgICAgdGhpcy5faXNEZWJ1ZyA9IGZhbHNlOyAvL1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDorr7nva7kuIrkvKDnmoTln5/lkI0s6buY6K6k5pivIHtodHRwOiAnaHR0cDovL3VwbG9hZC5xaW5pdS5jb20nLCBodHRwczogJ2h0dHBzOi8vdXAucWJveC5tZSd9XG4gICAgICogQHBhcmFtIGRvbWFpblxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhVcGxvYWRlckJ1aWxkZXIsIFt7XG4gICAgICAgIGtleTogXCJkb21haW5cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRvbWFpbihfZG9tYWluKSB7XG4gICAgICAgICAgICB0aGlzLl9kb21haW4gPSBfZG9tYWluO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiuvue9ruS4iuS8oOWfn+WQjeeahOWNj+iuruexu+Wei++8jOm7mOiupOS7jiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wg6K+75Y+WXG4gICAgICAgICAqIEBwYXJhbSBzY2hlbWVcbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJzY2hlbWVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjaGVtZShfc2NoZW1lKSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlbWUgPSBfc2NoZW1lO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOa3u+WKoOS4gOS4quaLpuaIquWZqFxuICAgICAgICAgKiBAcGFyYW0gaW50ZXJjZXB0b3JcbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJpbnRlcmNlcHRvclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJjZXB0b3IoX2ludGVyY2VwdG9yKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHRvcnMucHVzaChPYmplY3QuYXNzaWduKG5ldyBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcl8xLmRlZmF1bHQoKSwgX2ludGVyY2VwdG9yKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5LiK5Lyg5aSx6LSl5ZCO55qE6YeN5Lyg5bCd6K+V5qyh5pWwXG4gICAgICAgICAqIEBwYXJhbSByZXRyeSDpu5jorqQw5qyh77yM5LiN5bCd6K+V5qyh6YeN5LygXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmV0cnlcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJldHJ5KF9yZXRyeSkge1xuICAgICAgICAgICAgdGhpcy5fcmV0cnkgPSBfcmV0cnk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvLyAvKipcbiAgICAgICAgLy8gICog6K6+572u5YiG54mH5aSn5bCPXG4gICAgICAgIC8vICAqIEBwYXJhbSBzaXplIOWIhuWdl+Wkp+WwjyzljZXkvY3lrZfoioIs6buY6K6kNCoxMDI0KjEwMjTlrZfoioIoNG1iKVxuICAgICAgICAvLyAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAgICAvLyAgKi9cbiAgICAgICAgLy8gcHJpdmF0ZSBzaXplKHNpemU6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIC8vICAgICB0aGlzLl9zaXplID0gTWF0aC5taW4oTWF0aC5tYXgoc2l6ZSwgMSksIFVwbG9hZGVyQnVpbGRlci5NQVhfQ0hVTktfU0laRSk7XG4gICAgICAgIC8vICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICog6YCJ5oup5paH5Lu25ZCOLOaYr+WQpuiHquWKqOS4iuS8oFxuICAgICAgICAgKiBAcGFyYW0gYXV0byDpu5jorqR0cnVlXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiYXV0b1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXV0byhfYXV0bykge1xuICAgICAgICAgICAgdGhpcy5fYXV0byA9IF9hdXRvO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaYr+WQpuaUr+aMgeWkmuaWh+S7tumAieaLqVxuICAgICAgICAgKiBAcGFyYW0gbXVsdGlwbGUg6buY6K6kdHJ1ZVxuICAgICAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm11bHRpcGxlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtdWx0aXBsZShfbXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHRoaXMuX211bHRpcGxlID0gX211bHRpcGxlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOaOpeWPl+S4iuS8oOeahOaWh+S7tuexu+Wei1xuICAgICAgICAgKiBAcGFyYW0gYWNjZXB0IOaVsOe7hOW9ouW8j+S+i+WmgjpbJy5wbmcnLCd2aWRlby8qJ11cbiAgICAgICAgICpcbiAgICAgICAgICog6K+m57uG6YWN572u6KeBaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL3RhZ3MvYXR0X2lucHV0X2FjY2VwdC5hc3BcbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhY2NlcHRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFjY2VwdChfYWNjZXB0KSB7XG4gICAgICAgICAgICB0aGlzLl9hY2NlcHQgPSBfYWNjZXB0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiuvue9ruS4iuS8oOaMiemSrlxuICAgICAgICAgKiBAcGFyYW0gYnV0dG9uIOS4iuS8oOaMiemSrklEXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUg5LiK5Lyg5oyJ6ZKu55qE55uR5ZCs5LqL5Lu25ZCN56ew77yM6buY6K6k5Li6IFwiY2xpY2tcIiDjgIJcbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJidXR0b25cIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1dHRvbihfYnV0dG9uKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBcImNsaWNrXCI7XG5cbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbiA9IF9idXR0b247XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FdmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5Zu+54mH6LSo6YeP5Y6L57ypLOWPquWcqOS4iuS8oOeahOaWh+S7tuaYr+WbvueJh+eahOaXtuWAmeacieaViFxuICAgICAgICAgKiBAcGFyYW0gY29tcHJlc3MgMC0xLOm7mOiupDEs5LiN5Y6L57ypXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29tcHJlc3NcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXByZXNzKF9jb21wcmVzcykge1xuICAgICAgICAgICAgdGhpcy5fY29tcHJlc3MgPSBNYXRoLm1heChNYXRoLm1pbihfY29tcHJlc3MsIDEpLCAwKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDlm77niYfnvKnmlL5cbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICogQHBhcmFtIHNjYWxlXG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic2NhbGVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjYWxlKF9zY2FsZSkge1xuICAgICAgICAgICAgdGhpcy5fc2NhbGUgPSBfc2NhbGU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6K6+572uIHNhdmVLZXlcbiAgICAgICAgICogQHBhcmFtIHNhdmVLZXlcbiAgICAgICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJzYXZlS2V5XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlS2V5KF9zYXZlS2V5KSB7XG4gICAgICAgICAgICB0aGlzLl9zYXZlS2V5ID0gX3NhdmVLZXk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+WVG9rZW7nmoTlnLDlnYBcbiAgICAgICAgICogQHBhcmFtIHRva2VuVXJsXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwidG9rZW5VcmxcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRva2VuVXJsKF90b2tlblVybCkge1xuICAgICAgICAgICAgdGhpcy5fdG9rZW5GdW5jID0gZnVuY3Rpb24gKHVwbG9hZGVyLCB0YXNrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyLnJlcXVlc3RUYXNrVG9rZW4odGFzaywgX3Rva2VuVXJsKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+WVG9rZW7nmoTlh73mlbBcbiAgICAgICAgICogQHBhcmFtIHRva2VuRnVuY1xuICAgICAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInRva2VuRnVuY1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdG9rZW5GdW5jKF90b2tlbkZ1bmMpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuRnVuYyA9IGZ1bmN0aW9uICh1cGxvYWRlciwgdGFzaykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdG9rZW5GdW5jKHJlc29sdmUsIHRhc2spO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDkuIrkvKDnlJ/lkb3lkajmnJ/pkqnlrZBcbiAgICAgICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwibGlzdGVuZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlbmVyKF9saXN0ZW5lcikge1xuICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBfbGlzdGVuZXI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5YiG5LqrdG9rZW4s5aaC5p6c5Li6ZmFsc2Xmr4/kuIrkvKDkuIDkuKrmlofku7bpg73pnIDopoHor7fmsYLkuIDmrKFUb2tlbuOAglxuICAgICAgICAgKiBAcGFyYW0gdG9rZW5TaGFyZVxuICAgICAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInRva2VuU2hhcmVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRva2VuU2hhcmUoX3Rva2VuU2hhcmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rva2VuU2hhcmUgPSBfdG9rZW5TaGFyZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmmK/lkKbliIblnZfkuIrkvKBcbiAgICAgICAgICogQHBhcmFtIGNodW5rIOm7mOiupGZhbHNlXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY2h1bmtcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNodW5rKF9jaHVuaykge1xuICAgICAgICAgICAgdGhpcy5fY2h1bmsgPSBfY2h1bms7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5byA5ZCvZGVidWfmqKHlvI9cbiAgICAgICAgICogQHBhcmFtIGRlYnVnIOm7mOiupGZhbHNlXG4gICAgICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGVidWdcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlYnVnKF9kZWJ1Zykge1xuICAgICAgICAgICAgdGhpcy5faXNEZWJ1ZyA9IF9kZWJ1ZztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiYnVpbGRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRlcl8xLmRlZmF1bHQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRSZXRyeVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXRyeTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldFNpemVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldEF1dG9cIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXV0bztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldE11bHRpcGxlXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0QWNjZXB0XCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2VwdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldEJ1dHRvblwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9idXR0b247XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRCdXR0b25FdmVudE5hbWVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uRXZlbnROYW1lO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0Q29tcHJlc3NcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29tcHJlc3M7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRTY2FsZVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY2FsZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldExpc3RlbmVyXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0U2F2ZUtleVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zYXZlS2V5O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0VG9rZW5GdW5jXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuRnVuYztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldFRva2VuU2hhcmVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5TaGFyZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldENodW5rXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NodW5rO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0SXNEZWJ1Z1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0RlYnVnO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0SW50ZXJjZXB0b3JzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9ycztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldERvbWFpblwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHZhciBkb21haW4gPSB0aGlzLl9kb21haW47XG4gICAgICAgICAgICBpZiAoZG9tYWluID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBkb21haW4gPSBVcGxvYWRlckJ1aWxkZXIuVVBMT0FEX0RPTUFJTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9tYWluICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2NoZW1lID0gdGhpcy5fc2NoZW1lO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2NoZW1lICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWUgPSBwcm90b2NvbC5zdWJzdHJpbmcoMCwgcHJvdG9jb2wubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRvbWFpbiA9IGRvbWFpbltzY2hlbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRvbWFpbi5lbmRzV2l0aCgnLycpID8gZG9tYWluLnN1YnN0cmluZygwLCBkb21haW4ubGVuZ3RoIC0gMSkgOiBkb21haW47XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVXBsb2FkZXJCdWlsZGVyO1xufSgpO1xuXG5VcGxvYWRlckJ1aWxkZXIuTUFYX0NIVU5LX1NJWkUgPSA0ICogMTAyNCAqIDEwMjQ7IC8v5YiG54mH5pyA5aSn5YC8XG5VcGxvYWRlckJ1aWxkZXIuQkxPQ0tfU0laRSA9IFVwbG9hZGVyQnVpbGRlci5NQVhfQ0hVTktfU0laRTsgLy/liIblnZflpKflsI/vvIzlj6rmnInlpKfkuo7ov5nkuKrmlbDmiY3pnIDopoHliIblnZdcblVwbG9hZGVyQnVpbGRlci5VUExPQURfRE9NQUlOID0geyBodHRwOiAnaHR0cDovL3VwbG9hZC5xaW5pdS5jb20nLCBodHRwczogJ2h0dHBzOi8vdXAucWJveC5tZScgfTtcbmV4cG9ydHMuZGVmYXVsdCA9IFVwbG9hZGVyQnVpbGRlcjtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKlxuICog5LiK5Lyg5Lu75YqhXG4gKi9cblxudmFyIEJhc2VUYXNrID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VUYXNrKGZpbGUpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhc2VUYXNrKTtcblxuICAgICAgICB0aGlzLl9yZXRyeSA9IDA7IC8v5bey6YeN6K+V5qyh5pWwXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzID0gMDsgLy/ku7vliqHov5vluqYs5pyA5aSnMTAwXG4gICAgICAgIHRoaXMuX2lzU3VjY2VzcyA9IGZhbHNlOyAvL+aYr+WQpuS4iuS8oOaIkOWKn1xuICAgICAgICB0aGlzLl9pc0ZpbmlzaCA9IGZhbHNlOyAvL+aYr+WQpue7k+adn1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5fY3JlYXRlRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEJhc2VUYXNrLCBbe1xuICAgICAgICBrZXk6IFwiZmlsZVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChmaWxlKSB7XG4gICAgICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInJldHJ5XCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmV0cnkgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImNyZWF0ZURhdGVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZURhdGUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInN0YXJ0RGF0ZVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydERhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydERhdGUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImVuZERhdGVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5kRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuZERhdGUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImlzU3VjY2Vzc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc1N1Y2Nlc3M7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1N1Y2Nlc3MgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInByb2dyZXNzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2dyZXNzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB2YWx1ZSksIDEwMCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZXN1bHRcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJlcnJvclwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJrZXlcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fa2V5ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJpc0ZpbmlzaFwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0ZpbmlzaDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQmFzZVRhc2s7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEJhc2VUYXNrO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFVwbG9hZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuZXhwb3J0cy5VcGxvYWRlciA9IFVwbG9hZGVyXzEuZGVmYXVsdDtcbnZhciBVcGxvYWRlckJ1aWxkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5leHBvcnRzLlVwbG9hZGVyQnVpbGRlciA9IFVwbG9hZGVyQnVpbGRlcl8xLmRlZmF1bHQ7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBTaW1wbGVVcGxvYWRMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW1wbGVVcGxvYWRMaXN0ZW5lcigpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNpbXBsZVVwbG9hZExpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2ltcGxlVXBsb2FkTGlzdGVuZXIsIFt7XG4gICAgICAgIGtleTogXCJvblJlYWR5XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblJlYWR5KHRhc2tRdWV1ZSkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvblN0YXJ0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblN0YXJ0KHRhc2tRdWV1ZSkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvblRhc2tQcm9ncmVzc1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25UYXNrUHJvZ3Jlc3ModGFzaykge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvblRhc2tHZXRLZXlcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uVGFza0dldEtleSh0YXNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uVGFza0ZhaWxcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uVGFza0ZhaWwodGFzaykge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJvblRhc2tTdWNjZXNzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblRhc2tTdWNjZXNzKHRhc2spIHt9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib25UYXNrUmV0cnlcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uVGFza1JldHJ5KHRhc2spIHt9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib25GaW5pc2hcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRmluaXNoKHRhc2tRdWV1ZSkge31cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2ltcGxlVXBsb2FkTGlzdGVuZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNpbXBsZVVwbG9hZExpc3RlbmVyO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcik7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNpbXBsZVVwbG9hZEludGVyY2VwdG9yLCBbe1xuICAgICAgICBrZXk6IFwib25JbnRlcmNlcHRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW50ZXJjZXB0KHRhc2spIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcIm9uSW50ZXJydXB0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkludGVycnVwdCh0YXNrKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3I7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yO1xuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIExvZ18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKlxuICog5YiG5Z2X5LiK5LygXG4gKi9cblxudmFyIENodW5rVXBsb2FkUGF0dGVybiA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDaHVua1VwbG9hZFBhdHRlcm4odXBsb2FkZXIpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENodW5rVXBsb2FkUGF0dGVybik7XG5cbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDaHVua1VwbG9hZFBhdHRlcm4sIFt7XG4gICAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHVwbG9hZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZGVyID0gdXBsb2FkZXI7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ1cGxvYWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZCh0YXNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0YXNrO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRlci5nZXRUb2tlbih0YXNrKS50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgICAgIHRhc2suc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRCbG9jayh0b2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInVwbG9hZEJsb2NrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRCbG9jayh0b2tlbikge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTUxQzZcXHU1OTA3XFx1NUYwMFxcdTU5Q0JcXHU0RTBBXFx1NEYyMFxcdTU3NTdcIik7XG4gICAgICAgICAgICB2YXIgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTUxNzFcIiArIHRoaXMudGFzay5ibG9ja3MubGVuZ3RoICsgXCJcXHU1NzU3XFx1N0I0OVxcdTVGODVcXHU0RTBBXFx1NEYyMFwiKTtcbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTUxNzFcIiArIHRoaXMudGFzay50b3RhbENodW5rQ291bnQgKyBcIlxcdTUyMDZcXHU3MjQ3XFx1N0I0OVxcdTVGODVcXHU0RTBBXFx1NEYyMFwiKTtcbiAgICAgICAgICAgIHRoaXMudGFzay5ibG9ja3MuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2ssIGJsb2NrSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBibG9jay5jaHVua3MuZm9yRWFjaChmdW5jdGlvbiAoY2h1bmssIGNodW5rSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTVGMDBcXHU1OUNCXFx1NEUwQVxcdTRGMjBcXHU3QjJDXCIgKyAoYmxvY2tJbmRleCArIDEpICsgXCJcXHU1NzU3LFxcdTdCMkNcIiArIChjaHVua0luZGV4ICsgMSkgKyBcIlxcdTcyNDdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnVwbG9hZENodW5rKGNodW5rLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGFpbi50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmNvbmNhdENodW5rcyh0b2tlbik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvL+aJgOacieS7u+WKoemDvee7k+adn+S6hlxuICAgICAgICAgICAgICAgIGlmIChfdGhpczIudXBsb2FkZXIuaXNUYXNrUXVldWVGaW5pc2goKSkge1xuICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQoXCJcXHU0RTBBXFx1NEYyMFxcdTRFRkJcXHU1MkExXFx1OTYxRlxcdTUyMTdcXHU1REYyXFx1N0VEM1xcdTY3NUZcIik7XG4gICAgICAgICAgICAgICAgICAgIC8v5pu05pS55Lu75Yqh5omn6KGM5Lit5qCH5b+XXG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci50YXNraW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIC8v55uR5ZCs5Zmo6LCD55SoXG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci5saXN0ZW5lci5vbkZpbmlzaChfdGhpczIudXBsb2FkZXIudGFza1F1ZXVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncoX3RoaXMyLnRhc2suZmlsZS5uYW1lICsgXCJcXHU1MjA2XFx1NTc1N1xcdTRFMEFcXHU0RjIwXFx1NTkzMVxcdThEMjVcIik7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnRhc2suZXJyb3IgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBfdGhpczIudGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBfdGhpczIudGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza0ZhaWwoX3RoaXMyLnRhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ1cGxvYWRDaHVua1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkQ2h1bmsoY2h1bmssIHRva2VuKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNGaXJzdENodW5rSW5CbG9jayA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKSA9PSAwO1xuICAgICAgICAgICAgICAgIHZhciBjaHVua0luZGV4ID0gY2h1bmsuYmxvY2suY2h1bmtzLmluZGV4T2YoY2h1bmspO1xuICAgICAgICAgICAgICAgIC8v5YmN5LiA5LiqY2h1bmss5aaC5p6c5a2Y5Zyo55qE6K+dXG4gICAgICAgICAgICAgICAgdmFyIHByZXZDaHVuayA9IGlzRmlyc3RDaHVua0luQmxvY2sgPyBudWxsIDogY2h1bmsuYmxvY2suY2h1bmtzW2NodW5rSW5kZXggLSAxXTtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gaXNGaXJzdENodW5rSW5CbG9jayA/IF90aGlzMy5nZXRVcGxvYWRCbG9ja1VybChjaHVuay5ibG9jay5kYXRhLnNpemUpIDogX3RoaXMzLmdldFVwbG9hZENodW5rVXJsKGNodW5rLnN0YXJ0LCBwcmV2Q2h1bmsgPyBwcmV2Q2h1bmsuY3R4IDogbnVsbCwgcHJldkNodW5rID8gcHJldkNodW5rLmhvc3QgOiBudWxsKTtcbiAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwgKz0gKC9cXD8vLnRlc3QodXJsKSA/IFwiJlwiIDogXCI/XCIpICsgbmV3IERhdGUoKS5nZXRUaW1lKCksIHRydWUpO1xuICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7IC8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsIFwiVXBUb2tlbiBcIiArIHRva2VuKTsgLy/mt7vliqB0b2tlbumqjOivgeWktFxuICAgICAgICAgICAgICAgIC8v5YiG54mH5LiK5Lyg5LitXG4gICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZCgoX3RoaXMzLnRhc2suZmluaXNoZWRCbG9ja3NTaXplICsgY2h1bmsuc3RhcnQgKyBlLmxvYWRlZCkgLyBfdGhpczMudGFzay5maWxlLnNpemUgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy50YXNrLnByb2dyZXNzIDwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudGFzay5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tQcm9ncmVzcyhfdGhpczMudGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8v5YiG54mH5LiK5Lyg5a6M5oiQXG4gICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoKF90aGlzMy50YXNrLmZpbmlzaGVkQmxvY2tzU2l6ZSArIGNodW5rLnN0YXJ0ICsgY2h1bmsuZGF0YS5zaXplKSAvIF90aGlzMy50YXNrLmZpbGUuc2l6ZSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMudGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczMudGFzay5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKF90aGlzMy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy/lk43lupTov5Tlm55cbiAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwICYmIHhoci5yZXNwb25zZVRleHQgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmN0eCA9IHJlc3VsdC5jdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaG9zdCA9IHJlc3VsdC5ob3N0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfY2h1bmtJbmRleCA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFzTmV4dENodW5rSW5UaGlzQmxvY2sgPSBfY2h1bmtJbmRleCAhPSBjaHVuay5ibG9jay5jaHVua3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc05leHRDaHVua0luVGhpc0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmJsb2NrLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuYmxvY2sucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChjaHVuay5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29uY2F0Q2h1bmtzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25jYXRDaHVua3ModG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBlbmNvZGVkS2V5ID0gX3RoaXM0LnRhc2sua2V5ID8gYnRvYShfdGhpczQudGFzay5rZXkpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAvLyDlronlhajlrZfnrKbkuLIg5Y+C6ICD77yaaHR0cHM6Ly9kZXZlbG9wZXIucWluaXUuY29tL2tvZG8vYXBpL21rZmlsZVxuICAgICAgICAgICAgICAgIGlmIChlbmNvZGVkS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVuY29kZWRLZXkgPSBlbmNvZGVkS2V5LnJlcGxhY2UoL1xcKy9nLCAnLScpO1xuICAgICAgICAgICAgICAgICAgICBlbmNvZGVkS2V5ID0gZW5jb2RlZEtleS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IF90aGlzNC5nZXRNYWtlRmlsZVVybChfdGhpczQudGFzay5maWxlLnNpemUsIGVuY29kZWRLZXkpO1xuICAgICAgICAgICAgICAgIC8v5p6E5bu65omA5pyJ5pWw5o2u5Z2X5pyA5ZCO5LiA5Liq5pWw5o2u54mH5LiK5Lyg5ZCO5b6X5Yiw55qEPGN0eD7nmoTnu4TlkIjmiJDnmoTliJfooajlrZfnrKbkuLJcbiAgICAgICAgICAgICAgICB2YXIgY3R4TGlzdFN0cmluZyA9ICcnO1xuICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBfdGhpczQudGFzay5ibG9ja3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RDaHVuayA9IGJsb2NrLmNodW5rc1tibG9jay5jaHVua3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHhMaXN0U3RyaW5nICs9IGxhc3RDaHVuay5jdHggKyAnLCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjdHhMaXN0U3RyaW5nLmVuZHNXaXRoKCcsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4TGlzdFN0cmluZyA9IGN0eExpc3RTdHJpbmcuc3Vic3RyaW5nKDAsIGN0eExpc3RTdHJpbmcubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCArPSAoL1xcPy8udGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L3BsYWluJyk7IC8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsIFwiVXBUb2tlbiBcIiArIHRva2VuKTsgLy/mt7vliqB0b2tlbumqjOivgeWktFxuICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQudGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDAgJiYgeGhyLnJlc3BvbnNlVGV4dCAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC50YXNrLmlzU3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM0LnRhc2sucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC50YXNrLmVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC51cGxvYWRlci5saXN0ZW5lci5vblRhc2tTdWNjZXNzKF90aGlzNC50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNC5yZXRyeVRhc2soX3RoaXM0LnRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC53KF90aGlzNC50YXNrLmZpbGUubmFtZSArIFwiXFx1NTIwNlxcdTU3NTdcXHU0RTBBXFx1NEYyMFxcdTU5MzFcXHU4RDI1LFxcdTUxQzZcXHU1OTA3XFx1NUYwMFxcdTU5Q0JcXHU5MUNEXFx1NEYyMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczQudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkoX3RoaXM0LnRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoY3R4TGlzdFN0cmluZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W5Z2X5LiK5Lyg55qEdXJsXG4gICAgICAgICAqIEBwYXJhbSBibG9ja1NpemVcbiAgICAgICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJnZXRVcGxvYWRCbG9ja1VybFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXBsb2FkQmxvY2tVcmwoYmxvY2tTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRlci5kb21haW4gKyBcIi9ta2Jsay9cIiArIGJsb2NrU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W54mH5LiK5Lyg55qEdXJsXG4gICAgICAgICAqIEBwYXJhbSBzdGFydCDniYfnmoTlnKjlnZfkuK3nmoTotbflp4vkvY3nva5cbiAgICAgICAgICogQHBhcmFtIGN0eCDliY3kuIDmrKHkuIrkvKDov5Tlm57nmoTlnZfnuqfkuIrkvKDmjqfliLbkv6Hmga/jgIJcbiAgICAgICAgICogQHBhcmFtIGhvc3Qg5oyH5a6aaG9zdFxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldFVwbG9hZENodW5rVXJsXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVcGxvYWRDaHVua1VybChzdGFydCwgY3R4LCBob3N0KSB7XG4gICAgICAgICAgICByZXR1cm4gKGhvc3QgPyBob3N0IDogdGhpcy51cGxvYWRlci5kb21haW4pICsgXCIvYnB1dC9cIiArIGN0eCArIFwiL1wiICsgc3RhcnQgKyBcIi9cIjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6I635Y+W5ZCI5bm25Z2X5Li65paH5Lu255qEdXJsXG4gICAgICAgICAqIEBwYXJhbSBmaWxlU2l6ZSDmlofku7blpKflsI9cbiAgICAgICAgICogQHBhcmFtIGVuY29kZWRLZXkgYmFzZTY0VXJsRW5jb2Rl5ZCO55qE6LWE5rqQ5ZCN56ewLOiLpeacquaMh+Wumu+8jOWImeS9v+eUqHNhdmVLZXnvvJvoi6XmnKrmjIflrppzYXZlS2V577yM5YiZ5L2/55So6LWE5rqQ5YaF5a6555qEU0hBMeWAvOS9nOS4uui1hOa6kOWQjeOAglxuICAgICAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdldE1ha2VGaWxlVXJsXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNYWtlRmlsZVVybChmaWxlU2l6ZSwgZW5jb2RlZEtleSkge1xuICAgICAgICAgICAgaWYgKGVuY29kZWRLZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRlci5kb21haW4gKyBcIi9ta2ZpbGUvXCIgKyBmaWxlU2l6ZSArIFwiL2tleS9cIiArIGVuY29kZWRLZXk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZGVyLmRvbWFpbiArIFwiL21rZmlsZS9cIiArIGZpbGVTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmV0cnlUYXNrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXRyeVRhc2sodGFzaykge1xuICAgICAgICAgICAgLy/ovr7liLDph43or5XmrKHmlbBcbiAgICAgICAgICAgIGlmICh0YXNrLnJldHJ5ID49IHRoaXMudXBsb2FkZXIucmV0cnkpIHtcbiAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdThGQkVcXHU1MjMwXFx1OTFDRFxcdTRGMjBcXHU2QjIxXFx1NjU3MFxcdTRFMEFcXHU5NjUwXCIgKyB0aGlzLnVwbG9hZGVyLnJldHJ5ICsgXCIsXFx1NTA1Q1xcdTZCNjJcXHU5MUNEXFx1NEYyMFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrLnJldHJ5Kys7XG4gICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjAsXFx1NUY1M1xcdTUyNERcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXCIgKyB0YXNrLnJldHJ5KTtcbiAgICAgICAgICAgIC8vIHRoaXMudXBsb2FkKHRhc2spO1xuICAgICAgICAgICAgLy90b2RvXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDaHVua1VwbG9hZFBhdHRlcm47XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IENodW5rVXBsb2FkUGF0dGVybjtcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBMb2dfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKipcbiAqIOebtOaOpeS4iuS8oFxuICovXG5cbnZhciBEaXJlY3RVcGxvYWRQYXR0ZXJuID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpcmVjdFVwbG9hZFBhdHRlcm4odXBsb2FkZXIpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpcmVjdFVwbG9hZFBhdHRlcm4pO1xuXG4gICAgICAgIHRoaXMudXBsb2FkZXIgPSB1cGxvYWRlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICog5a6e546w5o6l5Y+j55qE5LiK5Lyg5pa55rOVXG4gICAgICogQHBhcmFtIHRhc2tcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKERpcmVjdFVwbG9hZFBhdHRlcm4sIFt7XG4gICAgICAgIGtleTogXCJ1cGxvYWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZCh0YXNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0YXNrO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRlci5nZXRUb2tlbih0YXNrKS50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgICAgIHRhc2suc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRGaWxlKHRva2VuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDliJvlu7rooajljZVcbiAgICAgICAgICogQHBhcmFtIHRva2VuXG4gICAgICAgICAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjcmVhdGVGb3JtRGF0YVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRm9ybURhdGEodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy50YXNrO1xuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICAvL2tleeWtmOWcqO+8jOa3u+WKoOWIsGZvcm1EYXRh5Lit77yM6Iul5LiN6K6+572u77yM5LiD54mb5pyN5Yqh5Zmo5Lya6Ieq5Yqo55Sf5oiQaGFzaCBrZXlcbiAgICAgICAgICAgIGlmICh0YXNrLmtleSAhPT0gbnVsbCAmJiB0YXNrLmtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCB0YXNrLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgdG9rZW4pO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGFzay5maWxlKTtcbiAgICAgICAgICAgIExvZ18xLmRlZmF1bHQuZChcIlxcdTUyMUJcXHU1RUZBZm9ybURhdGFcXHU1QkY5XFx1OEM2MVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5LiK5Lyg5paH5Lu2XG4gICAgICAgICAqIEBwYXJhbSB0b2tlblxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInVwbG9hZEZpbGVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwbG9hZEZpbGUodG9rZW4pIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIC8v5LiK5Lyg5LitXG4gICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChlLmxvYWRlZCAqIDEwMCAvIGUudG90YWwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUHJvZ3Jlc3ModGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy/kuIrkvKDlrozmiJBcbiAgICAgICAgICAgIHhoci51cGxvYWQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnByb2dyZXNzIDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sucHJvZ3Jlc3MgPSAxMDA7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci5saXN0ZW5lci5vblRhc2tQcm9ncmVzcyh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMudXBsb2FkZXIuZG9tYWluO1xuICAgICAgICAgICAgLy/pgb/lhY3mtY/op4jlmajnvJPlrZhodHRw6K+35rGCXG4gICAgICAgICAgICB1cmwgKz0gKC9cXD8vLnRlc3QodGhpcy51cGxvYWRlci5kb21haW4pID8gXCImXCIgOiBcIj9cIikgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwICYmIHhoci5yZXNwb25zZVRleHQgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sucmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaXNTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci5saXN0ZW5lci5vblRhc2tTdWNjZXNzKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5yZXRyeVRhc2sodGFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ18xLmRlZmF1bHQudyh0YXNrLmZpbGUubmFtZSArIFwiXFx1NEUwQVxcdTRGMjBcXHU1OTMxXFx1OEQyNSxcXHU1MUM2XFx1NTkwN1xcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkodGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdTRFMEFcXHU0RjIwXFx1NTkzMVxcdThEMjVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmVycm9yID0geGhyLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci5saXN0ZW5lci5vblRhc2tGYWlsKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8v5omA5pyJ5Lu75Yqh6YO957uT5p2f5LqGXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIudXBsb2FkZXIuaXNUYXNrUXVldWVGaW5pc2goKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/mm7TmlLnku7vliqHmiafooYzkuK3moIflv5dcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi51cGxvYWRlci50YXNraW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL29uRmluaXNoIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIudXBsb2FkZXIubGlzdGVuZXIub25GaW5pc2goX3RoaXMyLnVwbG9hZGVyLnRhc2tRdWV1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gdGhpcy5jcmVhdGVGb3JtRGF0YSh0b2tlbik7XG4gICAgICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgICAgICAgICBMb2dfMS5kZWZhdWx0LmQoXCLlj5HpgIFhamF4IHBvc3Qg6K+35rGCXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDph43kvKBcbiAgICAgICAgICogQHBhcmFtIHRhc2tcbiAgICAgICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicmV0cnlUYXNrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXRyeVRhc2sodGFzaykge1xuICAgICAgICAgICAgTG9nXzEuZGVmYXVsdC5kKFwi5byA5aeL5bCd6K+V6YeN5LygXCIpO1xuICAgICAgICAgICAgLy/ovr7liLDph43or5XmrKHmlbBcbiAgICAgICAgICAgIGlmICh0YXNrLnJldHJ5ID49IHRoaXMudXBsb2FkZXIucmV0cnkpIHtcbiAgICAgICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdThGQkVcXHU1MjMwXFx1OTFDRFxcdTRGMjBcXHU2QjIxXFx1NjU3MFxcdTRFMEFcXHU5NjUwXCIgKyB0aGlzLnVwbG9hZGVyLnJldHJ5ICsgXCIsXFx1NTA1Q1xcdTZCNjJcXHU5MUNEXFx1NEYyMFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrLnJldHJ5Kys7XG4gICAgICAgICAgICBMb2dfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjAsXFx1NUY1M1xcdTUyNERcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXCIgKyB0YXNrLnJldHJ5KTtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkKHRhc2spO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRGlyZWN0VXBsb2FkUGF0dGVybjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0VXBsb2FkUGF0dGVybjtcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEJhc2VUYXNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuLyoqXG4gKiDliIblnZfku7vliqFcbiAqL1xuXG52YXIgQ2h1bmtUYXNrID0gZnVuY3Rpb24gKF9CYXNlVGFza18xJGRlZmF1bHQpIHtcbiAgICBfaW5oZXJpdHMoQ2h1bmtUYXNrLCBfQmFzZVRhc2tfMSRkZWZhdWx0KTtcblxuICAgIC8qKlxuICAgICAqIOaehOmAoOWHveaVsFxuICAgICAqIEBwYXJhbSBmaWxlXG4gICAgICogQHBhcmFtIGJsb2NrU2l6ZSDlnZflpKflsI9cbiAgICAgKiBAcGFyYW0gY2h1bmtTaXplIOeJh+Wkp+Wwj1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIENodW5rVGFzayhmaWxlLCBibG9ja1NpemUsIGNodW5rU2l6ZSkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2h1bmtUYXNrKTtcblxuICAgICAgICAvL+WIhuWdl1xuICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2h1bmtUYXNrLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2h1bmtUYXNrKSkuY2FsbCh0aGlzLCBmaWxlKSk7XG5cbiAgICAgICAgX3RoaXMuX2Jsb2NrcyA9IFtdO1xuICAgICAgICBfdGhpcy5fYmxvY2tTaXplID0gMDtcbiAgICAgICAgX3RoaXMuX2NodW5rU2l6ZSA9IDA7XG4gICAgICAgIF90aGlzLl9ibG9ja1NpemUgPSBibG9ja1NpemU7XG4gICAgICAgIF90aGlzLl9jaHVua1NpemUgPSBjaHVua1NpemU7XG4gICAgICAgIF90aGlzLnNwbGljZUZpbGUyQmxvY2soKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDlsIbmlofku7bliIblnZdcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKENodW5rVGFzaywgW3tcbiAgICAgICAga2V5OiBcInNwbGljZUZpbGUyQmxvY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNwbGljZUZpbGUyQmxvY2soKSB7XG4gICAgICAgICAgICB0aGlzLl9ibG9ja3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBmaWxlU2l6ZSA9IHRoaXMuX2ZpbGUuc2l6ZTtcbiAgICAgICAgICAgIHZhciBmaWxlID0gdGhpcy5fZmlsZTtcbiAgICAgICAgICAgIC8v5oC75Z2X5pWwXG4gICAgICAgICAgICB2YXIgYmxvY2tDb3VudCA9IE1hdGguY2VpbChmaWxlU2l6ZSAvIHRoaXMuX2Jsb2NrU2l6ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJsb2NrQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGkgKiB0aGlzLl9ibG9ja1NpemU7IC8v6LW35aeL5L2N572uXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IHN0YXJ0ICsgdGhpcy5fYmxvY2tTaXplOyAvL+e7k+adn+S9jee9rlxuICAgICAgICAgICAgICAgIC8v5p6E6YCg5LiA5Liq5Z2X5a6e5L6LXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gbmV3IEJsb2NrKHN0YXJ0LCBlbmQsIGZpbGUuc2xpY2Uoc3RhcnQsIGVuZCksIHRoaXMuX2NodW5rU2l6ZSwgZmlsZSk7XG4gICAgICAgICAgICAgICAgLy/mt7vliqDliLDmlbDnu4TkuK1cbiAgICAgICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaChibG9jayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPluaJgOacieeahGJsb2NrXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ja1tdfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImJsb2Nrc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ibG9ja3M7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPluato+WcqOWkhOeQhueahGJsb2NrXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ja31cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJwcm9jZXNzaW5nQmxvY2tcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLl9ibG9ja3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghYmxvY2sucHJvY2Vzc2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IEVycm9yKFwi5om+5LiN5Yiw5q2j5Zyo5aSE55CG55qEQmxvY2tcIik7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJmaW5pc2hlZEJsb2Nrc1NpemVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IDA7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGhpcy5fYmxvY2tzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXAyOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gKF9zdGVwMiA9IF9pdGVyYXRvcjIubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBzaXplICs9IGJsb2NrLmlzRmluaXNoID8gYmxvY2suZGF0YS5zaXplIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjaHVua3NcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLl9ibG9ja3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gX3N0ZXAzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjQgPSBibG9jay5jaHVua3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDQ7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQgPSAoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNCA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBfc3RlcDQudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I0ID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb240ICYmIF9pdGVyYXRvcjQucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjQucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5bmraPlnKjlpITnkIbnmoRjaHVua1xuICAgICAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicHJvY2Vzc2luZ0NodW5rXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjUgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNSA9IHRoaXMuX2Jsb2Nrc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNTsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSA9IChfc3RlcDUgPSBfaXRlcmF0b3I1Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb241ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfc3RlcDUudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFibG9jay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3I2ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjYgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjYgPSBibG9jay5jaHVua3NbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDY7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjYgPSAoX3N0ZXA2ID0gX2l0ZXJhdG9yNi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2h1bmsgPSBfc3RlcDYudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNodW5rLnByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjYgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3I2ID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb242ICYmIF9pdGVyYXRvcjYucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjYucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3I2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yNSA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNSAmJiBfaXRlcmF0b3I1LnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNS5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCLmib7kuI3liLDmraPlnKjlpITnkIbnmoRDaHVua1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5oC75YWx5YiG54mH5pWw6YePKOaJgOacieWIhuWdl+eahOWIhueJh+aVsOmHj+aAu+WSjClcbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ0b3RhbENodW5rQ291bnRcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjcgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yNyA9IHRoaXMuX2Jsb2Nrc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwNzsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyA9IChfc3RlcDcgPSBfaXRlcmF0b3I3Lm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb243ID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfc3RlcDcudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gYmxvY2suY2h1bmtzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yNyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uNyAmJiBfaXRlcmF0b3I3LnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yNy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yNztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENodW5rVGFzaztcbn0oQmFzZVRhc2tfMS5kZWZhdWx0KTtcblxuZXhwb3J0cy5DaHVua1Rhc2sgPSBDaHVua1Rhc2s7XG4vKipcbiAqIOWIhuWdl++8jOWIhuWdl+Wkp+Wwj+S4g+eJm+WbuuWumuaYrzRNXG4gKi9cblxudmFyIEJsb2NrID0gZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IOi1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBlbmQg57uT5p2f5L2N572uXG4gICAgICogQHBhcmFtIGRhdGEg5Z2X5pWw5o2uXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDliIbniYfmlbDmja7nmoTmnIDlpKflpKflsI9cbiAgICAgKiBAcGFyYW0gZmlsZSDliIblnZfmiYDlsZ7mlofku7ZcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCbG9jayhzdGFydCwgZW5kLCBkYXRhLCBjaHVua1NpemUsIGZpbGUpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJsb2NrKTtcblxuICAgICAgICB0aGlzLl9jaHVua3MgPSBbXTtcbiAgICAgICAgdGhpcy5faXNGaW5pc2ggPSBmYWxzZTsgLy/mmK/lkKbkuIrkvKDlrozmiJBcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2luZyA9IGZhbHNlOyAvL+aYr+WQpuato+WcqOS4iuS8oFxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5fZW5kID0gZW5kO1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5zcGxpY2VCbG9jazJDaHVuayhjaHVua1NpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDlsIblnZfliIbniYdcbiAgICAgKi9cblxuXG4gICAgX2NyZWF0ZUNsYXNzKEJsb2NrLCBbe1xuICAgICAgICBrZXk6IFwic3BsaWNlQmxvY2syQ2h1bmtcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNwbGljZUJsb2NrMkNodW5rKGNodW5rU2l6ZSkge1xuICAgICAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IHRoaXMuX2RhdGEuc2l6ZTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YTtcbiAgICAgICAgICAgIC8v5oC754mH5pWwXG4gICAgICAgICAgICB2YXIgY2h1bmtDb3VudCA9IE1hdGguY2VpbChibG9ja1NpemUgLyBjaHVua1NpemUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaHVua0NvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBpICogY2h1bmtTaXplOyAvL+i1t+Wni+S9jee9rlxuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIGNodW5rU2l6ZTsgLy/nu5PmnZ/kvY3nva5cbiAgICAgICAgICAgICAgICAvL+aehOmAoOS4gOS4queJh+WunuS+i1xuICAgICAgICAgICAgICAgIHZhciBjaHVuayA9IG5ldyBDaHVuayhzdGFydCwgZW5kLCBkYXRhLnNsaWNlKHN0YXJ0LCBlbmQpLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAvL+a3u+WKoOWIsOaVsOe7hOS4rVxuICAgICAgICAgICAgICAgIHRoaXMuX2NodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5LiK5Lyg5LitXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInByb2Nlc3NpbmdcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NpbmcgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5YiG5Z2X5omA5bGe55qE5paH5Lu2XG4gICAgICAgICAqIEByZXR1cm5zIHtGaWxlfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImZpbGVcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5bey57uP57uT5p2fXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImlzRmluaXNoXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzRmluaXNoO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5faXNGaW5pc2ggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5YiG5Z2X5pWw5o2uXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ifVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRhdGFcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5a2X6IqC6LW35aeL5L2N572uXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3RhcnRcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIOi/lOWbnuWtl+iKgue7k+adn+S9jee9rlxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImVuZFwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbmQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJjaHVua3NcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2h1bmtzO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEJsb2NrO1xufSgpO1xuXG5leHBvcnRzLkJsb2NrID0gQmxvY2s7XG4vKipcbiAqIOWIhueJh++8jOWIhueJh+Wkp+Wwj+WPr+S7peiHquWumuS5ie+8jOiHs+WwkTHlrZfoioJcbiAqL1xuXG52YXIgQ2h1bmsgPSBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnQg5a2X6IqC6LW35aeL5L2N572uXG4gICAgICogQHBhcmFtIGVuZCDlrZfoioLnu5PmnZ/kvY3nva5cbiAgICAgKiBAcGFyYW0gZGF0YSDliIbniYfmlbDmja5cbiAgICAgKiBAcGFyYW0gYmxvY2sg5YiG5Z2X5a+56LGhXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2h1bmsoc3RhcnQsIGVuZCwgZGF0YSwgYmxvY2spIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENodW5rKTtcblxuICAgICAgICB0aGlzLl9wcm9jZXNzaW5nID0gZmFsc2U7IC8v5piv5ZCm5q2j5Zyo5LiK5LygXG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gZmFsc2U7IC8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX2VuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX2Jsb2NrID0gYmxvY2s7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOi/lOWbnmNodW5r5omA5bGe55qEQmxvY2vlr7nosaFcbiAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICovXG5cblxuICAgIF9jcmVhdGVDbGFzcyhDaHVuaywgW3tcbiAgICAgICAga2V5OiBcImJsb2NrXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jsb2NrO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDov5Tlm57lrZfoioLotbflp4vkvY3nva5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJzdGFydFwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5a2X6IqC57uT5p2f5L2N572uXG4gICAgICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZW5kXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5YiG54mH5pWw5o2uXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ifVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRhdGFcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5bey57uP57uT5p2fXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImlzRmluaXNoXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzRmluaXNoO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5faXNGaW5pc2ggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImhvc3RcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faG9zdDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2hvc3QgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5LiK5Lyg5LitXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInByb2Nlc3NpbmdcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NpbmcgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5LiK5Lyg5o6n5Yi25L+h5oGvKOS4g+eJm+acjeWKoeWZqOi/lOWbnuWJjeS4gOasoeS4iuS8oOi/lOWbnueahOWIhueJh+S4iuS8oOaOp+WItuS/oeaBryznlKjkuo7kuIvkuIDmrKHkuIrkvKAs56ys5LiA5LiqY2h1bmvmraTlgLzkuLrnqbopXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY3R4XCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N0eDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2N0eCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENodW5rO1xufSgpO1xuXG5leHBvcnRzLkNodW5rID0gQ2h1bms7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgQmFzZVRhc2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG4vKipcbiAqIOebtOS8oOS7u+WKoVxuICovXG5cbnZhciBEaXJlY3RUYXNrID0gZnVuY3Rpb24gKF9CYXNlVGFza18xJGRlZmF1bHQpIHtcbiAgX2luaGVyaXRzKERpcmVjdFRhc2ssIF9CYXNlVGFza18xJGRlZmF1bHQpO1xuXG4gIGZ1bmN0aW9uIERpcmVjdFRhc2soKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERpcmVjdFRhc2spO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEaXJlY3RUYXNrLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGlyZWN0VGFzaykpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgcmV0dXJuIERpcmVjdFRhc2s7XG59KEJhc2VUYXNrXzEuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERpcmVjdFRhc2s7XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXG52YXIgVVVJRCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVVUlEKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVVVJRCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFVVSUQsIG51bGwsIFt7XG4gICAgICAgIGtleTogXCJ1dWlkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1dWlkKCkge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XG4gICAgICAgICAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IHIgJiAweDMgfCAweDgpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFVVSUQ7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFVVSUQ7XG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vLyAvKipcbi8vICAqIE9iamVjdC5hc3NpZ24gcG9seWZpbGxcbi8vICAqL1xuLy8gaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9ICdmdW5jdGlvbicpIHtcbi8vICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuLy8gICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbi8vICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuLy8gICAgICAgICB9XG4vL1xuLy8gICAgICAgICB0YXJnZXQgPSBPYmplY3QodGFyZ2V0KTtcbi8vICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbi8vICAgICAgICAgICAgIGxldCBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuLy8gICAgICAgICAgICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4vLyAgICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHNvdXJjZSkge1xuLy8gICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuLy8gICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbi8vICAgICAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXR1cm4gdGFyZ2V0O1xuLy8gICAgIH07XG4vLyB9XG4vL1xuLy8gLyoqXG4vLyAgKiBjYW52YXMudG9CbG9iIHBvbHlmaWxsXG4vLyAgKi9cbi8vIGlmICghSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvQmxvYikge1xuLy8gICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUsICd0b0Jsb2InLCB7XG4vLyAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoY2FsbGJhY2ssIHR5cGUsIHF1YWxpdHkpIHtcbi8vXG4vLyAgICAgICAgICAgICBsZXQgYmluU3RyID0gYXRvYih0aGlzLnRvRGF0YVVSTCh0eXBlLCBxdWFsaXR5KS5zcGxpdCgnLCcpWzFdKSxcbi8vICAgICAgICAgICAgICAgICBsZW4gPSBiaW5TdHIubGVuZ3RoLFxuLy8gICAgICAgICAgICAgICAgIGFyciA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4vL1xuLy8gICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuLy8gICAgICAgICAgICAgICAgIGFycltpXSA9IGJpblN0ci5jaGFyQ29kZUF0KGkpO1xuLy8gICAgICAgICAgICAgfVxuLy9cbi8vICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBCbG9iKFthcnJdLCB7dHlwZTogdHlwZSB8fCAnaW1hZ2UvcG5nJ30pKTtcbi8vICAgICAgICAgfVxuLy8gICAgIH0pO1xuLy8gfVxuLy9cbi8vIC8qKlxuLy8gICogZW5kc1dpdGggcG9seWZpbGxcbi8vICAqL1xuLy8gaWYgKCFTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoKSB7XG4vLyAgICAgbGV0IHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG4vLyAgICAgbGV0IGVuZHNXaXRoID0gZnVuY3Rpb24gKHNlYXJjaCkge1xuLy8gICAgICAgICBpZiAodGhpcyA9PSBudWxsKSB7XG4vLyAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBsZXQgc3RyaW5nID0gU3RyaW5nKHRoaXMpO1xuLy8gICAgICAgICBpZiAoc2VhcmNoICYmIHRvU3RyaW5nLmNhbGwoc2VhcmNoKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuLy8gICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgbGV0IHN0cmluZ0xlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG4vLyAgICAgICAgIGxldCBzZWFyY2hTdHJpbmcgPSBTdHJpbmcoc2VhcmNoKTtcbi8vICAgICAgICAgbGV0IHNlYXJjaExlbmd0aCA9IHNlYXJjaFN0cmluZy5sZW5ndGg7XG4vLyAgICAgICAgIGxldCBwb3MgPSBzdHJpbmdMZW5ndGg7XG4vLyAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuLy8gICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gYXJndW1lbnRzWzFdO1xuLy8gICAgICAgICAgICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbi8vICAgICAgICAgICAgICAgICAvLyBgVG9JbnRlZ2VyYFxuLy8gICAgICAgICAgICAgICAgIHBvcyA9IHBvc2l0aW9uID8gTnVtYmVyKHBvc2l0aW9uKSA6IDA7XG4vLyAgICAgICAgICAgICAgICAgaWYgKHBvcyAhPSBwb3MpIHsgLy8gYmV0dGVyIGBpc05hTmBcbi8vICAgICAgICAgICAgICAgICAgICAgcG9zID0gMDtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKE1hdGgubWF4KHBvcywgMCksIHN0cmluZ0xlbmd0aCk7XG4vLyAgICAgICAgIGxldCBzdGFydCA9IGVuZCAtIHNlYXJjaExlbmd0aDtcbi8vICAgICAgICAgaWYgKHN0YXJ0IDwgMCkge1xuLy8gICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGxldCBpbmRleCA9IC0xO1xuLy8gICAgICAgICB3aGlsZSAoKytpbmRleCA8IHNlYXJjaExlbmd0aCkge1xuLy8gICAgICAgICAgICAgaWYgKHN0cmluZy5jaGFyQ29kZUF0KHN0YXJ0ICsgaW5kZXgpICE9IHNlYXJjaFN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICByZXR1cm4gdHJ1ZTtcbi8vICAgICB9O1xuLy8gICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHtcbi8vICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZy5wcm90b3R5cGUsICdlbmRzV2l0aCcsIHtcbi8vICAgICAgICAgICAgICd2YWx1ZSc6IGVuZHNXaXRoLFxuLy8gICAgICAgICAgICAgJ2NvbmZpZ3VyYWJsZSc6IHRydWUsXG4vLyAgICAgICAgICAgICAnd3JpdGFibGUnOiB0cnVlXG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGggPSBlbmRzV2l0aDtcbi8vICAgICB9XG4vLyB9IFxuXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBxaW5pdTRqcy5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBpZGVudGl0eSBmdW5jdGlvbiBmb3IgY2FsbGluZyBoYXJtb255IGltcG9ydHMgd2l0aCB0aGUgY29ycmVjdCBjb250ZXh0XG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDYzNjJkZDQ5MGU1NzRjZDNkY2ZmIiwiY2xhc3MgTG9nIHtcbiAgICBwdWJsaWMgc3RhdGljIF9lbmFibGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gICAgc3RhdGljIGdldCBlbmFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmFibGU7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldCBlbmFibGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fZW5hYmxlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBkKG9iamVjdDogYW55KSB7XG4gICAgICAgIGlmICghTG9nLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmRlYnVnKG9iamVjdCk7XG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgbChvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIUxvZy5fZW5hYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2cob2JqZWN0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGUob2JqZWN0OiBhbnkpIHtcbiAgICAgICAgaWYgKCFMb2cuX2VuYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZXJyb3Iob2JqZWN0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHcob2JqZWN0OiBhbnkpIHtcbiAgICAgICAgaWYgKCFMb2cuX2VuYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUud2FybihvYmplY3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaShvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIUxvZy5fZW5hYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5pbmZvKG9iamVjdCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2c7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWwvTG9nLnRzIiwiaW1wb3J0IEJhc2VUYXNrIGZyb20gXCIuL3Rhc2svQmFzZVRhc2tcIjtcbmltcG9ydCBEaXJlY3RUYXNrIGZyb20gXCIuL3Rhc2svRGlyZWN0VGFza1wiO1xuaW1wb3J0IHtDaHVua1Rhc2t9IGZyb20gXCIuL3Rhc2svQ2h1bmtUYXNrXCI7XG5pbXBvcnQgVG9rZW5GdW5jIGZyb20gXCIuL1Rva2VuRnVuY1wiO1xuaW1wb3J0IFVVSUQgZnJvbSBcIi4vdXVpZC9VVUlEXCI7XG5pbXBvcnQgVXBsb2FkZXJCdWlsZGVyIGZyb20gXCIuL1VwbG9hZGVyQnVpbGRlclwiO1xuaW1wb3J0IGxvZyBmcm9tIFwiLi4vdXRpbC9Mb2dcIjtcbmltcG9ydCBJbnRlcmNlcHRvciBmcm9tIFwiLi9pbnRlcmNlcHRvci9VcGxvYWRJbnRlcmNlcHRvclwiO1xuaW1wb3J0IFVwbG9hZExpc3RlbmVyIGZyb20gXCIuL2hvb2svVXBsb2FkTGlzdGVuZXJcIjtcbmltcG9ydCBTaW1wbGVVcGxvYWRMaXN0ZW5lciBmcm9tIFwiLi9ob29rL1NpbXBsZVVwbG9hZExpc3RlbmVyXCI7XG5pbXBvcnQgRGlyZWN0VXBsb2FkUGF0dGVybiBmcm9tIFwiLi9wYXR0cmVuL0RpcmVjdFVwbG9hZFBhdHRlcm5cIjtcbmltcG9ydCBDaHVua1VwbG9hZFBhdHRlcm4gZnJvbSBcIi4vcGF0dHJlbi9DaHVua1VwbG9hZFBhdHRlcm5cIjtcbmltcG9ydCBcIi4uL3V0aWwvUG9seWZpbGxcIjtcblxuY2xhc3MgVXBsb2FkZXIge1xuICAgIHByaXZhdGUgRklMRV9JTlBVVF9FTF9JRDogc3RyaW5nID0gJ3Fpbml1NGpzLWlucHV0JztcbiAgICBwcml2YXRlIF9maWxlSW5wdXRJZDogc3RyaW5nO1xuICAgIHByaXZhdGUgX2ZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudDsvL2lucHV0IOWFg+e0oFxuICAgIHByaXZhdGUgX3Rva2VuOiBzdHJpbmc7Ly90b2tlblxuICAgIHByaXZhdGUgX3Rhc2tRdWV1ZTogQmFzZVRhc2tbXSA9IFtdOy8v5Lu75Yqh6Zif5YiXXG4gICAgcHJpdmF0ZSBfdGFza2luZzogYm9vbGVhbiA9IGZhbHNlOy8v5Lu75Yqh5omn6KGM5LitXG5cbiAgICBwcml2YXRlIF9yZXRyeTogbnVtYmVyOy8v5pyA5aSn6YeN6K+V5qyh5pWwXG4gICAgcHJpdmF0ZSBfc2l6ZTogbnVtYmVyOy8v5YiG54mH5aSn5bCPLOWNleS9jeWtl+iKgizmnIDlpKc0bWIs5LiN6IO95Li6MFxuICAgIHByaXZhdGUgX2NodW5rOiBib29sZWFuOy8v5YiG5Z2X5LiK5LygLOivpemAiemhueW8gOWQr+WQju+8jOWPquacieWcqOaWh+S7tuWkp+S6jjRtYueahOaXtuWAmeaJjeS8muWIhuWdl+S4iuS8oFxuICAgIHByaXZhdGUgX2F1dG86IGJvb2xlYW47Ly/oh6rliqjkuIrkvKAs5q+P5qyh6YCJ5oup5paH5Lu25ZCOXG4gICAgcHJpdmF0ZSBfbXVsdGlwbGU6IGJvb2xlYW47Ly/mmK/lkKbmlK/mjIHlpJrmlofku7ZcbiAgICBwcml2YXRlIF9hY2NlcHQ6IHN0cmluZ1tdOy8v5o6l5Y+X55qE5paH5Lu257G75Z6LXG4gICAgcHJpdmF0ZSBfYnV0dG9uOiBzdHJpbmc7Ly/kuIrkvKDmjInpkq5cbiAgICBwcml2YXRlIF9idXR0b25FdmVudE5hbWU6IHN0cmluZzsvL+S4iuS8oOaMiemSrueahOebkeWQrOS6i+S7tuWQjeensFxuICAgIHByaXZhdGUgX2NvbXByZXNzOiBudW1iZXI7Ly/lm77niYfljovnvKnotKjph49cbiAgICBwcml2YXRlIF9zY2FsZTogbnVtYmVyW10gPSBbXTsvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5TnvKnmlL5baDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5TnvKnmlL5baDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgcHJpdmF0ZSBfbGlzdGVuZXI6IFVwbG9hZExpc3RlbmVyOy8v55uR5ZCs5ZmoXG4gICAgcHJpdmF0ZSBfc2F2ZUtleTogYm9vbGVhbiB8IHN0cmluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3Rva2VuRnVuYzogVG9rZW5GdW5jOy8vdG9rZW7ojrflj5blh73mlbBcbiAgICBwcml2YXRlIF90b2tlblNoYXJlOiBib29sZWFuOy8v5YiG5LqrdG9rZW4s5aaC5p6c5Li6ZmFsc2Us5q+P5LiA5qyhSFRUUOivt+axgumDvemcgOimgeaWsOiOt+WPllRva2VuXG4gICAgcHJpdmF0ZSBfaW50ZXJjZXB0b3JzOiBJbnRlcmNlcHRvcltdOy8v5Lu75Yqh5oum5oiq5ZmoXG4gICAgcHJpdmF0ZSBfZG9tYWluOiBzdHJpbmc7Ly/kuIrkvKDln5/lkI1cblxuICAgIGNvbnN0cnVjdG9yKGJ1aWxkZXI6IFVwbG9hZGVyQnVpbGRlcikge1xuICAgICAgICB0aGlzLl9yZXRyeSA9IGJ1aWxkZXIuZ2V0UmV0cnk7XG4gICAgICAgIHRoaXMuX3NpemUgPSBidWlsZGVyLmdldFNpemU7XG4gICAgICAgIHRoaXMuX2NodW5rID0gYnVpbGRlci5nZXRDaHVuaztcbiAgICAgICAgdGhpcy5fYXV0byA9IGJ1aWxkZXIuZ2V0QXV0bztcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBidWlsZGVyLmdldE11bHRpcGxlO1xuICAgICAgICB0aGlzLl9hY2NlcHQgPSBidWlsZGVyLmdldEFjY2VwdDtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gYnVpbGRlci5nZXRCdXR0b247XG4gICAgICAgIHRoaXMuX2J1dHRvbkV2ZW50TmFtZSA9IGJ1aWxkZXIuZ2V0QnV0dG9uRXZlbnROYW1lO1xuICAgICAgICB0aGlzLl9jb21wcmVzcyA9IGJ1aWxkZXIuZ2V0Q29tcHJlc3M7XG4gICAgICAgIHRoaXMuX3NjYWxlID0gYnVpbGRlci5nZXRTY2FsZTtcbiAgICAgICAgdGhpcy5fc2F2ZUtleSA9IGJ1aWxkZXIuZ2V0U2F2ZUtleTtcbiAgICAgICAgdGhpcy5fdG9rZW5GdW5jID0gYnVpbGRlci5nZXRUb2tlbkZ1bmM7XG4gICAgICAgIHRoaXMuX3Rva2VuU2hhcmUgPSBidWlsZGVyLmdldFRva2VuU2hhcmU7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyID0gT2JqZWN0LmFzc2lnbihuZXcgU2ltcGxlVXBsb2FkTGlzdGVuZXIoKSwgYnVpbGRlci5nZXRMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuX2ludGVyY2VwdG9ycyA9IGJ1aWxkZXIuZ2V0SW50ZXJjZXB0b3JzO1xuICAgICAgICB0aGlzLl9kb21haW4gPSBidWlsZGVyLmdldERvbWFpbjtcbiAgICAgICAgdGhpcy5fZmlsZUlucHV0SWQgPSBgJHt0aGlzLkZJTEVfSU5QVVRfRUxfSUR9XyR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDtcbiAgICAgICAgbG9nLmVuYWJsZSA9IGJ1aWxkZXIuZ2V0SXNEZWJ1ZztcblxuICAgICAgICB0aGlzLnZhbGlkYXRlT3B0aW9ucygpO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIneWni+WMluaTjeS9nFxuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbml0RmlsZUlucHV0RWwoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJZmaWxlIGlucHV0IGVsZW1lbnRcbiAgICAgKi9cbiAgICBwcml2YXRlIGluaXRGaWxlSW5wdXRFbCgpOiB2b2lkIHtcblxuICAgICAgICAvL+afpeivouW3sue7j+WtmOWcqOeahGZpbGUgaW5wdXRcbiAgICAgICAgbGV0IGV4aXN0OiBIVE1MSW5wdXRFbGVtZW50ID0gPEhUTUxJbnB1dEVsZW1lbnQ+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2ZpbGVJbnB1dElkKTtcblxuICAgICAgICAvL+WIm+W7umlucHV05YWD57SgXG4gICAgICAgIHRoaXMuX2ZpbGVJbnB1dCA9IGV4aXN0ID8gZXhpc3QgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC50eXBlID0gJ2ZpbGUnOy8vdHlwZSBmaWxlXG4gICAgICAgIHRoaXMuZmlsZUlucHV0LmlkID0gdGhpcy5fZmlsZUlucHV0SWQ7Ly9pZCDmlrnkvr/lkI7pnaLmn6Xmib5cbiAgICAgICAgdGhpcy5maWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsvL+makOiXj2ZpbGUgaW5wdXRcblxuICAgICAgICAvL+WkmuaWh+S7tlxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgLy/lpJrmlofku7ZcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v5paH5Lu257G75Z6LXG4gICAgICAgIGlmICh0aGlzLmFjY2VwdCAmJiB0aGlzLmFjY2VwdC5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgbGV0IGFjY2VwdFZhbHVlOiBzdHJpbmcgPSAnJztcbiAgICAgICAgICAgIGZvciAobGV0IHZhbHVlIG9mIHRoaXMuYWNjZXB0KSB7XG4gICAgICAgICAgICAgICAgYWNjZXB0VmFsdWUgKz0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYWNjZXB0VmFsdWUgKz0gJywnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYWNjZXB0VmFsdWUuZW5kc1dpdGgoJywnKSkge1xuICAgICAgICAgICAgICAgIGFjY2VwdFZhbHVlID0gYWNjZXB0VmFsdWUuc3Vic3RyaW5nKDAsIGFjY2VwdFZhbHVlLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQuYWNjZXB0ID0gYWNjZXB0VmFsdWU7XG4gICAgICAgICAgICBsb2cuZChgYWNjZXB057G75Z6LICR7YWNjZXB0VmFsdWV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+WwhmlucHV05YWD57Sg5re75Yqg5YiwYm9keeWtkOiKgueCueeahOacq+WwvlxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZmlsZUlucHV0KTtcblxuICAgICAgICAvL+mAieaLqeaWh+S7tuebkeWQrOWZqFxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZUZpbGVzLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2J1dHRvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBidXR0b246IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2J1dHRvbik7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9idXR0b25FdmVudE5hbWUsIHRoaXMuY2hvb3NlRmlsZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5LiK5Lyg5a6M5oiQ5oiW6ICF5aSx6LSl5ZCOLOWvueacrOasoeS4iuS8oOS7u+WKoei/m+ihjOa4heaJq1xuICAgICAqL1xuICAgIHByaXZhdGUgcmVzZXRVcGxvYWRlcigpOiB2b2lkIHtcbiAgICAgICAgbG9nLmQoXCLlvIDlp4vph43nva4gdXBsb2FkZXJcIik7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgIGxvZy5kKFwi5Lu75Yqh6Zif5YiX5bey5riF56m6XCIpO1xuICAgICAgICB0aGlzLl90b2tlbiA9IG51bGw7XG4gICAgICAgIGxvZy5kKFwidG9rZW7lt7LmuIXnqbpcIik7XG4gICAgICAgIGxvZy5kKFwidXBsb2FkZXIg6YeN572u5a6M5q+VXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWkhOeQhuaWh+S7tlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlRmlsZXMgPSAoKSA9PiB7XG4gICAgICAgIC8v5aaC5p6c5rKh5pyJ6YCJ5Lit5paH5Lu25bCx6L+U5ZueXG4gICAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/nlJ/miJB0YXNrXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVUYXNrKCk7XG5cbiAgICAgICAgLy/mmK/lkKbkuK3mlq3ku7vliqFcbiAgICAgICAgbGV0IGlzSW50ZXJydXB0OiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIGxldCBpbnRlcmNlcHRlZFRhc2tzOiBCYXNlVGFza1tdID0gW107XG5cbiAgICAgICAgLy/ku7vliqHmi6bmiKrlmajov4fmu6RcbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLnRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaW50ZXJjZXB0b3Igb2YgdGhpcy5pbnRlcmNlcHRvcnMpIHtcbiAgICAgICAgICAgICAgICAvL+aLpuaIqueUn+aViFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcmNlcHRvci5vbkludGVyY2VwdCh0YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcmNlcHRlZFRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGxvZy5kKFwi5Lu75Yqh5oum5oiq5Zmo5oum5oiq5LqG5Lu75YqhOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmQodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5omT5pat55Sf5pWIXG4gICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLm9uSW50ZXJydXB0KHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5bCG5omT5pat5qCH5b+X5L2N6K6+5Li6dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpc0ludGVycnVwdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0ludGVycnVwdCkge1xuICAgICAgICAgICAgbG9nLncoXCLku7vliqHmi6bmiKrlmajkuK3mlq3kuobku7vliqHpmJ/liJdcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvL+S7juS7u+WKoemYn+WIl+S4reWOu+mZpOS7u+WKoVxuICAgICAgICBmb3IgKGxldCB0YXNrIG9mIGludGVyY2VwdGVkVGFza3MpIHtcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMudGFza1F1ZXVlLmluZGV4T2YodGFzayk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tRdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy/lm57osIPlh73mlbDlh73mlbBcbiAgICAgICAgdGhpcy5saXN0ZW5lci5vblJlYWR5KHRoaXMudGFza1F1ZXVlKTtcblxuXG4gICAgICAgIC8v5aSE55CG5Zu+54mHXG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VzKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvL+iHquWKqOS4iuS8oFxuICAgICAgICAgICAgaWYgKHRoaXMuYXV0bykge1xuICAgICAgICAgICAgICAgIGxvZy5kKFwi5byA5aeL6Ieq5Yqo5LiK5LygXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5piv5YiG5Z2X5Lu75YqhXG4gICAgICogQHBhcmFtIHRhc2tcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyBpc0NodW5rVGFzayh0YXNrOiBCYXNlVGFzayk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGFzay5jb25zdHJ1Y3Rvci5uYW1lID09PSBDaHVua1Rhc2submFtZSAmJiB0YXNrIGluc3RhbmNlb2YgQ2h1bmtUYXNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuaYr+ebtOS8oOS7u+WKoVxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNEaXJlY3RUYXNrKHRhc2s6IEJhc2VUYXNrKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0YXNrLmNvbnN0cnVjdG9yLm5hbWUgPT09IERpcmVjdFRhc2submFtZSAmJiB0YXNrIGluc3RhbmNlb2YgRGlyZWN0VGFzaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnlJ/miJB0YXNrXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhc2soKSB7XG4gICAgICAgIHRoaXMucmVzZXRVcGxvYWRlcigpO1xuXG4gICAgICAgIGxldCBmaWxlczogRmlsZUxpc3QgPSB0aGlzLmZpbGVJbnB1dC5maWxlcztcblxuICAgICAgICAvL+mBjeWOhmZpbGVzIOWIm+W7uuS4iuS8oOS7u+WKoVxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5maWxlSW5wdXQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBmaWxlOiBGaWxlID0gZmlsZXNbaV07XG5cbiAgICAgICAgICAgIGxldCB0YXNrOiBCYXNlVGFzaztcbiAgICAgICAgICAgIC8v5Y+q5pyJ5Zyo5byA5ZCv5YiG5Z2X5LiK5Lyg77yM5bm25LiU5paH5Lu25aSn5bCP5aSn5LqONG1i55qE5pe25YCZ5omN6L+b6KGM5YiG5Z2X5LiK5LygXG4gICAgICAgICAgICBpZiAodGhpcy5jaHVuayAmJiBmaWxlLnNpemUgPiBVcGxvYWRlckJ1aWxkZXIuQkxPQ0tfU0laRSkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSBuZXcgQ2h1bmtUYXNrKGZpbGUsIFVwbG9hZGVyQnVpbGRlci5CTE9DS19TSVpFLCB0aGlzLnNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IG5ldyBEaXJlY3RUYXNrKGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3NhdmVLZXkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0YXNrLmtleSA9IHRoaXMubGlzdGVuZXIub25UYXNrR2V0S2V5KHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWkhOeQhuWbvueJhy3nvKnmlL4t6LSo6YeP5Y6L57ypXG4gICAgICovXG4gICAgcHJpdmF0ZSBoYW5kbGVJbWFnZXMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgbGV0IHByb21pc2VzOiBQcm9taXNlPGFueT5bXSA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbXByZXNzICE9IDEgfHwgdGhpcy5zY2FsZVswXSAhPSAwIHx8IHRoaXMuc2NhbGVbMV0gIT0gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLnRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGFzay5maWxlLnR5cGUubWF0Y2goJ2ltYWdlLionKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbG9nLmQoYCR7dGFzay5maWxlLm5hbWV9IOWkhOeQhuWJjeeahOWbvueJh+Wkp+Wwjzoke3Rhc2suZmlsZS5zaXplIC8gMTAyNH0ga2JgKTtcblxuICAgICAgICAgICAgICAgIGxldCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgICAgICAgICAgICAgIGxldCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBsZXQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRhc2suZmlsZSk7XG5cblxuICAgICAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlPEJsb2I+KChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nVyA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdIID0gaW1nLmhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlVyA9IF90aGlzLnNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlSCA9IF90aGlzLnNjYWxlWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGVXID09IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZ1cgLyBpbWdIICogc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY2FsZUg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzY2FsZUggPT0gMCAmJiBzY2FsZVcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWdIIC8gaW1nVyAqIHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNjYWxlVyA+IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+i/memHjOeahOmVv+WuveaYr+e7mOWItuWIsOeUu+W4g+S4iueahOWbvueJh+eahOmVv+WuvVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYW52YXMudG9CbG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vMC45NeaYr+acgOaOpei/keWOn+WbvuWkp+Wwj++8jOWmguaenOi0qOmHj+S4ujHnmoTor53kvJrlr7zoh7Tmr5Tljp/lm77lpKflh6DlgI3jgIJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy50b0Jsb2IoKGJsb2I6IEJsb2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5kKGAke3Rhc2suZmlsZS5uYW1lfSDlpITnkIblkI7nmoTlm77niYflpKflsI86JHtibG9iLnNpemUgLyAxMDI0fSBrYmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgXCJpbWFnZS9qcGVnXCIsIF90aGlzLmNvbXByZXNzICogMC45NSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApLnRoZW4oKGJsb2I6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBibG9iLm5hbWUgPSB0YXNrLmZpbGUubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5maWxlID0gYmxvYjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFVwbG9hZGVyLmlzQ2h1bmtUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoPENodW5rVGFzaz50YXNrKS5zcGxpY2VGaWxlMkJsb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmo4DpqozpgInpobnlkIjms5XmgKdcbiAgICAgKi9cbiAgICBwcml2YXRlICB2YWxpZGF0ZU9wdGlvbnMoKTogdm9pZCB7XG4gICAgICAgIGxvZy5kKFwi5byA5aeL5qOA5p+l5p6E5bu65Y+C5pWw5ZCI5rOV5oCnXCIpO1xuICAgICAgICBpZiAoIXRoaXMuX3Rva2VuRnVuYykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfkvaDlv4Xpobvmj5DkvpvkuIDkuKrojrflj5ZUb2tlbueahOWbnuiwg+WHveaVsCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zY2FsZSB8fCAhKHRoaXMuc2NhbGUgaW5zdGFuY2VvZiBBcnJheSkgfHwgdGhpcy5zY2FsZS5sZW5ndGggIT0gMiB8fCB0aGlzLnNjYWxlWzBdIDwgMCB8fCB0aGlzLnNjYWxlWzFdIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzY2FsZeW/hemhu+aYr+mVv+W6puS4ujLnmoRudW1iZXLnsbvlnovnmoTmlbDnu4Qsc2NhbGVbMF3kuLrlrr3luqbvvIxzY2FsZVsxXeS4uumVv+W6pizlv4XpobvlpKfkuo7nrYnkuo4wJyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nLmQoXCLmnoTlu7rlj4LmlbDmo4Dmn6Xlrozmr5VcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5byA5aeL5LiK5LygXG4gICAgICovXG4gICAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICBsb2cuZChg5LiK5Lyg5Lu75Yqh6YGN5Y6G5byA5aeLYCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZmlsZUlucHV0LmZpbGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ayoeaciemAieS4reeahOaWh+S7tu+8jOaXoOazleW8gOWni+S4iuS8oCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudGFza2luZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfku7vliqHmiafooYzkuK3vvIzor7fkuI3opoHph43lpI3kuIrkvKAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGlzdGVuZXIub25TdGFydCh0aGlzLnRhc2tRdWV1ZSk7XG5cbiAgICAgICAgLy/pgY3ljobku7vliqHpmJ/liJdcbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0aGlzLnRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgbG9nLmQoYOS4iuS8oOaWh+S7tuWQje+8miR7dGFzay5maWxlLm5hbWV9YCk7XG4gICAgICAgICAgICBsb2cuZChg5LiK5Lyg5paH5Lu25aSn5bCP77yaJHt0YXNrLmZpbGUuc2l6ZX3lrZfoioLvvIwke3Rhc2suZmlsZS5zaXplIC8gMTAyNH0ga2LvvIwke3Rhc2suZmlsZS5zaXplIC8gMTAyNCAvIDEwMjR9IG1iYCk7XG4gICAgICAgICAgICAvL+agueaNruS7u+WKoeeahOexu+Wei+iwg+eUqOS4jeWQjOeahOS4iuS8oOaooeW8j+i/m+ihjOS4iuS8oFxuICAgICAgICAgICAgaWYgKFVwbG9hZGVyLmlzRGlyZWN0VGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgIGxvZy5kKCfor6XkuIrkvKDku7vliqHkuLrnm7TkvKDku7vliqEnKTtcbiAgICAgICAgICAgICAgICAvL+ebtOS8oFxuICAgICAgICAgICAgICAgIG5ldyBEaXJlY3RVcGxvYWRQYXR0ZXJuKHRoaXMpLnVwbG9hZCg8RGlyZWN0VGFzaz50YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFVwbG9hZGVyLmlzQ2h1bmtUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICAgICAgbG9nLmQoJ+ivpeS4iuS8oOS7u+WKoeS4uuWIhueJh+S7u+WKoScpO1xuICAgICAgICAgICAgICAgIC8v5YiG5Z2X5LiK5LygXG4gICAgICAgICAgICAgICAgbmV3IENodW5rVXBsb2FkUGF0dGVybih0aGlzKS51cGxvYWQoPENodW5rVGFzaz50YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6Z2e5rOV55qEdGFza+exu+WeiycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5omA5pyJ5Lu75Yqh5piv5ZCm5a6M5oiQXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHVibGljIGlzVGFza1F1ZXVlRmluaXNoKCkge1xuICAgICAgICBmb3IgKGxldCB0YXNrIG9mIHRoaXMudGFza1F1ZXVlKSB7XG4gICAgICAgICAgICBpZiAoIXRhc2suaXNGaW5pc2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6YCJ5oup5paH5Lu2XG4gICAgICovXG4gICAgcHVibGljIGNob29zZUZpbGUoKSB7XG4gICAgICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRva2VuKHRhc2s6IEJhc2VUYXNrKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKHRoaXMuX3Rva2VuU2hhcmUgJiYgdGhpcy5fdG9rZW4gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX3Rva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBsb2cuZChg5byA5aeL6I635Y+W5LiK5LygdG9rZW5gKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl90b2tlbkZ1bmModGhpcywgdGFzaykpLnRoZW4oKHRva2VuOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgbG9nLmQoYOS4iuS8oHRva2Vu6I635Y+W5oiQ5YqfOiAke3Rva2VufWApO1xuICAgICAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlcXVlc3RUYXNrVG9rZW4odGFzazogQmFzZVRhc2ssIHVybDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNhdmVLZXkodGFzaykudGhlbigoc2F2ZUtleTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0VG9rZW4odXJsLCBzYXZlS2V5KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXF1ZXN0VG9rZW4odXJsOiBzdHJpbmcsIHNhdmVLZXk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNhdmVLZXkgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIFwic2F2ZUtleT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzYXZlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgICAgIGxldCB4aHI6IFhNTEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlICE9IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UudXB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdhYm9ydGVkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzb2x2ZVNhdmVLZXkodGFzazogQmFzZVRhc2spOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgc2F2ZUtleSA9IHRoaXMuX3NhdmVLZXk7XG4gICAgICAgIGlmICh0eXBlb2Ygc2F2ZUtleSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzYXZlS2V5KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5yZXNvbHZlVVVJRClcbiAgICAgICAgICAgIC50aGVuKHNhdmVLZXkgPT4gdGhpcy5yZXNvbHZlSW1hZ2VJbmZvKHRhc2suZmlsZSwgc2F2ZUtleSkpXG4gICAgICAgICAgICAudGhlbih0aGlzLm9uU2F2ZUtleVJlc29sdmVkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc29sdmVVVUlEID0gKHM6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgICAgIGxldCByZSA9IC9cXCRcXCh1dWlkXFwpLztcbiAgICAgICAgaWYgKHJlLnRlc3QocykpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnJlcGxhY2UocmUsIFVVSUQudXVpZCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSByZXNvbHZlSW1hZ2VJbmZvID0gKGJsb2I6IEJsb2IsIHM6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgICAgIGxldCB3aWR0aFJlID0gL1xcJFxcKGltYWdlSW5mb1xcLndpZHRoXFwpLztcbiAgICAgICAgbGV0IGhlaWdodFJlID0gL1xcJFxcKGltYWdlSW5mb1xcLmhlaWdodFxcKS87XG4gICAgICAgIGlmICghd2lkdGhSZS50ZXN0KHMpICYmICFoZWlnaHRSZS50ZXN0KHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBsZXQgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcyA9IHMucmVwbGFjZSh3aWR0aFJlLCBpbWcud2lkdGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgcyA9IHMucmVwbGFjZShoZWlnaHRSZSwgaW1nLmhlaWdodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25TYXZlS2V5UmVzb2x2ZWQgPSAoc2F2ZUtleTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAgICAgdGhpcy5fdG9rZW5TaGFyZSA9IHRoaXMuX3Rva2VuU2hhcmUgJiYgdGhpcy5fc2F2ZUtleSA9PSBzYXZlS2V5O1xuICAgICAgICByZXR1cm4gc2F2ZUtleTtcbiAgICB9O1xuXG4gICAgZ2V0IHJldHJ5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXRyeTtcbiAgICB9XG5cbiAgICBnZXQgc2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgICB9XG5cbiAgICBnZXQgYXV0bygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG87XG4gICAgfVxuXG4gICAgZ2V0IG11bHRpcGxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fbXVsdGlwbGU7XG4gICAgfVxuXG4gICAgZ2V0IGFjY2VwdCgpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY2NlcHQ7XG4gICAgfVxuXG4gICAgZ2V0IGNvbXByZXNzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wcmVzcztcbiAgICB9XG5cbiAgICBnZXQgc2NhbGUoKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NhbGU7XG4gICAgfVxuXG4gICAgZ2V0IGxpc3RlbmVyKCk6IFVwbG9hZExpc3RlbmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyO1xuICAgIH1cblxuICAgIGdldCBmaWxlSW5wdXQoKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maWxlSW5wdXQ7XG4gICAgfVxuXG4gICAgZ2V0IGNodW5rKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2h1bms7XG4gICAgfVxuXG4gICAgZ2V0IHRhc2tRdWV1ZSgpOiBCYXNlVGFza1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tRdWV1ZTtcbiAgICB9XG5cblxuICAgIGdldCB0YXNraW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza2luZztcbiAgICB9XG5cbiAgICBzZXQgdGFza2luZyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl90YXNraW5nID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGludGVyY2VwdG9ycygpOiBJbnRlcmNlcHRvcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9ycztcbiAgICB9XG5cbiAgICBnZXQgZG9tYWluKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kb21haW47XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVcGxvYWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXBsb2FkL1VwbG9hZGVyLnRzIiwiaW1wb3J0IFVwbG9hZGVyIGZyb20gXCIuL1VwbG9hZGVyXCI7XG5pbXBvcnQgQmFzZVRhc2sgZnJvbSBcIi4vdGFzay9CYXNlVGFza1wiO1xuaW1wb3J0IFRva2VuRnVuYyBmcm9tIFwiLi9Ub2tlbkZ1bmNcIjtcbmltcG9ydCBJbnRlcmNlcHRvciBmcm9tIFwiLi9pbnRlcmNlcHRvci9VcGxvYWRJbnRlcmNlcHRvclwiO1xuaW1wb3J0IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yIGZyb20gXCIuL2ludGVyY2VwdG9yL1NpbXBsZVVwbG9hZEludGVyY2VwdG9yXCI7XG5pbXBvcnQgVXBsb2FkTGlzdGVuZXIgZnJvbSBcIi4vaG9vay9VcGxvYWRMaXN0ZW5lclwiO1xuaW1wb3J0IHtTY2hlbWUsIERvbWFpbn0gZnJvbSBcIi4vdXJsL0RvbWFpblwiO1xuXG4vKipcbiAqIFVwbG9hZGVyQnVpbGRlclxuICpcbiAqL1xuY2xhc3MgVXBsb2FkZXJCdWlsZGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIE1BWF9DSFVOS19TSVpFID0gNCAqIDEwMjQgKiAxMDI0Oy8v5YiG54mH5pyA5aSn5YC8XG4gICAgcHVibGljIHN0YXRpYyBCTE9DS19TSVpFID0gVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFOy8v5YiG5Z2X5aSn5bCP77yM5Y+q5pyJ5aSn5LqO6L+Z5Liq5pWw5omN6ZyA6KaB5YiG5Z2XXG4gICAgcHVibGljIHN0YXRpYyBVUExPQURfRE9NQUlOID0ge2h0dHA6ICdodHRwOi8vdXBsb2FkLnFpbml1LmNvbScsIGh0dHBzOiAnaHR0cHM6Ly91cC5xYm94Lm1lJ307XG5cbiAgICBwcml2YXRlIF9yZXRyeTogbnVtYmVyID0gMDsvL+acgOWkp+mHjeivleasoeaVsFxuICAgIHByaXZhdGUgX2RvbWFpbjogRG9tYWluID0gVXBsb2FkZXJCdWlsZGVyLlVQTE9BRF9ET01BSU47Ly/kuIrkvKDln5/lkI1cbiAgICBwcml2YXRlIF9zY2hlbWU6IFNjaGVtZSA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDsvL+S4iuS8oOWfn+WQjeeahCBzY2hlbWVcbiAgICBwcml2YXRlIF9zaXplOiBudW1iZXIgPSAxMDI0ICogMTAyNDsvL+WIhueJh+Wkp+WwjyzljZXkvY3lrZfoioIs5LiK6ZmQNG0s5LiN6IO95Li6MFxuICAgIHByaXZhdGUgX2NodW5rOiBib29sZWFuID0gdHJ1ZTsvL+WIhuWdl+S4iuS8oFxuICAgIHByaXZhdGUgX2F1dG86IGJvb2xlYW4gPSB0cnVlOy8v6Ieq5Yqo5LiK5LygLOavj+asoemAieaLqeaWh+S7tuWQjlxuICAgIHByaXZhdGUgX211bHRpcGxlOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaUr+aMgeWkmuaWh+S7tlxuICAgIHByaXZhdGUgX2FjY2VwdDogc3RyaW5nW10gPSBbXTsvL+aOpeWPl+eahOaWh+S7tuexu+Wei1xuICAgIHByaXZhdGUgX2J1dHRvbjogc3RyaW5nOy8v5LiK5Lyg5oyJ6ZKuXG4gICAgcHJpdmF0ZSBfYnV0dG9uRXZlbnROYW1lOiBzdHJpbmc7Ly/kuIrkvKDmjInpkq7nmoTnm5HlkKzkuovku7blkI3np7BcbiAgICBwcml2YXRlIF9jb21wcmVzczogbnVtYmVyID0gMTsvL+WbvueJh+WOi+e8qei0qOmHj1xuICAgIHByaXZhdGUgX3NjYWxlOiBudW1iZXJbXSA9IFswLCAwXTsvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5RbaDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5RbaDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgcHJpdmF0ZSBfbGlzdGVuZXI6IFVwbG9hZExpc3RlbmVyOy8v55uR5ZCs5ZmoXG4gICAgcHJpdmF0ZSBfc2F2ZUtleTogYm9vbGVhbiB8IHN0cmluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3Rva2VuRnVuYzogVG9rZW5GdW5jOy8vdG9rZW7ojrflj5blh73mlbBcbiAgICBwcml2YXRlIF90b2tlblNoYXJlOiBib29sZWFuID0gdHJ1ZTsvL+WIhuS6q3Rva2VuLOWmguaenOS4umZhbHNlLOavj+S4gOasoUhUVFDor7fmsYLpg73pnIDopoHmlrDojrflj5ZUb2tlblxuICAgIHByaXZhdGUgX2ludGVyY2VwdG9yczogSW50ZXJjZXB0b3JbXSA9IFtdOy8v5Lu75Yqh5oum5oiq5ZmoXG4gICAgcHJpdmF0ZSBfaXNEZWJ1ZzogYm9vbGVhbiA9IGZhbHNlOy8vXG5cblxuICAgIC8qKlxuICAgICAqIOiuvue9ruS4iuS8oOeahOWfn+WQjSzpu5jorqTmmK8ge2h0dHA6ICdodHRwOi8vdXBsb2FkLnFpbml1LmNvbScsIGh0dHBzOiAnaHR0cHM6Ly91cC5xYm94Lm1lJ31cbiAgICAgKiBAcGFyYW0gZG9tYWluXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZG9tYWluKGRvbWFpbjogRG9tYWluKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fZG9tYWluID0gZG9tYWluO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorr7nva7kuIrkvKDln5/lkI3nmoTljY/orq7nsbvlnovvvIzpu5jorqTku44gd2luZG93LmxvY2F0aW9uLnByb3RvY29sIOivu+WPllxuICAgICAqIEBwYXJhbSBzY2hlbWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBzY2hlbWUoc2NoZW1lOiBTY2hlbWUpOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9zY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOa3u+WKoOS4gOS4quaLpuaIquWZqFxuICAgICAqIEBwYXJhbSBpbnRlcmNlcHRvclxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGludGVyY2VwdG9yKGludGVyY2VwdG9yOiBJbnRlcmNlcHRvcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2ludGVyY2VwdG9ycy5wdXNoKE9iamVjdC5hc3NpZ24obmV3IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yKCksIGludGVyY2VwdG9yKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS4iuS8oOWksei0peWQjueahOmHjeS8oOWwneivleasoeaVsFxuICAgICAqIEBwYXJhbSByZXRyeSDpu5jorqQw5qyh77yM5LiN5bCd6K+V5qyh6YeN5LygXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cnkocmV0cnk6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gcmV0cnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIC8qKlxuICAgIC8vICAqIOiuvue9ruWIhueJh+Wkp+Wwj1xuICAgIC8vICAqIEBwYXJhbSBzaXplIOWIhuWdl+Wkp+WwjyzljZXkvY3lrZfoioIs6buY6K6kNCoxMDI0KjEwMjTlrZfoioIoNG1iKVxuICAgIC8vICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgLy8gICovXG4gICAgLy8gcHJpdmF0ZSBzaXplKHNpemU6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgLy8gICAgIHRoaXMuX3NpemUgPSBNYXRoLm1pbihNYXRoLm1heChzaXplLCAxKSwgVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFKTtcbiAgICAvLyAgICAgcmV0dXJuIHRoaXM7XG4gICAgLy8gfVxuXG4gICAgLyoqXG4gICAgICog6YCJ5oup5paH5Lu25ZCOLOaYr+WQpuiHquWKqOS4iuS8oFxuICAgICAqIEBwYXJhbSBhdXRvIOm7mOiupHRydWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBhdXRvKGF1dG86IGJvb2xlYW4pOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9hdXRvID0gYXV0bztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5pSv5oyB5aSa5paH5Lu26YCJ5oupXG4gICAgICogQHBhcmFtIG11bHRpcGxlIOm7mOiupHRydWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBtdWx0aXBsZShtdWx0aXBsZTogYm9vbGVhbik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX211bHRpcGxlID0gbXVsdGlwbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaOpeWPl+S4iuS8oOeahOaWh+S7tuexu+Wei1xuICAgICAqIEBwYXJhbSBhY2NlcHQg5pWw57uE5b2i5byP5L6L5aaCOlsnLnBuZycsJ3ZpZGVvLyonXVxuICAgICAqXG4gICAgICog6K+m57uG6YWN572u6KeBaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL3RhZ3MvYXR0X2lucHV0X2FjY2VwdC5hc3BcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGFjY2VwdChhY2NlcHQ6IHN0cmluZ1tdKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fYWNjZXB0ID0gYWNjZXB0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorr7nva7kuIrkvKDmjInpkq5cbiAgICAgKiBAcGFyYW0gYnV0dG9uIOS4iuS8oOaMiemSrklEXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSDkuIrkvKDmjInpkq7nmoTnm5HlkKzkuovku7blkI3np7DvvIzpu5jorqTkuLogXCJjbGlja1wiIOOAglxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGJ1dHRvbihidXR0b246IHN0cmluZywgZXZlbnROYW1lID0gXCJjbGlja1wiKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gYnV0dG9uO1xuICAgICAgICB0aGlzLl9idXR0b25FdmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWbvueJh+i0qOmHj+WOi+e8qSzlj6rlnKjkuIrkvKDnmoTmlofku7bmmK/lm77niYfnmoTml7blgJnmnInmlYhcbiAgICAgKiBAcGFyYW0gY29tcHJlc3MgMC0xLOm7mOiupDEs5LiN5Y6L57ypXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcHJlc3MoY29tcHJlc3M6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2NvbXByZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oY29tcHJlc3MsIDEpLCAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Zu+54mH57yp5pS+XG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKiBAcGFyYW0gc2NhbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2NhbGUoc2NhbGU6IG51bWJlcltdKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fc2NhbGUgPSBzY2FsZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6K6+572uIHNhdmVLZXlcbiAgICAgKiBAcGFyYW0gc2F2ZUtleVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIHNhdmVLZXkoc2F2ZUtleTogYm9vbGVhbiB8IHN0cmluZyk6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBzYXZlS2V5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZUb2tlbueahOWcsOWdgFxuICAgICAqIEBwYXJhbSB0b2tlblVybFxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIHRva2VuVXJsKHRva2VuVXJsOiBzdHJpbmcpOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl90b2tlbkZ1bmMgPSAodXBsb2FkZXI6IFVwbG9hZGVyLCB0YXNrOiBCYXNlVGFzaykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyLnJlcXVlc3RUYXNrVG9rZW4odGFzaywgdG9rZW5VcmwpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZUb2tlbueahOWHveaVsFxuICAgICAqIEBwYXJhbSB0b2tlbkZ1bmNcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyB0b2tlbkZ1bmModG9rZW5GdW5jOiBGdW5jdGlvbik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3Rva2VuRnVuYyA9ICh1cGxvYWRlcjogVXBsb2FkZXIsIHRhc2s6IEJhc2VUYXNrKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2tlbkZ1bmMocmVzb2x2ZSwgdGFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5LiK5Lyg55Sf5ZG95ZGo5pyf6ZKp5a2QXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgbGlzdGVuZXIobGlzdGVuZXI6IFVwbG9hZExpc3RlbmVyKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5YiG5LqrdG9rZW4s5aaC5p6c5Li6ZmFsc2Xmr4/kuIrkvKDkuIDkuKrmlofku7bpg73pnIDopoHor7fmsYLkuIDmrKFUb2tlbuOAglxuICAgICAqIEBwYXJhbSB0b2tlblNoYXJlXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgdG9rZW5TaGFyZSh0b2tlblNoYXJlOiBib29sZWFuKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fdG9rZW5TaGFyZSA9IHRva2VuU2hhcmU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuWIhuWdl+S4iuS8oFxuICAgICAqIEBwYXJhbSBjaHVuayDpu5jorqRmYWxzZVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGNodW5rKGNodW5rOiBib29sZWFuKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fY2h1bmsgPSBjaHVuaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5byA5ZCvZGVidWfmqKHlvI9cbiAgICAgKiBAcGFyYW0gZGVidWcg6buY6K6kZmFsc2VcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBkZWJ1ZyhkZWJ1ZzogYm9vbGVhbik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2lzRGVidWcgPSBkZWJ1ZztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgZ2V0IGdldFJldHJ5KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXRyeTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0U2l6ZSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2l6ZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0QXV0bygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG87XG4gICAgfVxuXG4gICAgZ2V0IGdldE11bHRpcGxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fbXVsdGlwbGU7XG4gICAgfVxuXG4gICAgZ2V0IGdldEFjY2VwdCgpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY2NlcHQ7XG4gICAgfVxuXG4gICAgZ2V0IGdldEJ1dHRvbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uO1xuICAgIH1cblxuICAgIGdldCBnZXRCdXR0b25FdmVudE5hbWUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbkV2ZW50TmFtZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0Q29tcHJlc3MoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXByZXNzO1xuICAgIH1cblxuICAgIGdldCBnZXRTY2FsZSgpOiBudW1iZXJbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2FsZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0TGlzdGVuZXIoKTogVXBsb2FkTGlzdGVuZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgZ2V0IGdldFNhdmVLZXkoKTogYm9vbGVhbiB8IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zYXZlS2V5O1xuICAgIH1cblxuICAgIGdldCBnZXRUb2tlbkZ1bmMoKTogVG9rZW5GdW5jIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuRnVuYztcbiAgICB9XG5cbiAgICBnZXQgZ2V0VG9rZW5TaGFyZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rva2VuU2hhcmU7XG4gICAgfVxuXG4gICAgZ2V0IGdldENodW5rKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2h1bms7XG4gICAgfVxuXG4gICAgZ2V0IGdldElzRGVidWcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlYnVnO1xuICAgIH1cblxuICAgIGdldCBnZXRJbnRlcmNlcHRvcnMoKTogSW50ZXJjZXB0b3JbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcmNlcHRvcnM7XG4gICAgfVxuXG4gICAgZ2V0IGdldERvbWFpbigpOiBzdHJpbmcge1xuICAgICAgICBsZXQgZG9tYWluOiBhbnkgPSB0aGlzLl9kb21haW47XG4gICAgICAgIGlmIChkb21haW4gPT0gbnVsbCkge1xuICAgICAgICAgICAgZG9tYWluID0gVXBsb2FkZXJCdWlsZGVyLlVQTE9BRF9ET01BSU47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkb21haW4gIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgbGV0IHNjaGVtZSA9IHRoaXMuX3NjaGVtZTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2NoZW1lICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvdG9jb2wgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgc2NoZW1lID0gcHJvdG9jb2wuc3Vic3RyaW5nKDAsIHByb3RvY29sLmxlbmd0aCAtIDEpIGFzIFNjaGVtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9tYWluID0gZG9tYWluW3NjaGVtZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRvbWFpbi5lbmRzV2l0aCgnLycpID8gZG9tYWluLnN1YnN0cmluZygwLCBkb21haW4ubGVuZ3RoIC0gMSkgOiBkb21haW47XG4gICAgfVxuXG4gICAgcHVibGljIGJ1aWxkKCk6IFVwbG9hZGVyIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVcGxvYWRlcih0aGlzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVwbG9hZGVyQnVpbGRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXBsb2FkL1VwbG9hZGVyQnVpbGRlci50cyIsIi8qKlxuICog5LiK5Lyg5Lu75YqhXG4gKi9cbmFic3RyYWN0IGNsYXNzIEJhc2VUYXNrIHtcbiAgICBwcm90ZWN0ZWQgX2ZpbGU6IEZpbGU7XG4gICAgcHJvdGVjdGVkIF9yZXRyeTogbnVtYmVyID0gMDsvL+W3sumHjeivleasoeaVsFxuICAgIHByb3RlY3RlZCBfY3JlYXRlRGF0ZTogRGF0ZTsvL+WIm+W7uuaXtumXtFxuICAgIHByb3RlY3RlZCBfc3RhcnREYXRlOiBEYXRlOy8v5byA5aeL5pe26Ze0XG4gICAgcHJvdGVjdGVkIF9lbmREYXRlOiBEYXRlOy8v57uT5p2f5pe26Ze0XG4gICAgcHJvdGVjdGVkIF9rZXk6IHN0cmluZzsvL2tleeaWh+S7tuWQjVxuICAgIHByb3RlY3RlZCBfcHJvZ3Jlc3M6IG51bWJlciA9IDA7Ly/ku7vliqHov5vluqYs5pyA5aSnMTAwXG4gICAgcHJvdGVjdGVkIF9pc1N1Y2Nlc3M6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS4iuS8oOaIkOWKn1xuICAgIHByb3RlY3RlZCBfaXNGaW5pc2g6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpue7k+adn1xuICAgIHByb3RlY3RlZCBfcmVzdWx0OiBPYmplY3Q7XG4gICAgcHJvdGVjdGVkIF9lcnJvcjogYW55O1xuXG4gICAgY29uc3RydWN0b3IoZmlsZTogRmlsZSkge1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5fY3JlYXRlRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBmaWxlKCk6IEZpbGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGZpbGUoZmlsZTogRmlsZSkge1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBnZXQgcmV0cnkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgIH1cblxuICAgIHNldCByZXRyeSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGNyZWF0ZURhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVEYXRlO1xuICAgIH1cblxuICAgIHNldCBjcmVhdGVEYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2NyZWF0ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnREYXRlO1xuICAgIH1cblxuICAgIHNldCBzdGFydERhdGUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGVuZERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmREYXRlO1xuICAgIH1cblxuICAgIHNldCBlbmREYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2VuZERhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgaXNTdWNjZXNzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNTdWNjZXNzO1xuICAgIH1cblxuICAgIHNldCBpc1N1Y2Nlc3ModmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNTdWNjZXNzID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHByb2dyZXNzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9ncmVzcztcbiAgICB9XG5cbiAgICBzZXQgcHJvZ3Jlc3ModmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KDAsIHZhbHVlKSwgMTAwKTtcbiAgICB9XG5cblxuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHQ7XG4gICAgfVxuXG4gICAgc2V0IHJlc3VsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9yZXN1bHQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICB9XG5cbiAgICBzZXQgZXJyb3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIGdldCBrZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleTtcbiAgICB9XG5cbiAgICBzZXQga2V5KHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fa2V5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGlzRmluaXNoKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGaW5pc2g7XG4gICAgfVxuXG4gICAgc2V0IGlzRmluaXNoKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlVGFzaztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXBsb2FkL3Rhc2svQmFzZVRhc2sudHMiLCJpbXBvcnQgVXBsb2FkZXIgZnJvbSBcIi4vdXBsb2FkL1VwbG9hZGVyXCI7XG5pbXBvcnQgVXBsb2FkZXJCdWlsZGVyIGZyb20gXCIuL3VwbG9hZC9VcGxvYWRlckJ1aWxkZXJcIjtcbmV4cG9ydCAge1VwbG9hZGVyLCBVcGxvYWRlckJ1aWxkZXJ9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9NYWluLnRzIiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4uL3Rhc2svRGlyZWN0VGFza1wiO1xuaW1wb3J0IFVwbG9hZExpc3RlbmVyIGZyb20gXCIuL1VwbG9hZExpc3RlbmVyXCI7XG5jbGFzcyBTaW1wbGVVcGxvYWRMaXN0ZW5lciBpbXBsZW1lbnRzIFVwbG9hZExpc3RlbmVyIHtcblxuICAgIG9uUmVhZHkodGFza1F1ZXVlOiBUYXNrW10pOiB2b2lkIHtcbiAgICB9XG5cbiAgICBvblN0YXJ0KHRhc2tRdWV1ZTogVGFza1tdKTogdm9pZCB7XG4gICAgfVxuXG4gICAgb25UYXNrUHJvZ3Jlc3ModGFzazogVGFzayk6IHZvaWQge1xuICAgIH1cblxuICAgIG9uVGFza0dldEtleSh0YXNrOiBUYXNrKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgb25UYXNrRmFpbCh0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgfVxuXG4gICAgb25UYXNrU3VjY2Vzcyh0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgfVxuXG4gICAgb25UYXNrUmV0cnkodGFzazogVGFzayk6IHZvaWQge1xuICAgIH1cblxuICAgIG9uRmluaXNoKHRhc2tRdWV1ZTogVGFza1tdKTogdm9pZCB7XG4gICAgfVxufVxuXG5leHBvcnQgIGRlZmF1bHQgU2ltcGxlVXBsb2FkTGlzdGVuZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3VwbG9hZC9ob29rL1NpbXBsZVVwbG9hZExpc3RlbmVyLnRzIiwiaW1wb3J0IEJhc2VUYXNrIGZyb20gXCIuLi90YXNrL0Jhc2VUYXNrXCI7XG5pbXBvcnQgVXBsb2FkSW50ZXJjZXB0b3IgZnJvbSBcIi4vVXBsb2FkSW50ZXJjZXB0b3JcIjtcblxuY2xhc3MgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IgaW1wbGVtZW50cyBVcGxvYWRJbnRlcmNlcHRvciB7XG5cbiAgICBvbkludGVyY2VwdCh0YXNrOiBCYXNlVGFzayk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgb25JbnRlcnJ1cHQodGFzazogQmFzZVRhc2spOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91cGxvYWQvaW50ZXJjZXB0b3IvU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IudHMiLCJpbXBvcnQgSVVwbG9hZFBhdHRlcm4gZnJvbSBcIi4vSVVwbG9hZFBhdHRlcm5cIjtcbmltcG9ydCBVcGxvYWRlciBmcm9tIFwiLi4vVXBsb2FkZXJcIjtcbmltcG9ydCB7Q2h1bmtUYXNrLCBDaHVua30gZnJvbSBcIi4uL3Rhc2svQ2h1bmtUYXNrXCI7XG5pbXBvcnQgbG9nIGZyb20gXCIuLi8uLi91dGlsL0xvZ1wiO1xuXG4vKipcbiAqIOWIhuWdl+S4iuS8oFxuICovXG5jbGFzcyBDaHVua1VwbG9hZFBhdHRlcm4gaW1wbGVtZW50cyBJVXBsb2FkUGF0dGVybiB7XG4gICAgcHJpdmF0ZSB1cGxvYWRlcjogVXBsb2FkZXI7XG4gICAgcHJpdmF0ZSB0YXNrOiBDaHVua1Rhc2s7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cGxvYWRlcjogVXBsb2FkZXIpIHtcbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cblxuICAgIGluaXQodXBsb2FkZXI6IFVwbG9hZGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudXBsb2FkZXIgPSB1cGxvYWRlcjtcbiAgICB9XG5cbiAgICB1cGxvYWQodGFzazogQ2h1bmtUYXNrKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFzayA9IHRhc2s7XG5cbiAgICAgICAgdGhpcy51cGxvYWRlci5nZXRUb2tlbih0YXNrKS50aGVuKCh0b2tlbjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICB0YXNrLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZEJsb2NrKHRva2VuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGxvYWRCbG9jayh0b2tlbjogc3RyaW5nKSB7XG4gICAgICAgIGxvZy5kKGDlh4blpIflvIDlp4vkuIrkvKDlnZdgKTtcbiAgICAgICAgbGV0IGNoYWluOiBQcm9taXNlPGFueT4gPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbG9nLmQoYOWFsSR7dGhpcy50YXNrLmJsb2Nrcy5sZW5ndGh95Z2X562J5b6F5LiK5LygYCk7XG4gICAgICAgIGxvZy5kKGDlhbEke3RoaXMudGFzay50b3RhbENodW5rQ291bnR95YiG54mH562J5b6F5LiK5LygYCk7XG5cbiAgICAgICAgdGhpcy50YXNrLmJsb2Nrcy5mb3JFYWNoKChibG9jaywgYmxvY2tJbmRleCkgPT4ge1xuICAgICAgICAgICAgYmxvY2suY2h1bmtzLmZvckVhY2goKGNodW5rLCBjaHVua0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgY2hhaW4gPSBjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmQoYOW8gOWni+S4iuS8oOesrCR7KGJsb2NrSW5kZXggKyAxKX3lnZcs56ysJHsoY2h1bmtJbmRleCArIDEpfeeJh2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRDaHVuayhjaHVuaywgdG9rZW4pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmNhdENodW5rcyh0b2tlbik7XG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy/miYDmnInku7vliqHpg73nu5PmnZ/kuoZcbiAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZGVyLmlzVGFza1F1ZXVlRmluaXNoKCkpIHtcbiAgICAgICAgICAgICAgICBsb2cuZChg5LiK5Lyg5Lu75Yqh6Zif5YiX5bey57uT5p2fYCk7XG5cbiAgICAgICAgICAgICAgICAvL+abtOaUueS7u+WKoeaJp+ihjOS4reagh+W/l1xuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIudGFza2luZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy/nm5HlkKzlmajosIPnlKhcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uRmluaXNoKHRoaXMudXBsb2FkZXIudGFza1F1ZXVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBsb2cudyhgJHt0aGlzLnRhc2suZmlsZS5uYW1lfeWIhuWdl+S4iuS8oOWksei0pWApO1xuICAgICAgICAgICAgdGhpcy50YXNrLmVycm9yID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB0aGlzLnRhc2suaXNTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy50YXNrLmVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tGYWlsKHRoaXMudGFzayk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBsb2FkQ2h1bmsoY2h1bms6IENodW5rLCB0b2tlbjogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgaXNGaXJzdENodW5rSW5CbG9jayA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKSA9PSAwO1xuICAgICAgICAgICAgbGV0IGNodW5rSW5kZXggPSBjaHVuay5ibG9jay5jaHVua3MuaW5kZXhPZihjaHVuayk7XG4gICAgICAgICAgICAvL+WJjeS4gOS4qmNodW5rLOWmguaenOWtmOWcqOeahOivnVxuICAgICAgICAgICAgbGV0IHByZXZDaHVuazogYW55ID0gaXNGaXJzdENodW5rSW5CbG9jayA/IG51bGwgOiBjaHVuay5ibG9jay5jaHVua3NbY2h1bmtJbmRleCAtIDFdO1xuXG4gICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmcgPSBpc0ZpcnN0Q2h1bmtJbkJsb2NrID8gdGhpcy5nZXRVcGxvYWRCbG9ja1VybChjaHVuay5ibG9jay5kYXRhLnNpemUpIDogdGhpcy5nZXRVcGxvYWRDaHVua1VybChjaHVuay5zdGFydCwgcHJldkNodW5rID8gcHJldkNodW5rLmN0eCA6IG51bGwsIHByZXZDaHVuayA/IHByZXZDaHVuay5ob3N0IDogbnVsbCk7XG5cbiAgICAgICAgICAgIGxldCB4aHI6IFhNTEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksIHRydWUpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKTsvL+iuvue9rmNvbnRlbnRUeXBlXG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsIGBVcFRva2VuICR7dG9rZW59YCk7Ly/mt7vliqB0b2tlbumqjOivgeWktFxuXG4gICAgICAgICAgICAvL+WIhueJh+S4iuS8oOS4rVxuICAgICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGU6IFByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKCh0aGlzLnRhc2suZmluaXNoZWRCbG9ja3NTaXplICsgY2h1bmsuc3RhcnQgKyBlLmxvYWRlZCkgLyB0aGlzLnRhc2suZmlsZS5zaXplKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhc2sucHJvZ3Jlc3MgPCBwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKHRoaXMudGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+WIhueJh+S4iuS8oOWujOaIkFxuICAgICAgICAgICAgeGhyLnVwbG9hZC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gTWF0aC5yb3VuZCgoKHRoaXMudGFzay5maW5pc2hlZEJsb2Nrc1NpemUgKyBjaHVuay5zdGFydCArIGNodW5rLmRhdGEuc2l6ZSkgLyB0aGlzLnRhc2suZmlsZS5zaXplKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFzay5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKHRoaXMudGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/lk43lupTov5Tlm55cbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwICYmIHhoci5yZXNwb25zZVRleHQgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ6IGFueSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jdHggPSByZXN1bHQuY3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaG9zdCA9IHJlc3VsdC5ob3N0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNodW5rSW5kZXg6IG51bWJlciA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoYXNOZXh0Q2h1bmtJblRoaXNCbG9jazogYm9vbGVhbiA9IGNodW5rSW5kZXggIT0gY2h1bmsuYmxvY2suY2h1bmtzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc05leHRDaHVua0luVGhpc0Jsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuYmxvY2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmJsb2NrLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGhyLnNlbmQoY2h1bmsuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBjb25jYXRDaHVua3ModG9rZW46IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVuY29kZWRLZXk6IGFueSA9IHRoaXMudGFzay5rZXkgPyBidG9hKHRoaXMudGFzay5rZXkpIDogbnVsbDtcbiAgICAgICAgICAgIC8vIOWuieWFqOWtl+espuS4siDlj4LogIPvvJpodHRwczovL2RldmVsb3Blci5xaW5pdS5jb20va29kby9hcGkvbWtmaWxlXG4gICAgICAgICAgICBpZiAoZW5jb2RlZEtleSkge1xuICAgICAgICAgICAgICAgIGVuY29kZWRLZXkgPSBlbmNvZGVkS2V5LnJlcGxhY2UoL1xcKy9nLCAnLScpO1xuICAgICAgICAgICAgICAgIGVuY29kZWRLZXkgPSBlbmNvZGVkS2V5LnJlcGxhY2UoL1xcLy9nLCAnXycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0TWFrZUZpbGVVcmwodGhpcy50YXNrLmZpbGUuc2l6ZSwgZW5jb2RlZEtleSk7XG4gICAgICAgICAgICAvL+aehOW7uuaJgOacieaVsOaNruWdl+acgOWQjuS4gOS4quaVsOaNrueJh+S4iuS8oOWQjuW+l+WIsOeahDxjdHg+55qE57uE5ZCI5oiQ55qE5YiX6KGo5a2X56ym5LiyXG4gICAgICAgICAgICBsZXQgY3R4TGlzdFN0cmluZyA9ICcnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBibG9jayBvZiB0aGlzLnRhc2suYmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxhc3RDaHVuayA9IGJsb2NrLmNodW5rc1tibG9jay5jaHVua3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY3R4TGlzdFN0cmluZyArPSBsYXN0Q2h1bmsuY3R4ICsgJywnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3R4TGlzdFN0cmluZy5lbmRzV2l0aCgnLCcpKSB7XG4gICAgICAgICAgICAgICAgY3R4TGlzdFN0cmluZyA9IGN0eExpc3RTdHJpbmcuc3Vic3RyaW5nKDAsIGN0eExpc3RTdHJpbmcubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB4aHI6IFhNTEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksIHRydWUpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L3BsYWluJyk7Ly/orr7nva5jb250ZW50VHlwZVxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCBgVXBUb2tlbiAke3Rva2VufWApOy8v5re75YqgdG9rZW7pqozor4HlpLRcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwICYmIHhoci5yZXNwb25zZVRleHQgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ6IGFueSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2suaXNTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFzay5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1N1Y2Nlc3ModGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnJldHJ5VGFzayh0aGlzLnRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2cudyhgJHt0aGlzLnRhc2suZmlsZS5uYW1lfeWIhuWdl+S4iuS8oOWksei0pSzlh4blpIflvIDlp4vph43kvKBgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkodGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKGN0eExpc3RTdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5blnZfkuIrkvKDnmoR1cmxcbiAgICAgKiBAcGFyYW0gYmxvY2tTaXplXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBwcml2YXRlICBnZXRVcGxvYWRCbG9ja1VybChibG9ja1NpemU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtibGsvJHtibG9ja1NpemV9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bniYfkuIrkvKDnmoR1cmxcbiAgICAgKiBAcGFyYW0gc3RhcnQg54mH55qE5Zyo5Z2X5Lit55qE6LW35aeL5L2N572uXG4gICAgICogQHBhcmFtIGN0eCDliY3kuIDmrKHkuIrkvKDov5Tlm57nmoTlnZfnuqfkuIrkvKDmjqfliLbkv6Hmga/jgIJcbiAgICAgKiBAcGFyYW0gaG9zdCDmjIflrppob3N0XG4gICAgICovXG4gICAgcHJpdmF0ZSAgZ2V0VXBsb2FkQ2h1bmtVcmwoc3RhcnQ6IG51bWJlciwgY3R4OiBzdHJpbmcsIGhvc3Q/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7aG9zdCA/IGhvc3QgOiB0aGlzLnVwbG9hZGVyLmRvbWFpbn0vYnB1dC8ke2N0eH0vJHtzdGFydH0vYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5blkIjlubblnZfkuLrmlofku7bnmoR1cmxcbiAgICAgKiBAcGFyYW0gZmlsZVNpemUg5paH5Lu25aSn5bCPXG4gICAgICogQHBhcmFtIGVuY29kZWRLZXkgYmFzZTY0VXJsRW5jb2Rl5ZCO55qE6LWE5rqQ5ZCN56ewLOiLpeacquaMh+Wumu+8jOWImeS9v+eUqHNhdmVLZXnvvJvoi6XmnKrmjIflrppzYXZlS2V577yM5YiZ5L2/55So6LWE5rqQ5YaF5a6555qEU0hBMeWAvOS9nOS4uui1hOa6kOWQjeOAglxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHJpdmF0ZSAgZ2V0TWFrZUZpbGVVcmwoZmlsZVNpemU6IG51bWJlciwgZW5jb2RlZEtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVuY29kZWRLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtmaWxlLyR7ZmlsZVNpemV9L2tleS8ke2VuY29kZWRLZXl9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtmaWxlLyR7ZmlsZVNpemV9YDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSByZXRyeVRhc2sodGFzazogQ2h1bmtUYXNrKTogYm9vbGVhbiB7XG4gICAgICAgIC8v6L6+5Yiw6YeN6K+V5qyh5pWwXG4gICAgICAgIGlmICh0YXNrLnJldHJ5ID49IHRoaXMudXBsb2FkZXIucmV0cnkpIHtcbiAgICAgICAgICAgIGxvZy53KGAke3Rhc2suZmlsZS5uYW1lfei+vuWIsOmHjeS8oOasoeaVsOS4iumZkCR7dGhpcy51cGxvYWRlci5yZXRyeX0s5YGc5q2i6YeN5LygYCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGFzay5yZXRyeSsrO1xuICAgICAgICBsb2cudyhgJHt0YXNrLmZpbGUubmFtZX3lvIDlp4vph43kvKAs5b2T5YmN6YeN5Lyg5qyh5pWwJHt0YXNrLnJldHJ5fWApO1xuICAgICAgICAvLyB0aGlzLnVwbG9hZCh0YXNrKTtcblxuICAgICAgICAvL3RvZG9cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG59XG5cblxuZXhwb3J0ICBkZWZhdWx0IENodW5rVXBsb2FkUGF0dGVybjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXBsb2FkL3BhdHRyZW4vQ2h1bmtVcGxvYWRQYXR0ZXJuLnRzIiwiaW1wb3J0IElVcGxvYWRQYXR0ZXJuIGZyb20gXCIuL0lVcGxvYWRQYXR0ZXJuXCI7XG5pbXBvcnQgVXBsb2FkZXIgZnJvbSBcIi4uL1VwbG9hZGVyXCI7XG5pbXBvcnQgRGlyZWN0VGFzayBmcm9tIFwiLi4vdGFzay9EaXJlY3RUYXNrXCI7XG5pbXBvcnQgbG9nIGZyb20gXCIuLi8uLi91dGlsL0xvZ1wiO1xuLyoqXG4gKiDnm7TmjqXkuIrkvKBcbiAqL1xuY2xhc3MgRGlyZWN0VXBsb2FkUGF0dGVybiBpbXBsZW1lbnRzIElVcGxvYWRQYXR0ZXJuIHtcbiAgICBwcml2YXRlIHVwbG9hZGVyOiBVcGxvYWRlcjtcbiAgICBwcml2YXRlIHRhc2s6IERpcmVjdFRhc2s7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cGxvYWRlcjogVXBsb2FkZXIpIHtcbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWunueOsOaOpeWPo+eahOS4iuS8oOaWueazlVxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICovXG4gICAgdXBsb2FkKHRhc2s6IERpcmVjdFRhc2spOiB2b2lkIHtcbiAgICAgICAgdGhpcy50YXNrID0gdGFzaztcblxuICAgICAgICB0aGlzLnVwbG9hZGVyLmdldFRva2VuKHRhc2spLnRoZW4oKHRva2VuOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRhc2suc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZSh0b2tlbik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDliJvlu7rooajljZVcbiAgICAgKiBAcGFyYW0gdG9rZW5cbiAgICAgKiBAcmV0dXJucyB7Rm9ybURhdGF9XG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVGb3JtRGF0YSh0b2tlbjogc3RyaW5nKTogRm9ybURhdGEge1xuICAgICAgICBsZXQgdGFzazogRGlyZWN0VGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgbGV0IGZvcm1EYXRhOiBGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICAgIC8va2V55a2Y5Zyo77yM5re75Yqg5YiwZm9ybURhdGHkuK3vvIzoi6XkuI3orr7nva7vvIzkuIPniZvmnI3liqHlmajkvJroh6rliqjnlJ/miJBoYXNoIGtleVxuICAgICAgICBpZiAodGFzay5rZXkgIT09IG51bGwgJiYgdGFzay5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCB0YXNrLmtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgdG9rZW4pO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0YXNrLmZpbGUpO1xuXG4gICAgICAgIGxvZy5kKGDliJvlu7pmb3JtRGF0YeWvueixoWApO1xuXG4gICAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOS4iuS8oOaWh+S7tlxuICAgICAqIEBwYXJhbSB0b2tlblxuICAgICAqL1xuICAgIHByaXZhdGUgdXBsb2FkRmlsZSh0b2tlbjogc3RyaW5nKSB7XG4gICAgICAgIGxldCB0YXNrOiBEaXJlY3RUYXNrID0gdGhpcy50YXNrO1xuXG4gICAgICAgIGxldCB4aHI6IFhNTEh0dHBSZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgLy/kuIrkvKDkuK1cbiAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gKGU6IFByb2dyZXNzRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChlLmxvYWRlZCAqIDEwMCkgLyBlLnRvdGFsKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tQcm9ncmVzcyh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy/kuIrkvKDlrozmiJBcbiAgICAgICAgeGhyLnVwbG9hZC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGFzay5wcm9ncmVzcyA8IDEwMCkge1xuICAgICAgICAgICAgICAgIHRhc2sucHJvZ3Jlc3MgPSAxMDA7XG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tQcm9ncmVzcyh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIGxldCB1cmwgPSB0aGlzLnVwbG9hZGVyLmRvbWFpbjtcbiAgICAgICAgLy/pgb/lhY3mtY/op4jlmajnvJPlrZhodHRw6K+35rGCXG4gICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHRoaXMudXBsb2FkZXIuZG9tYWluKSA/IFwiJlwiIDogXCI/XCIpICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwsIHRydWUpO1xuXG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCAmJiB4aHIucmVzcG9uc2VUZXh0ICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sucmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tTdWNjZXNzKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLnJldHJ5VGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICBsb2cudyhgJHt0YXNrLmZpbGUubmFtZX3kuIrkvKDlpLHotKUs5YeG5aSH5byA5aeL6YeN5LygYCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2cudyhgJHt0YXNrLmZpbGUubmFtZX3kuIrkvKDlpLHotKVgKTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5lcnJvciA9IHhoci5yZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrRmFpbCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL+aJgOacieS7u+WKoemDvee7k+adn+S6hlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZGVyLmlzVGFza1F1ZXVlRmluaXNoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy/mm7TmlLnku7vliqHmiafooYzkuK3moIflv5dcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci50YXNraW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9vbkZpbmlzaCBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uRmluaXNoKHRoaXMudXBsb2FkZXIudGFza1F1ZXVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGZvcm1EYXRhOiBGb3JtRGF0YSA9IHRoaXMuY3JlYXRlRm9ybURhdGEodG9rZW4pO1xuICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgICAgIGxvZy5kKFwi5Y+R6YCBYWpheCBwb3N0IOivt+axglwiKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOmHjeS8oFxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHJpdmF0ZSByZXRyeVRhc2sodGFzazogRGlyZWN0VGFzayk6IGJvb2xlYW4ge1xuICAgICAgICBsb2cuZChcIuW8gOWni+WwneivlemHjeS8oFwiKTtcbiAgICAgICAgLy/ovr7liLDph43or5XmrKHmlbBcbiAgICAgICAgaWYgKHRhc2sucmV0cnkgPj0gdGhpcy51cGxvYWRlci5yZXRyeSkge1xuICAgICAgICAgICAgbG9nLncoYCR7dGFzay5maWxlLm5hbWV96L6+5Yiw6YeN5Lyg5qyh5pWw5LiK6ZmQJHt0aGlzLnVwbG9hZGVyLnJldHJ5fSzlgZzmraLph43kvKBgKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0YXNrLnJldHJ5Kys7XG4gICAgICAgIGxvZy53KGAke3Rhc2suZmlsZS5uYW1lfeW8gOWni+mHjeS8oCzlvZPliY3ph43kvKDmrKHmlbAke3Rhc2sucmV0cnl9YCk7XG4gICAgICAgIHRoaXMudXBsb2FkKHRhc2spO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5cblxuZXhwb3J0ICBkZWZhdWx0IERpcmVjdFVwbG9hZFBhdHRlcm47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3VwbG9hZC9wYXR0cmVuL0RpcmVjdFVwbG9hZFBhdHRlcm4udHMiLCJpbXBvcnQgQmFzZVRhc2sgZnJvbSBcIi4vQmFzZVRhc2tcIjtcbi8qKlxuICog5YiG5Z2X5Lu75YqhXG4gKi9cbmNsYXNzIENodW5rVGFzayBleHRlbmRzIEJhc2VUYXNrIHtcbiAgICAvL+WIhuWdl1xuICAgIHByaXZhdGUgX2Jsb2NrczogQmxvY2tbXSA9IFtdO1xuICAgIHByaXZhdGUgX2Jsb2NrU2l6ZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9jaHVua1NpemU6IG51bWJlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKDlh73mlbBcbiAgICAgKiBAcGFyYW0gZmlsZVxuICAgICAqIEBwYXJhbSBibG9ja1NpemUg5Z2X5aSn5bCPXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDniYflpKflsI9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihmaWxlOiBGaWxlLCBibG9ja1NpemU6IG51bWJlciwgY2h1bmtTaXplOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoZmlsZSk7XG4gICAgICAgIHRoaXMuX2Jsb2NrU2l6ZSA9IGJsb2NrU2l6ZTtcbiAgICAgICAgdGhpcy5fY2h1bmtTaXplID0gY2h1bmtTaXplO1xuICAgICAgICB0aGlzLnNwbGljZUZpbGUyQmxvY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIbmlofku7bliIblnZdcbiAgICAgKi9cbiAgICBwdWJsaWMgc3BsaWNlRmlsZTJCbG9jaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYmxvY2tzID0gW107XG4gICAgICAgIGxldCBmaWxlU2l6ZTogbnVtYmVyID0gdGhpcy5fZmlsZS5zaXplO1xuICAgICAgICBsZXQgZmlsZTogRmlsZSA9IHRoaXMuX2ZpbGU7XG4gICAgICAgIC8v5oC75Z2X5pWwXG4gICAgICAgIGxldCBibG9ja0NvdW50ID0gTWF0aC5jZWlsKGZpbGVTaXplIC8gdGhpcy5fYmxvY2tTaXplKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2NrQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0OiBudW1iZXIgPSBpICogdGhpcy5fYmxvY2tTaXplOy8v6LW35aeL5L2N572uXG4gICAgICAgICAgICBsZXQgZW5kOiBudW1iZXIgPSBzdGFydCArIHRoaXMuX2Jsb2NrU2l6ZTsvL+e7k+adn+S9jee9rlxuICAgICAgICAgICAgLy/mnoTpgKDkuIDkuKrlnZflrp7kvotcbiAgICAgICAgICAgIGxldCBibG9jazogQmxvY2sgPSBuZXcgQmxvY2soc3RhcnQsIGVuZCwgZmlsZS5zbGljZShzdGFydCwgZW5kKSwgdGhpcy5fY2h1bmtTaXplLCBmaWxlKTtcbiAgICAgICAgICAgIC8v5re75Yqg5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaChibG9jayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bmiYDmnInnmoRibG9ja1xuICAgICAqIEByZXR1cm5zIHtCbG9ja1tdfVxuICAgICAqL1xuICAgIGdldCBibG9ja3MoKTogQmxvY2tbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibG9ja3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5q2j5Zyo5aSE55CG55qEYmxvY2tcbiAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICovXG4gICAgZ2V0IHByb2Nlc3NpbmdCbG9jaygpOiBCbG9jayB7XG4gICAgICAgIGZvciAobGV0IGJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgaWYgKCFibG9jay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgRXJyb3IoXCLmib7kuI3liLDmraPlnKjlpITnkIbnmoRCbG9ja1wiKVxuICAgIH1cblxuICAgIGdldCBmaW5pc2hlZEJsb2Nrc1NpemUoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHNpemU6IG51bWJlciA9IDA7XG4gICAgICAgIGZvciAobGV0IGJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgc2l6ZSArPSAoYmxvY2suaXNGaW5pc2ggPyBibG9jay5kYXRhLnNpemUgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG5cbiAgICBnZXQgY2h1bmtzKCk6IENodW5rW10ge1xuICAgICAgICBsZXQgYXJyYXk6IENodW5rW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYmxvY2sgb2YgdGhpcy5fYmxvY2tzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjaHVuayBvZiBibG9jay5jaHVua3MpIHtcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5q2j5Zyo5aSE55CG55qEY2h1bmtcbiAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICovXG4gICAgZ2V0IHByb2Nlc3NpbmdDaHVuaygpOiBDaHVuayB7XG4gICAgICAgIGZvciAobGV0IGJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgaWYgKCFibG9jay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBjaHVuayBvZiBibG9jay5jaHVua3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNodW5rLnByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBFcnJvcihcIuaJvuS4jeWIsOato+WcqOWkhOeQhueahENodW5rXCIpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5oC75YWx5YiG54mH5pWw6YePKOaJgOacieWIhuWdl+eahOWIhueJh+aVsOmHj+aAu+WSjClcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB0b3RhbENodW5rQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcbiAgICAgICAgZm9yIChsZXQgYmxvY2sgb2YgdGhpcy5fYmxvY2tzKSB7XG4gICAgICAgICAgICBjb3VudCArPSBibG9jay5jaHVua3MubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG59XG5cbi8qKlxuICog5YiG5Z2X77yM5YiG5Z2X5aSn5bCP5LiD54mb5Zu65a6a5pivNE1cbiAqL1xuY2xhc3MgQmxvY2sge1xuICAgIHByaXZhdGUgX2RhdGE6IEJsb2I7Ly/lnZfmlbDmja5cbiAgICBwcml2YXRlIF9zdGFydDogbnVtYmVyOy8v6LW35aeL5L2N572uXG4gICAgcHJpdmF0ZSBfZW5kOiBudW1iZXI7Ly/nu5PmnZ/kvY3nva5cbiAgICBwcml2YXRlIF9jaHVua3M6IENodW5rW10gPSBbXTtcbiAgICBwcml2YXRlIF9pc0ZpbmlzaDogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc2luZzogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5q2j5Zyo5LiK5LygXG4gICAgcHJpdmF0ZSBfZmlsZTogRmlsZTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IOi1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBlbmQg57uT5p2f5L2N572uXG4gICAgICogQHBhcmFtIGRhdGEg5Z2X5pWw5o2uXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDliIbniYfmlbDmja7nmoTmnIDlpKflpKflsI9cbiAgICAgKiBAcGFyYW0gZmlsZSDliIblnZfmiYDlsZ7mlofku7ZcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgZGF0YTogQmxvYiwgY2h1bmtTaXplOiBudW1iZXIsIGZpbGU6IEZpbGUpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX2VuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5fZmlsZSA9IGZpbGU7XG4gICAgICAgIHRoaXMuc3BsaWNlQmxvY2syQ2h1bmsoY2h1bmtTaXplKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIblnZfliIbniYdcbiAgICAgKi9cbiAgICBwcml2YXRlIHNwbGljZUJsb2NrMkNodW5rKGNodW5rU2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCBibG9ja1NpemU6IG51bWJlciA9IHRoaXMuX2RhdGEuc2l6ZTtcbiAgICAgICAgbGV0IGRhdGE6IEJsb2IgPSB0aGlzLl9kYXRhO1xuICAgICAgICAvL+aAu+eJh+aVsFxuICAgICAgICBsZXQgY2h1bmtDb3VudCA9IE1hdGguY2VpbChibG9ja1NpemUgLyBjaHVua1NpemUpO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQ6IG51bWJlciA9IGkgKiBjaHVua1NpemU7Ly/otbflp4vkvY3nva5cbiAgICAgICAgICAgIGxldCBlbmQ6IG51bWJlciA9IHN0YXJ0ICsgY2h1bmtTaXplOy8v57uT5p2f5L2N572uXG4gICAgICAgICAgICAvL+aehOmAoOS4gOS4queJh+WunuS+i1xuICAgICAgICAgICAgbGV0IGNodW5rOiBDaHVuayA9IG5ldyBDaHVuayhzdGFydCwgZW5kLCBkYXRhLnNsaWNlKHN0YXJ0LCBlbmQpLCB0aGlzKTtcbiAgICAgICAgICAgIC8v5re75Yqg5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB0aGlzLl9jaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbkuIrkvKDkuK1cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgcHJvY2Vzc2luZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3Npbmc7XG4gICAgfVxuXG4gICAgc2V0IHByb2Nlc3NpbmcodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2luZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIhuWdl+aJgOWxnueahOaWh+S7tlxuICAgICAqIEByZXR1cm5zIHtGaWxlfVxuICAgICAqL1xuICAgIGdldCBmaWxlKCk6IEZpbGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKblt7Lnu4/nu5PmnZ9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNGaW5pc2goKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZpbmlzaDtcbiAgICB9XG5cbiAgICBzZXQgaXNGaW5pc2godmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNGaW5pc2ggPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57liIblnZfmlbDmja5cbiAgICAgKiBAcmV0dXJucyB7QmxvYn1cbiAgICAgKi9cbiAgICBnZXQgZGF0YSgpOiBCbG9iIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5a2X6IqC6LW35aeL5L2N572uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc3RhcnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi/lOWbnuWtl+iKgue7k+adn+S9jee9rlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGVuZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5kO1xuICAgIH1cblxuICAgIGdldCBjaHVua3MoKTogQ2h1bmtbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaHVua3M7XG4gICAgfVxufVxuXG4vKipcbiAqIOWIhueJh++8jOWIhueJh+Wkp+Wwj+WPr+S7peiHquWumuS5ie+8jOiHs+WwkTHlrZfoioJcbiAqL1xuY2xhc3MgQ2h1bmsge1xuICAgIHByaXZhdGUgX3N0YXJ0OiBudW1iZXI7Ly/otbflp4vkvY3nva5cbiAgICBwcml2YXRlIF9lbmQ6IG51bWJlcjsvL+e7k+adn+S9jee9rlxuICAgIHByaXZhdGUgX2RhdGE6IEJsb2I7Ly/niYfmlbDmja5cbiAgICBwcml2YXRlIF9wcm9jZXNzaW5nOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbmraPlnKjkuIrkvKBcbiAgICBwcml2YXRlIF9pc0ZpbmlzaDogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgcHJpdmF0ZSBfY3R4OiBzdHJpbmc7Ly/liY3kuIDmrKHkuIrkvKDov5Tlm57nmoTlnZfnuqfkuIrkvKDmjqfliLbkv6Hmga8s56ys5LiA5LiqY2h1bmvmraTlgLzkuLrnqbpcbiAgICBwcml2YXRlIF9ibG9jazogQmxvY2s7Ly/liIbniYfmiYDlsZ7nmoTlnZflr7nosaFcbiAgICBwcml2YXRlIF9ob3N0OiBzdHJpbmc7Ly/liY3kuIDmrKHkuIrkvKDov5Tlm57nmoTmjIflrprkuIrkvKDlnLDlnYBcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IOWtl+iKgui1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBlbmQg5a2X6IqC57uT5p2f5L2N572uXG4gICAgICogQHBhcmFtIGRhdGEg5YiG54mH5pWw5o2uXG4gICAgICogQHBhcmFtIGJsb2NrIOWIhuWdl+WvueixoVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBkYXRhOiBCbG9iLCBibG9jazogQmxvY2spIHtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5fZW5kID0gZW5kO1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5fYmxvY2sgPSBibG9jaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm55jaHVua+aJgOWxnueahEJsb2Nr5a+56LGhXG4gICAgICogQHJldHVybnMge0Jsb2NrfVxuICAgICAqL1xuICAgIGdldCBibG9jaygpOiBCbG9jayB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibG9jaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57lrZfoioLotbflp4vkvY3nva5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBzdGFydCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5a2X6IqC57uT5p2f5L2N572uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZW5kKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5YiG54mH5pWw5o2uXG4gICAgICogQHJldHVybnMge0Jsb2J9XG4gICAgICovXG4gICAgZ2V0IGRhdGEoKTogQmxvYiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuW3sue7j+e7k+adn1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBpc0ZpbmlzaCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRmluaXNoO1xuICAgIH1cblxuXG4gICAgc2V0IGlzRmluaXNoKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICBnZXQgaG9zdCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdDtcbiAgICB9XG5cbiAgICBzZXQgaG9zdCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2hvc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuS4iuS8oOS4rVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBwcm9jZXNzaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICB9XG5cbiAgICBzZXQgcHJvY2Vzc2luZyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9wcm9jZXNzaW5nID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57kuIrkvKDmjqfliLbkv6Hmga8o5LiD54mb5pyN5Yqh5Zmo6L+U5Zue5YmN5LiA5qyh5LiK5Lyg6L+U5Zue55qE5YiG54mH5LiK5Lyg5o6n5Yi25L+h5oGvLOeUqOS6juS4i+S4gOasoeS4iuS8oCznrKzkuIDkuKpjaHVua+atpOWAvOS4uuepuilcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBjdHgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N0eDtcbiAgICB9XG5cbiAgICBzZXQgY3R4KHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fY3R4ID0gdmFsdWU7XG4gICAgfVxufVxuXG5cbmV4cG9ydCB7Q2h1bmtUYXNrLCBCbG9jaywgQ2h1bmt9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91cGxvYWQvdGFzay9DaHVua1Rhc2sudHMiLCJpbXBvcnQgQmFzZVRhc2sgZnJvbSBcIi4vQmFzZVRhc2tcIjtcbi8qKlxuICog55u05Lyg5Lu75YqhXG4gKi9cbmNsYXNzIERpcmVjdFRhc2sgZXh0ZW5kcyBCYXNlVGFzayB7XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlyZWN0VGFzaztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXBsb2FkL3Rhc2svRGlyZWN0VGFzay50cyIsImNsYXNzIFVVSUQge1xuICAgIHB1YmxpYyBzdGF0aWMgdXVpZCgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgbGV0IHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XG4gICAgICAgICAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xuICAgICAgICAgICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVVUlEO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3VwbG9hZC91dWlkL1VVSUQudHMiXSwic291cmNlUm9vdCI6IiJ9