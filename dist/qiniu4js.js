!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Qiniu4js=t():e.Qiniu4js=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return Object.defineProperty(e,"enable",{get:function(){return this._enable},set:function(e){this._enable=e},enumerable:!0,configurable:!0}),e.d=function(t){e._enable&&console.debug(t)},e.l=function(t){e._enable&&console.log(t)},e.e=function(t){e._enable&&console.error(t)},e.w=function(t){e._enable&&console.warn(t)},e.i=function(t){e._enable&&console.info(t)},e}();r._enable=!0,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(9),i=n(11),s=n(2),u=n(0),a=n(5),c=n(8),l=n(7);n(12);var p=function(){function e(e){var t=this;this.FILE_INPUT_EL_ID="qiniu4js-input",this._taskQueue=[],this._tasking=!1,this._scale=[],this._saveKey=!1,this.handleFiles=function(){if(0!=t.fileInput.files.length){t.generateTask();for(var e=!1,n=[],r=0,o=t.taskQueue;r<o.length;r++)for(var i=o[r],s=0,a=t.interceptors;s<a.length;s++){var c=a[s];if(c.onIntercept(i)&&(n.push(i),u.default.d("任务拦截器拦截了任务:"),u.default.d(i)),c.onInterrupt(i)){e=!0;break}}if(e)return void u.default.w("任务拦截器中断了任务队列");for(var l=0,p=n;l<p.length;l++){var i=p[l],f=t.taskQueue.indexOf(i);-1!=f&&t.taskQueue.splice(f,1)}t.listener.onReady(t.taskQueue),t.handleImages().then(function(){t.auto&&(u.default.d("开始自动上传"),t.start())})}},this.resolveUUID=function(e){var t=/\$\(uuid\)/;return t.test(e)?e.replace(t,i.default.uuid()):e},this.resolveImageInfo=function(e,t){var n=/\$\(imageInfo\.width\)/,r=/\$\(imageInfo\.height\)/;return n.test(t)||r.test(t)?new Promise(function(o){var i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){t=t.replace(n,i.width.toString()),t=t.replace(r,i.height.toString()),o(t)}}):Promise.resolve(t)},this.onSaveKeyResolved=function(e){return t._tokenShare=t._tokenShare&&t._saveKey==e,e},this._retry=e.getRetry,this._size=e.getSize,this._chunk=e.getChunk,this._auto=e.getAuto,this._multiple=e.getMultiple,this._accept=e.getAccept,this._button=e.getButton,this._buttonEventName=e.getButtonEventName,this._compress=e.getCompress,this._scale=e.getScale,this._saveKey=e.getSaveKey,this._tokenFunc=e.getTokenFunc,this._tokenShare=e.getTokenShare,this._listener=Object.assign(new a.default,e.getListener),this._interceptors=e.getInterceptors,this._domain=e.getDomain,this._fileInputId=this.FILE_INPUT_EL_ID+"_"+(new Date).getTime(),u.default.enable=e.getIsDebug,this.validateOptions(),this.init()}return e.prototype.init=function(){this.initFileInputEl()},e.prototype.initUploadPattern=function(){},e.prototype.initFileInputEl=function(){var e=document.getElementById(this._fileInputId);if(this._fileInput=e||document.createElement("input"),this.fileInput.type="file",this.fileInput.id=this._fileInputId,this.fileInput.style.display="none",this.multiple&&(this.fileInput.multiple=!0),this.accept&&0!=this.accept.length){for(var t="",n=0,r=this.accept;n<r.length;n++){t+=r[n],t+=","}t.endsWith(",")&&(t=t.substring(0,t.length-1)),this.fileInput.accept=t,u.default.d("accept类型 "+t)}if(document.body.appendChild(this.fileInput),this.fileInput.addEventListener("change",this.handleFiles,!1),void 0!=this._button){document.getElementById(this._button).addEventListener(this._buttonEventName,this.chooseFile.bind(this))}},e.prototype.resetUploader=function(){u.default.d("开始重置 uploader"),this.taskQueue.length=0,u.default.d("任务队列已清空"),this._token=null,u.default.d("token已清空"),u.default.d("uploader 重置完毕")},e.isChunkTask=function(e){return e.constructor.name===o.ChunkTask.name&&e instanceof o.ChunkTask},e.isDirectTask=function(e){return e.constructor.name===r.default.name&&e instanceof r.default},e.prototype.generateTask=function(){this.resetUploader();for(var e=this.fileInput.files,t=0;t<this.fileInput.files.length;t++){var n=e[t],i=void 0;i=this.chunk&&n.size>s.default.BLOCK_SIZE?new o.ChunkTask(n,s.default.BLOCK_SIZE,this.size):new r.default(n),0==this._saveKey&&(i.key=this.listener.onTaskGetKey(i)),this.taskQueue.push(i)}},e.prototype.handleImages=function(){var t=[];if(1!=this.compress||0!=this.scale[0]||0!=this.scale[1])for(var n=this,r=0,o=this.taskQueue;r<o.length;r++){var i=o[r];!function(r){if(!r.file.type.match("image.*"))return"continue";u.default.d(r.file.name+" 处理前的图片大小:"+r.file.size/1024+" kb");var o=document.createElement("canvas"),i=new Image,s=o.getContext("2d");i.src=URL.createObjectURL(r.file);var a=n;t.push(new Promise(function(e){return i.onload=function(){var t=i.width,n=i.height,c=a.scale[0],l=a.scale[1];0==c&&l>0?(o.width=t/n*l,o.height=l):0==l&&c>0?(o.width=c,o.height=n/t*c):c>0&&l>0?(o.width=c,o.height=l):(o.width=i.width,o.height=i.height),s.drawImage(i,0,0,o.width,o.height),console.log(o),console.log(o.toBlob),o.toBlob(function(t){e(t),u.default.d(r.file.name+" 处理后的图片大小:"+t.size/1024+" kb")},"image/jpeg",.95*a.compress)}}).then(function(t){t.name=r.file.name,r.file=t,e.isChunkTask(r)&&r.spliceFile2Block()}))}(i)}return Promise.all(t)},e.prototype.validateOptions=function(){if(u.default.d("开始检查构建参数合法性"),!this._tokenFunc)throw new Error("你必须提供一个获取Token的回调函数");if(!this.scale||!this.scale instanceof Array||2!=this.scale.length||this.scale[0]<0||this.scale[1]<0)throw new Error("scale必须是长度为2的number类型的数组,scale[0]为宽度，scale[1]为长度,必须大于等于0");u.default.d("构建参数检查完毕")},e.prototype.start=function(){if(u.default.d("上传任务遍历开始"),0==this.fileInput.files.length)throw new Error("没有选中的文件，无法开始上传");if(this.tasking)throw new Error("任务执行中，请不要重复上传");this.listener.onStart(this.taskQueue);for(var t=0,n=this.taskQueue;t<n.length;t++){var r=n[t];if(u.default.d("上传文件名："+r.file.name),u.default.d("上传文件大小："+r.file.size+"字节，"+r.file.size/1024+" kb，"+r.file.size/1024/1024+" mb"),e.isDirectTask(r))u.default.d("该上传任务为直传任务"),new c.default(this).upload(r);else{if(!e.isChunkTask(r))throw new Error("非法的task类型");u.default.d("该上传任务为分片任务"),new l.default(this).upload(r)}}},e.prototype.isTaskQueueFinish=function(){for(var e=0,t=this.taskQueue;e<t.length;e++){if(!t[e].isFinish)return!1}return!0},e.prototype.chooseFile=function(){this.fileInput.click()},e.prototype.getToken=function(e){var t=this;return this._tokenShare&&void 0!=this._token?Promise.resolve(this._token):(u.default.d("开始获取上传token"),Promise.resolve(this._tokenFunc(this,e)).then(function(e){return u.default.d("上传token获取成功: "+e),t._token=e,e}))},e.prototype.requestTaskToken=function(e,t){var n=this;return this.resolveSaveKey(e).then(function(e){return n.requestToken(t,e)})},e.prototype.requestToken=function(e,t){return new Promise(function(n,r){"string"==typeof t&&(e+=(/\?/.test(e)?"&":"?")+"saveKey="+encodeURIComponent(t)),e+=(/\?/.test(e)?"&":"?")+(new Date).getTime();var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){if(o.readyState==XMLHttpRequest.DONE)return 200==o.status?void n(o.response.uptoken):void r(o.response)},o.onabort=function(){r("aborted")},o.responseType="json",o.send()})},e.prototype.resolveSaveKey=function(e){var t=this,n=this._saveKey;return"string"!=typeof n?Promise.resolve(void 0):Promise.resolve(n).then(this.resolveUUID).then(function(n){return t.resolveImageInfo(e.file,n)}).then(this.onSaveKeyResolved)},Object.defineProperty(e.prototype,"retry",{get:function(){return this._retry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"auto",{get:function(){return this._auto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"accept",{get:function(){return this._accept},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compress",{get:function(){return this._compress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this._listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileInput",{get:function(){return this._fileInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chunk",{get:function(){return this._chunk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taskQueue",{get:function(){return this._taskQueue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tasking",{get:function(){return this._tasking},set:function(e){this._tasking=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interceptors",{get:function(){return this._interceptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domain",{get:function(){return this._domain},enumerable:!0,configurable:!0}),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(6),i=function(){function e(){this._retry=0,this._domain=e.UPLOAD_DOMAIN,this._scheme=null,this._size=1048576,this._chunk=!0,this._auto=!0,this._multiple=!0,this._accept=[],this._compress=1,this._scale=[0,0],this._saveKey=!1,this._tokenShare=!0,this._interceptors=[],this._isDebug=!1}return e.prototype.domain=function(e){return this._domain=e,this},e.prototype.scheme=function(e){return this._scheme=e,this},e.prototype.interceptor=function(e){return this._interceptors.push(Object.assign(new o.default,e)),this},e.prototype.retry=function(e){return this._retry=e,this},e.prototype.size=function(t){return this._size=Math.min(Math.max(t,1),e.MAX_CHUNK_SIZE),this},e.prototype.auto=function(e){return this._auto=e,this},e.prototype.multiple=function(e){return this._multiple=e,this},e.prototype.accept=function(e){return this._accept=e,this},e.prototype.button=function(e,t){return void 0===t&&(t="click"),this._button=e,this._buttonEventName=t,this},e.prototype.compress=function(e){return this._compress=Math.max(Math.min(e,1),0),this},e.prototype.scale=function(e){return this._scale=e,this},e.prototype.saveKey=function(e){return this._saveKey=e,this},e.prototype.tokenUrl=function(e){return this._tokenFunc=function(t,n){return t.requestTaskToken(n,e)},this},e.prototype.tokenFunc=function(e){return this._tokenFunc=function(t,n){return new Promise(function(t){e(t,n)})},this},e.prototype.listener=function(e){return this._listener=e,this},e.prototype.tokenShare=function(e){return this._tokenShare=e,this},e.prototype.chunk=function(e){return this._chunk=e,this},e.prototype.debug=function(e){return this._isDebug=e,this},Object.defineProperty(e.prototype,"getRetry",{get:function(){return this._retry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getSize",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getAuto",{get:function(){return this._auto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getMultiple",{get:function(){return this._multiple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getAccept",{get:function(){return this._accept},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getButton",{get:function(){return this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getButtonEventName",{get:function(){return this._buttonEventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getCompress",{get:function(){return this._compress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getScale",{get:function(){return this._scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getListener",{get:function(){return this._listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getSaveKey",{get:function(){return this._saveKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getTokenFunc",{get:function(){return this._tokenFunc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getTokenShare",{get:function(){return this._tokenShare},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getChunk",{get:function(){return this._chunk},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getIsDebug",{get:function(){return this._isDebug},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getInterceptors",{get:function(){return this._interceptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getDomain",{get:function(){var t=this._domain;if(null==t&&(t=e.UPLOAD_DOMAIN),"string"!=typeof t){var n=this._scheme;if("string"!=typeof n){var r=window.location.protocol;n=r.substring(0,r.length-1)}t=t[n]}return t.endsWith("/")?t.substring(0,t.length-1):t},enumerable:!0,configurable:!0}),e.prototype.build=function(){return new r.default(this)},e}();i.MAX_CHUNK_SIZE=4194304,i.BLOCK_SIZE=i.MAX_CHUNK_SIZE,i.UPLOAD_URL="http://upload.qiniu.com",i.UPLOAD_DOMAIN={http:"http://upload.qiniu.com",https:"https://up.qbox.me"},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._retry=0,this._progress=0,this._isSuccess=!1,this._isFinish=!1,this._file=e,this._createDate=new Date}return Object.defineProperty(e.prototype,"file",{get:function(){return this._file},set:function(e){this._file=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"retry",{get:function(){return this._retry},set:function(e){this._retry=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createDate",{get:function(){return this._createDate},set:function(e){this._createDate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startDate",{get:function(){return this._startDate},set:function(e){this._startDate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this._endDate},set:function(e){this._endDate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSuccess",{get:function(){return this._isSuccess},set:function(e){this._isSuccess=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},set:function(e){this._progress=Math.min(Math.max(0,e),100)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},set:function(e){this._result=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},set:function(e){this._error=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},set:function(e){this._key=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFinish",{get:function(){return this._isFinish},set:function(e){this._isFinish=e},enumerable:!0,configurable:!0}),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.Uploader=r.default;var o=n(2);t.UploaderBuilder=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.onReady=function(e){},e.prototype.onStart=function(e){},e.prototype.onTaskProgress=function(e){},e.prototype.onTaskGetKey=function(e){return null},e.prototype.onTaskFail=function(e){},e.prototype.onTaskSuccess=function(e){},e.prototype.onTaskRetry=function(e){},e.prototype.onFinish=function(e){},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.onIntercept=function(e){return!1},e.prototype.onInterrupt=function(e){return!1},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){this.uploader=e}return e.prototype.init=function(e){this.uploader=e},e.prototype.upload=function(e){var t=this;this.task=e,this.uploader.getToken(e).then(function(n){e.startDate=new Date,t.uploadBlock(n)})},e.prototype.uploadBlock=function(e){var t=this;r.default.d("准备开始上传块");var n=Promise.resolve();r.default.d("共"+this.task.blocks.length+"块等待上传"),r.default.d("共"+this.task.totalChunkCount+"分片等待上传"),this.task.blocks.forEach(function(o,i){o.chunks.forEach(function(o,s){n=n.then(function(){return r.default.d("开始上传第"+(i+1)+"块,第"+(s+1)+"片"),t.uploadChunk(o,e)})})}),n.then(function(){return t.concatChunks(e)}).then(function(){t.uploader.isTaskQueueFinish()&&(r.default.d("上传任务队列已结束"),t.uploader.tasking=!1,t.uploader.listener.onFinish(t.uploader.taskQueue))}).catch(function(e){r.default.w(t.task.file.name+"分块上传失败"),t.task.error=e,t.task.isSuccess=!1,t.task.isFinish=!0,t.task.endDate=new Date,t.uploader.listener.onTaskFail(t.task)})},e.prototype.uploadChunk=function(e,t){var n=this;return new Promise(function(r,o){var i=0==e.block.chunks.indexOf(e),s=e.block.chunks.indexOf(e),u=i?null:e.block.chunks[s-1],a=i?n.getUploadBlockUrl(e.block.data.size):n.getUploadChunkUrl(e.start,u?u.ctx:null,u?u.host:null),c=new XMLHttpRequest;c.open("POST",a+=(/\?/.test(a)?"&":"?")+(new Date).getTime(),!0),c.setRequestHeader("Content-Type","application/octet-stream"),c.setRequestHeader("Authorization","UpToken "+t),c.upload.onprogress=function(t){if(t.lengthComputable){var r=Math.round((n.task.finishedBlocksSize+e.start+t.loaded)/n.task.file.size*100);n.task.progress<r&&(n.task.progress=r,n.uploader.listener.onTaskProgress(n.task))}},c.upload.onload=function(){var t=Math.round((n.task.finishedBlocksSize+e.start+e.data.size)/n.task.file.size*100);n.task.progress<t&&(n.task.progress=t,n.uploader.listener.onTaskProgress(n.task))},c.onreadystatechange=function(){if(c.readyState==XMLHttpRequest.DONE)if(200==c.status&&""!=c.responseText){var t=JSON.parse(c.responseText);e.isFinish=!0,e.processing=!1,e.ctx=t.ctx,e.host=t.host;var n=e.block.chunks.indexOf(e),i=n!=e.block.chunks.length-1;i||(e.block.isFinish=!0,e.block.processing=!1),r()}else o(c.response)},c.send(e.data)})},e.prototype.concatChunks=function(e){var t=this;return new Promise(function(n,o){var i=t.task.key?btoa(t.task.key):null;i&&(i=i.replace(/\+/g,"-"),i=i.replace(/\//g,"_"));for(var s=t.getMakeFileUrl(t.task.file.size,i),u="",a=0,c=t.task.blocks;a<c.length;a++){var l=c[a];u+=l.chunks[l.chunks.length-1].ctx+","}u.endsWith(",")&&(u=u.substring(0,u.length-1));var p=new XMLHttpRequest;p.open("POST",s+=(/\?/.test(s)?"&":"?")+(new Date).getTime(),!0),p.setRequestHeader("Content-Type","text/plain"),p.setRequestHeader("Authorization","UpToken "+e),p.onreadystatechange=function(){if(p.readyState==XMLHttpRequest.DONE)if(t.task.isFinish=!0,200==p.status&&""!=p.responseText){var e=JSON.parse(p.responseText);t.task.isSuccess=!0,t.task.result=e,t.task.endDate=new Date,t.uploader.listener.onTaskSuccess(t.task),n()}else t.retryTask(t.task)?(r.default.w(t.task.file.name+"分块上传失败,准备开始重传"),t.uploader.listener.onTaskRetry(t.task)):o(p.response)},p.send(u)})},e.prototype.getUploadBlockUrl=function(e){return this.uploader.domain+"/mkblk/"+e},e.prototype.getUploadChunkUrl=function(e,t,n){return(n||this.uploader.domain)+"/bput/"+t+"/"+e+"/"},e.prototype.getMakeFileUrl=function(e,t){return t?this.uploader.domain+"/mkfile/"+e+"/key/"+t:this.uploader.domain+"/mkfile/"+e},e.prototype.retryTask=function(e){return e.retry>=this.uploader.retry?(r.default.w(e.file.name+"达到重传次数上限"+this.uploader.retry+",停止重传"),!1):(e.retry++,r.default.w(e.file.name+"开始重传,当前重传次数"+e.retry),!0)},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){this.uploader=e}return e.prototype.upload=function(e){var t=this;this.task=e,this.uploader.getToken(e).then(function(n){e.startDate=new Date,t.uploadFile(n)})},e.prototype.createFormData=function(e){var t=this.task,n=new FormData;return null!==t.key&&void 0!==t.key&&n.append("key",t.key),n.append("token",e),n.append("file",t.file),r.default.d("创建formData对象"),n},e.prototype.uploadFile=function(e){var t=this,n=this.task,o=new XMLHttpRequest;o.upload.onprogress=function(e){if(e.lengthComputable){var r=Math.round(100*e.loaded/e.total);n.progress<r&&(n.progress=r,t.uploader.listener.onTaskProgress(n))}},o.upload.onload=function(){n.progress<100&&(n.progress=100,t.uploader.listener.onTaskProgress(n))};var i=this.uploader.domain;i+=(/\?/.test(this.uploader.domain)?"&":"?")+(new Date).getTime(),o.open("POST",i,!0),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(200==o.status&&""!=o.responseText?(n.result=JSON.parse(o.responseText),n.isSuccess=!0,n.isFinish=!0,n.endDate=new Date,t.uploader.listener.onTaskSuccess(n)):t.retryTask(n)?(r.default.w(n.file.name+"上传失败,准备开始重传"),t.uploader.listener.onTaskRetry(n)):(r.default.w(n.file.name+"上传失败"),n.error=o.response,n.isSuccess=!1,n.isFinish=!0,n.endDate=new Date,t.uploader.listener.onTaskFail(n)),t.uploader.isTaskQueueFinish()&&(t.uploader.tasking=!1,t.uploader.listener.onFinish(t.uploader.taskQueue)))};var s=this.createFormData(e);o.send(s),r.default.d("发送ajax post 请求")},e.prototype.retryTask=function(e){return r.default.d("开始尝试重传"),e.retry>=this.uploader.retry?(r.default.w(e.file.name+"达到重传次数上限"+this.uploader.retry+",停止重传"),!1):(e.retry++,r.default.w(e.file.name+"开始重传,当前重传次数"+e.retry),this.upload(e),!0)},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o._blocks=[],o._blockSize=0,o._chunkSize=0,o._blockSize=n,o._chunkSize=r,o.spliceFile2Block(),o}return r(t,e),t.prototype.spliceFile2Block=function(){this._blocks=[];for(var e=this._file.size,t=this._file,n=Math.ceil(e/this._blockSize),r=0;r<n;r++){var o=r*this._blockSize,i=o+this._blockSize,u=new s(o,i,t.slice(o,i),this._chunkSize,t);this._blocks.push(u)}},Object.defineProperty(t.prototype,"blocks",{get:function(){return this._blocks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processingBlock",{get:function(){for(var e=0,t=this._blocks;e<t.length;e++){var n=t[e];if(n.processing)return n}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finishedBlocksSize",{get:function(){for(var e=0,t=0,n=this._blocks;t<n.length;t++){var r=n[t];e+=r.isFinish?r.data.size:0}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chunks",{get:function(){for(var e=[],t=0,n=this._blocks;t<n.length;t++)for(var r=n[t],o=0,i=r.chunks;o<i.length;o++){var s=i[o];e.push(s)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processingChunk",{get:function(){for(var e=0,t=this._blocks;e<t.length;e++){var n=t[e];if(n.processing)for(var r=0,o=n.chunks;r<o.length;r++){var i=o[r];if(i.processing)return i}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalChunkCount",{get:function(){for(var e=0,t=0,n=this._blocks;t<n.length;t++){e+=n[t].chunks.length}return e},enumerable:!0,configurable:!0}),t}(o.default);t.ChunkTask=i;var s=function(){function e(e,t,n,r,o){this._chunks=[],this._isFinish=!1,this._processing=!1,this._data=n,this._start=e,this._end=t,this._file=o,this.spliceBlock2Chunk(r)}return e.prototype.spliceBlock2Chunk=function(e){for(var t=this._data.size,n=this._data,r=Math.ceil(t/e),o=0;o<r;o++){var i=o*e,s=i+e,a=new u(i,s,n.slice(i,s),this);this._chunks.push(a)}},Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},set:function(e){this._processing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"file",{get:function(){return this._file},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFinish",{get:function(){return this._isFinish},set:function(e){this._isFinish=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chunks",{get:function(){return this._chunks},enumerable:!0,configurable:!0}),e}();t.Block=s;var u=function(){function e(e,t,n,r){this._processing=!1,this._isFinish=!1,this._start=e,this._end=t,this._data=n,this._block=r}return Object.defineProperty(e.prototype,"block",{get:function(){return this._block},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFinish",{get:function(){return this._isFinish},set:function(e){this._isFinish=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},set:function(e){this._processing=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ctx",{get:function(){return this._ctx},set:function(e){this._ctx=e},enumerable:!0,configurable:!0}),e}();t.Chunk=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.uuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},e}();t.default=r},function(e,t){}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9xaW5pdTRqcy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZGRjMmMyZjM2ODlhNzhlYWMyNTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvRGVidWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC9VcGxvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL1VwbG9hZGVyQnVpbGRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL3Rhc2svQmFzZVRhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC9ob29rL1NpbXBsZVVwbG9hZExpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvaW50ZXJjZXB0b3IvU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VwbG9hZC9wYXR0cmVuL0NodW5rVXBsb2FkUGF0dGVybi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL3BhdHRyZW4vRGlyZWN0VXBsb2FkUGF0dGVybi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXBsb2FkL3Rhc2svQ2h1bmtUYXNrLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvdGFzay9EaXJlY3RUYXNrLnRzIiwid2VicGFjazovLy8uL3NyYy91cGxvYWQvdXVpZC9VVUlELnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwidmFsdWUiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkRlYnVnIiwiX2VuYWJsZSIsInNldCIsImNvbnNvbGUiLCJkZWJ1ZyIsImxvZyIsImUiLCJlcnJvciIsInciLCJ3YXJuIiwiaW5mbyIsImRlZmF1bHQiLCJEaXJlY3RUYXNrXzEiLCJDaHVua1Rhc2tfMSIsIlVVSURfMSIsIlVwbG9hZGVyQnVpbGRlcl8xIiwiRGVidWdfMSIsIlNpbXBsZVVwbG9hZExpc3RlbmVyXzEiLCJEaXJlY3RVcGxvYWRQYXR0ZXJuXzEiLCJDaHVua1VwbG9hZFBhdHRlcm5fMSIsIlVwbG9hZGVyIiwiYnVpbGRlciIsIl90aGlzIiwiRklMRV9JTlBVVF9FTF9JRCIsIl90YXNrUXVldWUiLCJfdGFza2luZyIsIl9zY2FsZSIsIl9zYXZlS2V5IiwiaGFuZGxlRmlsZXMiLCJmaWxlSW5wdXQiLCJmaWxlcyIsImxlbmd0aCIsImdlbmVyYXRlVGFzayIsImlzSW50ZXJydXB0IiwiaW50ZXJjZXB0ZWRUYXNrcyIsIl9pIiwiX2EiLCJ0YXNrUXVldWUiLCJ0YXNrIiwiX2IiLCJfYyIsImludGVyY2VwdG9ycyIsImludGVyY2VwdG9yIiwib25JbnRlcmNlcHQiLCJwdXNoIiwib25JbnRlcnJ1cHQiLCJfZCIsImludGVyY2VwdGVkVGFza3NfMSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImxpc3RlbmVyIiwib25SZWFkeSIsImhhbmRsZUltYWdlcyIsInRoZW4iLCJhdXRvIiwic3RhcnQiLCJyZXNvbHZlVVVJRCIsInJlIiwidGVzdCIsInJlcGxhY2UiLCJ1dWlkIiwicmVzb2x2ZUltYWdlSW5mbyIsImJsb2IiLCJ3aWR0aFJlIiwiaGVpZ2h0UmUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImltZyIsIkltYWdlIiwic3JjIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwib25sb2FkIiwid2lkdGgiLCJ0b1N0cmluZyIsImhlaWdodCIsIm9uU2F2ZUtleVJlc29sdmVkIiwic2F2ZUtleSIsIl90b2tlblNoYXJlIiwiX3JldHJ5IiwiZ2V0UmV0cnkiLCJfc2l6ZSIsImdldFNpemUiLCJfY2h1bmsiLCJnZXRDaHVuayIsIl9hdXRvIiwiZ2V0QXV0byIsIl9tdWx0aXBsZSIsImdldE11bHRpcGxlIiwiX2FjY2VwdCIsImdldEFjY2VwdCIsIl9idXR0b24iLCJnZXRCdXR0b24iLCJfYnV0dG9uRXZlbnROYW1lIiwiZ2V0QnV0dG9uRXZlbnROYW1lIiwiX2NvbXByZXNzIiwiZ2V0Q29tcHJlc3MiLCJnZXRTY2FsZSIsImdldFNhdmVLZXkiLCJfdG9rZW5GdW5jIiwiZ2V0VG9rZW5GdW5jIiwiZ2V0VG9rZW5TaGFyZSIsIl9saXN0ZW5lciIsImFzc2lnbiIsImdldExpc3RlbmVyIiwiX2ludGVyY2VwdG9ycyIsImdldEludGVyY2VwdG9ycyIsIl9kb21haW4iLCJnZXREb21haW4iLCJfZmlsZUlucHV0SWQiLCJEYXRlIiwiZ2V0VGltZSIsImVuYWJsZSIsImdldElzRGVidWciLCJ2YWxpZGF0ZU9wdGlvbnMiLCJpbml0IiwiaW5pdEZpbGVJbnB1dEVsIiwiaW5pdFVwbG9hZFBhdHRlcm4iLCJleGlzdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJfZmlsZUlucHV0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJpZCIsInN0eWxlIiwiZGlzcGxheSIsIm11bHRpcGxlIiwiYWNjZXB0IiwiYWNjZXB0VmFsdWUiLCJlbmRzV2l0aCIsInN1YnN0cmluZyIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bmRlZmluZWQiLCJjaG9vc2VGaWxlIiwiYmluZCIsInJlc2V0VXBsb2FkZXIiLCJfdG9rZW4iLCJpc0NodW5rVGFzayIsImNvbnN0cnVjdG9yIiwiQ2h1bmtUYXNrIiwiaXNEaXJlY3RUYXNrIiwiZmlsZSIsImNodW5rIiwic2l6ZSIsIkJMT0NLX1NJWkUiLCJrZXkiLCJvblRhc2tHZXRLZXkiLCJwcm9taXNlcyIsImNvbXByZXNzIiwic2NhbGUiLCJ0aGlzXzEiLCJtYXRjaCIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJpbWdXIiwiaW1nSCIsInNjYWxlVyIsInNjYWxlSCIsImRyYXdJbWFnZSIsInRvQmxvYiIsInNwbGljZUZpbGUyQmxvY2siLCJhbGwiLCJFcnJvciIsIkFycmF5IiwidGFza2luZyIsIm9uU3RhcnQiLCJ1cGxvYWQiLCJpc1Rhc2tRdWV1ZUZpbmlzaCIsImlzRmluaXNoIiwiY2xpY2siLCJnZXRUb2tlbiIsInRva2VuIiwicmVxdWVzdFRhc2tUb2tlbiIsInVybCIsInJlc29sdmVTYXZlS2V5IiwicmVxdWVzdFRva2VuIiwicmVqZWN0IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJzdGF0dXMiLCJyZXNwb25zZSIsInVwdG9rZW4iLCJvbmFib3J0IiwicmVzcG9uc2VUeXBlIiwic2VuZCIsIlVwbG9hZGVyXzEiLCJTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcl8xIiwiVXBsb2FkZXJCdWlsZGVyIiwiVVBMT0FEX0RPTUFJTiIsIl9zY2hlbWUiLCJfaXNEZWJ1ZyIsImRvbWFpbiIsInNjaGVtZSIsInJldHJ5IiwiTWF0aCIsIm1pbiIsIm1heCIsIk1BWF9DSFVOS19TSVpFIiwiYnV0dG9uIiwiZXZlbnROYW1lIiwidG9rZW5VcmwiLCJ1cGxvYWRlciIsInRva2VuRnVuYyIsInRva2VuU2hhcmUiLCJwcm90b2NvbCIsIndpbmRvdyIsImxvY2F0aW9uIiwiYnVpbGQiLCJVUExPQURfVVJMIiwiaHR0cCIsImh0dHBzIiwiQmFzZVRhc2siLCJfcHJvZ3Jlc3MiLCJfaXNTdWNjZXNzIiwiX2lzRmluaXNoIiwiX2ZpbGUiLCJfY3JlYXRlRGF0ZSIsIl9zdGFydERhdGUiLCJfZW5kRGF0ZSIsIl9yZXN1bHQiLCJfZXJyb3IiLCJfa2V5IiwiU2ltcGxlVXBsb2FkTGlzdGVuZXIiLCJvblRhc2tQcm9ncmVzcyIsIm9uVGFza0ZhaWwiLCJvblRhc2tTdWNjZXNzIiwib25UYXNrUmV0cnkiLCJvbkZpbmlzaCIsIlNpbXBsZVVwbG9hZEludGVyY2VwdG9yIiwiQ2h1bmtVcGxvYWRQYXR0ZXJuIiwic3RhcnREYXRlIiwidXBsb2FkQmxvY2siLCJjaGFpbiIsImJsb2NrcyIsInRvdGFsQ2h1bmtDb3VudCIsImZvckVhY2giLCJibG9jayIsImJsb2NrSW5kZXgiLCJjaHVua3MiLCJjaHVua0luZGV4IiwidXBsb2FkQ2h1bmsiLCJjb25jYXRDaHVua3MiLCJjYXRjaCIsImlzU3VjY2VzcyIsImVuZERhdGUiLCJpc0ZpcnN0Q2h1bmtJbkJsb2NrIiwicHJldkNodW5rIiwiZ2V0VXBsb2FkQmxvY2tVcmwiLCJkYXRhIiwiZ2V0VXBsb2FkQ2h1bmtVcmwiLCJob3N0Iiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucHJvZ3Jlc3MiLCJsZW5ndGhDb21wdXRhYmxlIiwicHJvZ3Jlc3MiLCJyb3VuZCIsImZpbmlzaGVkQmxvY2tzU2l6ZSIsImxvYWRlZCIsInJlc3BvbnNlVGV4dCIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsInByb2Nlc3NpbmciLCJjaHVua0luZGV4XzEiLCJoYXNOZXh0Q2h1bmtJblRoaXNCbG9jayIsImVuY29kZWRLZXkiLCJidG9hIiwiZ2V0TWFrZUZpbGVVcmwiLCJjdHhMaXN0U3RyaW5nIiwicmV0cnlUYXNrIiwiYmxvY2tTaXplIiwiZmlsZVNpemUiLCJEaXJlY3RVcGxvYWRQYXR0ZXJuIiwidXBsb2FkRmlsZSIsImNyZWF0ZUZvcm1EYXRhIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInRvdGFsIiwiX19leHRlbmRzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYiIsIl9fIiwiY3JlYXRlIiwiQmFzZVRhc2tfMSIsIl9zdXBlciIsImNodW5rU2l6ZSIsIl9ibG9ja3MiLCJfYmxvY2tTaXplIiwiX2NodW5rU2l6ZSIsImJsb2NrQ291bnQiLCJjZWlsIiwiZW5kIiwiQmxvY2siLCJzbGljZSIsImFycmF5IiwiY291bnQiLCJfY2h1bmtzIiwiX3Byb2Nlc3NpbmciLCJfZGF0YSIsIl9zdGFydCIsIl9lbmQiLCJzcGxpY2VCbG9jazJDaHVuayIsImNodW5rQ291bnQiLCJDaHVuayIsIl9ibG9jayIsIl9ob3N0IiwiX2N0eCIsIkRpcmVjdFRhc2siLCJhcHBseSIsImFyZ3VtZW50cyIsIlVVSUQiLCJyIiwicmFuZG9tIiwiZmxvb3IiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELElBQ0Esa0JBQUFHLGdCQUFBQyxJQUNBRCxVQUFBSCxHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLFNBQUFELElBRUFELEVBQUEsU0FBQUMsS0FDQ0ssS0FBQSxXQUNELE1DQWdCLFVBQVVDLEdDTjFCLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBUCxPQUdBLElBQUFDLEdBQUFPLEVBQUFELElBQ0FFLEVBQUFGLEVBQ0FHLEdBQUEsRUFDQVYsV0FVQSxPQU5BSyxHQUFBRSxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBdkJBLEdBQUFRLEtBK0RBLE9BbkNBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBRyxFQUFBLFNBQUFLLEdBQTJDLE1BQUFBLElBRzNDUixFQUFBUyxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBWCxFQUFBWSxFQUFBbEIsRUFBQWdCLElBQ0FHLE9BQUFDLGVBQUFwQixFQUFBZ0IsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFYLEVBQUFrQixFQUFBLFNBQUF2QixHQUNBLEdBQUFnQixHQUFBaEIsS0FBQXdCLFdBQ0Es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LEdBQUEsUUFBQXVCLEtadTZEUSxNQUFrQixRQUFYdkIsR0FBbUJBLEVBQU93QixNQUFNN1YsS0FBTThWLFlBQWM5VixLWXI2RG5FLE1BRnlCNlQsR0FBQStCLEVBQUF2QixHQUV6QnVCLEdBRnlCeEIsRUFBQTdSLFFBSXpCM0MsR0FBQTJDLFFBQWVxVCxHWjQ2RFQsU0FBVS9WLEVBQVFELEVBQVNNLEdBRWpDLFlBRUFhLFFBQU9DLGVBQWVwQixFQUFTLGNBQWdCYyxPQUFPLEdheDdEdEQsSUFBQXFWLEdBQUEsbUJBQUFBLE1BU0EsTUFSa0JBLEdBQUF0USxLQUFkLFdBQ0ksR0FBSTlFLElBQUksR0FBSWdJLE9BQU9DLFNBQ25CLE9BQU8sdUNBQXVDcEQsUUFBUSxRQUFTLFNBQVUvRSxHQUNyRSxHQUFJdVYsSUFBS3JWLEVBQW9CLEdBQWhCNk4sS0FBS3lILFVBQWlCLEdBQUssQ0FFeEMsT0FEQXRWLEdBQUk2TixLQUFLMEgsTUFBTXZWLEVBQUksS0FDTixLQUFMRixFQUFXdVYsRUFBUyxFQUFKQSxFQUFVLEdBQU16UCxTQUFTLE9BRzdEd1AsSUFFQW5XLEdBQUEyQyxRQUFld1QsR2JnOERULFNBQVVsVyxFQUFRRCIsImZpbGUiOiJxaW5pdTRqcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlFpbml1NGpzXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlFpbml1NGpzXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlFpbml1NGpzXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlFpbml1NGpzXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG52YXIgRGVidWcgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERlYnVnKCkge1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVidWcsIFwiZW5hYmxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZW5hYmxlID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIERlYnVnLmQgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgIGlmICghRGVidWcuX2VuYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUuZGVidWcob2JqZWN0KTtcbiAgICB9O1xuICAgIDtcbiAgICBEZWJ1Zy5sID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhvYmplY3QpO1xuICAgIH07XG4gICAgRGVidWcuZSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgaWYgKCFEZWJ1Zy5fZW5hYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5lcnJvcihvYmplY3QpO1xuICAgIH07XG4gICAgRGVidWcudyA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgaWYgKCFEZWJ1Zy5fZW5hYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuKG9iamVjdCk7XG4gICAgfTtcbiAgICBEZWJ1Zy5pID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmluZm8ob2JqZWN0KTtcbiAgICB9O1xuICAgIHJldHVybiBEZWJ1Zztcbn0oKSk7XG5EZWJ1Zy5fZW5hYmxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IERlYnVnO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIERpcmVjdFRhc2tfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xudmFyIENodW5rVGFza18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbnZhciBVVUlEXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcbnZhciBVcGxvYWRlckJ1aWxkZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG52YXIgRGVidWdfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgU2ltcGxlVXBsb2FkTGlzdGVuZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG52YXIgRGlyZWN0VXBsb2FkUGF0dGVybl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBDaHVua1VwbG9hZFBhdHRlcm5fMSA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcbnZhciBVcGxvYWRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXBsb2FkZXIoYnVpbGRlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLkZJTEVfSU5QVVRfRUxfSUQgPSAncWluaXU0anMtaW5wdXQnO1xuICAgICAgICB0aGlzLl90YXNrUXVldWUgPSBbXTsgLy/ku7vliqHpmJ/liJdcbiAgICAgICAgdGhpcy5fdGFza2luZyA9IGZhbHNlOyAvL+S7u+WKoeaJp+ihjOS4rVxuICAgICAgICB0aGlzLl9zY2FsZSA9IFtdOyAvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5TnvKnmlL5baDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5TnvKnmlL5baDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWkhOeQhuaWh+S7tlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVGaWxlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8v5aaC5p6c5rKh5pyJ6YCJ5Lit5paH5Lu25bCx6L+U5ZueXG4gICAgICAgICAgICBpZiAoX3RoaXMuZmlsZUlucHV0LmZpbGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/nlJ/miJB0YXNrXG4gICAgICAgICAgICBfdGhpcy5nZW5lcmF0ZVRhc2soKTtcbiAgICAgICAgICAgIC8v5piv5ZCm5Lit5pat5Lu75YqhXG4gICAgICAgICAgICB2YXIgaXNJbnRlcnJ1cHQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBpbnRlcmNlcHRlZFRhc2tzID0gW107XG4gICAgICAgICAgICAvL+S7u+WKoeaLpuaIquWZqOi/h+a7pFxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRhc2tRdWV1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFzayA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gX3RoaXMuaW50ZXJjZXB0b3JzOyBfYiA8IF9jLmxlbmd0aDsgX2IrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJjZXB0b3IgPSBfY1tfYl07XG4gICAgICAgICAgICAgICAgICAgIC8v5oum5oiq55Sf5pWIXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcmNlcHRvci5vbkludGVyY2VwdCh0YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJjZXB0ZWRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCLku7vliqHmi6bmiKrlmajmi6bmiKrkuobku7vliqE6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQodGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy/miZPmlq3nlJ/mlYhcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLm9uSW50ZXJydXB0KHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+WwhuaJk+aWreagh+W/l+S9jeiuvuS4unRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW50ZXJydXB0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzSW50ZXJydXB0KSB7XG4gICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LncoXCLku7vliqHmi6bmiKrlmajkuK3mlq3kuobku7vliqHpmJ/liJdcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ku47ku7vliqHpmJ/liJfkuK3ljrvpmaTku7vliqFcbiAgICAgICAgICAgIGZvciAodmFyIF9kID0gMCwgaW50ZXJjZXB0ZWRUYXNrc18xID0gaW50ZXJjZXB0ZWRUYXNrczsgX2QgPCBpbnRlcmNlcHRlZFRhc2tzXzEubGVuZ3RoOyBfZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhc2sgPSBpbnRlcmNlcHRlZFRhc2tzXzFbX2RdO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzLnRhc2tRdWV1ZS5pbmRleE9mKHRhc2spO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50YXNrUXVldWUuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+Wbnuiwg+WHveaVsOWHveaVsFxuICAgICAgICAgICAgX3RoaXMubGlzdGVuZXIub25SZWFkeShfdGhpcy50YXNrUXVldWUpO1xuICAgICAgICAgICAgLy/lpITnkIblm77niYdcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZUltYWdlcygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8v6Ieq5Yqo5LiK5LygXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmF1dG8pIHtcbiAgICAgICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCLlvIDlp4voh6rliqjkuIrkvKBcIik7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVzb2x2ZVVVSUQgPSBmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgdmFyIHJlID0gL1xcJFxcKHV1aWRcXCkvO1xuICAgICAgICAgICAgaWYgKHJlLnRlc3QocykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcy5yZXBsYWNlKHJlLCBVVUlEXzEuZGVmYXVsdC51dWlkKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVzb2x2ZUltYWdlSW5mbyA9IGZ1bmN0aW9uIChibG9iLCBzKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGhSZSA9IC9cXCRcXChpbWFnZUluZm9cXC53aWR0aFxcKS87XG4gICAgICAgICAgICB2YXIgaGVpZ2h0UmUgPSAvXFwkXFwoaW1hZ2VJbmZvXFwuaGVpZ2h0XFwpLztcbiAgICAgICAgICAgIGlmICghd2lkdGhSZS50ZXN0KHMpICYmICFoZWlnaHRSZS50ZXN0KHMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzID0gcy5yZXBsYWNlKHdpZHRoUmUsIGltZy53aWR0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgcyA9IHMucmVwbGFjZShoZWlnaHRSZSwgaW1nLmhlaWdodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25TYXZlS2V5UmVzb2x2ZWQgPSBmdW5jdGlvbiAoc2F2ZUtleSkge1xuICAgICAgICAgICAgX3RoaXMuX3Rva2VuU2hhcmUgPSBfdGhpcy5fdG9rZW5TaGFyZSAmJiBfdGhpcy5fc2F2ZUtleSA9PSBzYXZlS2V5O1xuICAgICAgICAgICAgcmV0dXJuIHNhdmVLZXk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gYnVpbGRlci5nZXRSZXRyeTtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IGJ1aWxkZXIuZ2V0U2l6ZTtcbiAgICAgICAgdGhpcy5fY2h1bmsgPSBidWlsZGVyLmdldENodW5rO1xuICAgICAgICB0aGlzLl9hdXRvID0gYnVpbGRlci5nZXRBdXRvO1xuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IGJ1aWxkZXIuZ2V0TXVsdGlwbGU7XG4gICAgICAgIHRoaXMuX2FjY2VwdCA9IGJ1aWxkZXIuZ2V0QWNjZXB0O1xuICAgICAgICB0aGlzLl9idXR0b24gPSBidWlsZGVyLmdldEJ1dHRvbjtcbiAgICAgICAgdGhpcy5fYnV0dG9uRXZlbnROYW1lID0gYnVpbGRlci5nZXRCdXR0b25FdmVudE5hbWU7XG4gICAgICAgIHRoaXMuX2NvbXByZXNzID0gYnVpbGRlci5nZXRDb21wcmVzcztcbiAgICAgICAgdGhpcy5fc2NhbGUgPSBidWlsZGVyLmdldFNjYWxlO1xuICAgICAgICB0aGlzLl9zYXZlS2V5ID0gYnVpbGRlci5nZXRTYXZlS2V5O1xuICAgICAgICB0aGlzLl90b2tlbkZ1bmMgPSBidWlsZGVyLmdldFRva2VuRnVuYztcbiAgICAgICAgdGhpcy5fdG9rZW5TaGFyZSA9IGJ1aWxkZXIuZ2V0VG9rZW5TaGFyZTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBPYmplY3QuYXNzaWduKG5ldyBTaW1wbGVVcGxvYWRMaXN0ZW5lcl8xLmRlZmF1bHQoKSwgYnVpbGRlci5nZXRMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuX2ludGVyY2VwdG9ycyA9IGJ1aWxkZXIuZ2V0SW50ZXJjZXB0b3JzO1xuICAgICAgICB0aGlzLl9kb21haW4gPSBidWlsZGVyLmdldERvbWFpbjtcbiAgICAgICAgdGhpcy5fZmlsZUlucHV0SWQgPSB0aGlzLkZJTEVfSU5QVVRfRUxfSUQgKyBcIl9cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZW5hYmxlID0gYnVpbGRlci5nZXRJc0RlYnVnO1xuICAgICAgICB0aGlzLnZhbGlkYXRlT3B0aW9ucygpO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyW5pON5L2cXG4gICAgICovXG4gICAgVXBsb2FkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5pdEZpbGVJbnB1dEVsKCk7XG4gICAgICAgIC8vIHRoaXMuaW5pdFVwbG9hZFBhdHRlcm4oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOWIneWni+WMluS4iuS8oOaooeW8j1xuICAgICAqL1xuICAgIFVwbG9hZGVyLnByb3RvdHlwZS5pbml0VXBsb2FkUGF0dGVybiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGhpcy5fZGlyZWN0VXBsb2FkUGF0dGVybiA9IG5ldyBEaXJlY3RVcGxvYWRQYXR0ZXJuKCk7XG4gICAgICAgIC8vIHRoaXMuX2RpcmVjdFVwbG9hZFBhdHRlcm4uaW5pdCh0aGlzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcy5fY2h1bmtVcGxvYWRQYXR0ZXJuID0gbmV3IENodW5rVXBsb2FkUGF0dGVybigpO1xuICAgICAgICAvLyB0aGlzLl9jaHVua1VwbG9hZFBhdHRlcm4uaW5pdCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOWIneWni+WMlmZpbGUgaW5wdXQgZWxlbWVudFxuICAgICAqL1xuICAgIFVwbG9hZGVyLnByb3RvdHlwZS5pbml0RmlsZUlucHV0RWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8v5p+l6K+i5bey57uP5a2Y5Zyo55qEZmlsZSBpbnB1dFxuICAgICAgICB2YXIgZXhpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9maWxlSW5wdXRJZCk7XG4gICAgICAgIC8v5Yib5bu6aW5wdXTlhYPntKBcbiAgICAgICAgdGhpcy5fZmlsZUlucHV0ID0gZXhpc3QgPyBleGlzdCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7IC8vdHlwZSBmaWxlXG4gICAgICAgIHRoaXMuZmlsZUlucHV0LmlkID0gdGhpcy5fZmlsZUlucHV0SWQ7IC8vaWQg5pa55L6/5ZCO6Z2i5p+l5om+XG4gICAgICAgIHRoaXMuZmlsZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8v6ZqQ6JePZmlsZSBpbnB1dFxuICAgICAgICAvL+WkmuaWh+S7tlxuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgLy/lpJrmlofku7ZcbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvL+aWh+S7tuexu+Wei1xuICAgICAgICBpZiAodGhpcy5hY2NlcHQgJiYgdGhpcy5hY2NlcHQubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgIHZhciBhY2NlcHRWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuYWNjZXB0OyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICBhY2NlcHRWYWx1ZSArPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBhY2NlcHRWYWx1ZSArPSAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWNjZXB0VmFsdWUuZW5kc1dpdGgoJywnKSkge1xuICAgICAgICAgICAgICAgIGFjY2VwdFZhbHVlID0gYWNjZXB0VmFsdWUuc3Vic3RyaW5nKDAsIGFjY2VwdFZhbHVlLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQuYWNjZXB0ID0gYWNjZXB0VmFsdWU7XG4gICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcImFjY2VwdFxcdTdDN0JcXHU1NzhCIFwiICsgYWNjZXB0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIC8v5bCGaW5wdXTlhYPntKDmt7vliqDliLBib2R55a2Q6IqC54K555qE5pyr5bC+XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5maWxlSW5wdXQpO1xuICAgICAgICAvL+mAieaLqeaWh+S7tuebkeWQrOWZqFxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZUZpbGVzLCBmYWxzZSk7XG4gICAgICAgIGlmICh0aGlzLl9idXR0b24gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fYnV0dG9uKTtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKHRoaXMuX2J1dHRvbkV2ZW50TmFtZSwgdGhpcy5jaG9vc2VGaWxlLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDkuIrkvKDlrozmiJDmiJbogIXlpLHotKXlkI4s5a+55pys5qyh5LiK5Lyg5Lu75Yqh6L+b6KGM5riF5omrXG4gICAgICovXG4gICAgVXBsb2FkZXIucHJvdG90eXBlLnJlc2V0VXBsb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwi5byA5aeL6YeN572uIHVwbG9hZGVyXCIpO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcIuS7u+WKoemYn+WIl+W3sua4heepulwiKTtcbiAgICAgICAgdGhpcy5fdG9rZW4gPSBudWxsO1xuICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcInRva2Vu5bey5riF56m6XCIpO1xuICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcInVwbG9hZGVyIOmHjee9ruWujOavlVwiKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOaYr+WQpuaYr+WIhuWdl+S7u+WKoVxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgVXBsb2FkZXIuaXNDaHVua1Rhc2sgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICByZXR1cm4gdGFzay5jb25zdHJ1Y3Rvci5uYW1lID09PSBDaHVua1Rhc2tfMS5DaHVua1Rhc2submFtZSAmJiB0YXNrIGluc3RhbmNlb2YgQ2h1bmtUYXNrXzEuQ2h1bmtUYXNrO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5piv5ZCm5piv55u05Lyg5Lu75YqhXG4gICAgICogQHBhcmFtIHRhc2tcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBVcGxvYWRlci5pc0RpcmVjdFRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICByZXR1cm4gdGFzay5jb25zdHJ1Y3Rvci5uYW1lID09PSBEaXJlY3RUYXNrXzEuZGVmYXVsdC5uYW1lICYmIHRhc2sgaW5zdGFuY2VvZiBEaXJlY3RUYXNrXzEuZGVmYXVsdDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOeUn+aIkHRhc2tcbiAgICAgKi9cbiAgICBVcGxvYWRlci5wcm90b3R5cGUuZ2VuZXJhdGVUYXNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXIoKTtcbiAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5maWxlSW5wdXQuZmlsZXM7XG4gICAgICAgIC8v6YGN5Y6GZmlsZXMg5Yib5bu65LiK5Lyg5Lu75YqhXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5maWxlSW5wdXQuZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbaV07XG4gICAgICAgICAgICB2YXIgdGFzayA9IHZvaWQgMDtcbiAgICAgICAgICAgIC8v5Y+q5pyJ5Zyo5byA5ZCv5YiG5Z2X5LiK5Lyg77yM5bm25LiU5paH5Lu25aSn5bCP5aSn5LqONG1i55qE5pe25YCZ5omN6L+b6KGM5YiG5Z2X5LiK5LygXG4gICAgICAgICAgICBpZiAodGhpcy5jaHVuayAmJiBmaWxlLnNpemUgPiBVcGxvYWRlckJ1aWxkZXJfMS5kZWZhdWx0LkJMT0NLX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IENodW5rVGFza18xLkNodW5rVGFzayhmaWxlLCBVcGxvYWRlckJ1aWxkZXJfMS5kZWZhdWx0LkJMT0NLX1NJWkUsIHRoaXMuc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IERpcmVjdFRhc2tfMS5kZWZhdWx0KGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3NhdmVLZXkgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0YXNrLmtleSA9IHRoaXMubGlzdGVuZXIub25UYXNrR2V0S2V5KHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICog5aSE55CG5Zu+54mHLee8qeaUvi3otKjph4/ljovnvKlcbiAgICAgKi9cbiAgICBVcGxvYWRlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuY29tcHJlc3MgIT0gMSB8fCB0aGlzLnNjYWxlWzBdICE9IDAgfHwgdGhpcy5zY2FsZVsxXSAhPSAwKSB7XG4gICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXNrLmZpbGUudHlwZS5tYXRjaCgnaW1hZ2UuKicpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKHRhc2suZmlsZS5uYW1lICsgXCIgXFx1NTkwNFxcdTc0MDZcXHU1MjREXFx1NzY4NFxcdTU2RkVcXHU3MjQ3XFx1NTkyN1xcdTVDMEY6XCIgKyB0YXNrLmZpbGUuc2l6ZSAvIDEwMjQgKyBcIiBrYlwiKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTCh0YXNrLmZpbGUpO1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXNfMTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ1cgPSBpbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nSCA9IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGVXID0gX3RoaXMuc2NhbGVbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbGVIID0gX3RoaXMuc2NhbGVbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGVXID09IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZ1cgLyBpbWdIICogc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY2FsZUg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzY2FsZUggPT0gMCAmJiBzY2FsZVcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWdIIC8gaW1nVyAqIHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNjYWxlVyA+IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ov5nph4znmoTplb/lrr3mmK/nu5jliLbliLDnlLvluIPkuIrnmoTlm77niYfnmoTplb/lrr1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2FudmFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhbnZhcy50b0Jsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8wLjk15piv5pyA5o6l6L+R5Y6f5Zu+5aSn5bCP77yM5aaC5p6c6LSo6YeP5Li6MeeahOivneS8muWvvOiHtOavlOWOn+WbvuWkp+WHoOWAjeOAglxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnRvQmxvYihmdW5jdGlvbiAoYmxvYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYmxvYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQodGFzay5maWxlLm5hbWUgKyBcIiBcXHU1OTA0XFx1NzQwNlxcdTU0MEVcXHU3Njg0XFx1NTZGRVxcdTcyNDdcXHU1OTI3XFx1NUMwRjpcIiArIGJsb2Iuc2l6ZSAvIDEwMjQgKyBcIiBrYlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiaW1hZ2UvanBlZ1wiLCBfdGhpcy5jb21wcmVzcyAqIDAuOTUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvYi5uYW1lID0gdGFzay5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suZmlsZSA9IGJsb2I7XG4gICAgICAgICAgICAgICAgICAgIGlmIChVcGxvYWRlci5pc0NodW5rVGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zcGxpY2VGaWxlMkJsb2NrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHRoaXNfMSA9IHRoaXM7XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy50YXNrUXVldWU7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhc2sgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgX2xvb3BfMSh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5qOA6aqM6YCJ6aG55ZCI5rOV5oCnXG4gICAgICovXG4gICAgVXBsb2FkZXIucHJvdG90eXBlLnZhbGlkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCLlvIDlp4vmo4Dmn6XmnoTlu7rlj4LmlbDlkIjms5XmgKdcIik7XG4gICAgICAgIGlmICghdGhpcy5fdG9rZW5GdW5jKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S9oOW/hemhu+aPkOS+m+S4gOS4quiOt+WPllRva2Vu55qE5Zue6LCD5Ye95pWwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnNjYWxlIHx8ICF0aGlzLnNjYWxlIGluc3RhbmNlb2YgQXJyYXkgfHwgdGhpcy5zY2FsZS5sZW5ndGggIT0gMiB8fCB0aGlzLnNjYWxlWzBdIDwgMCB8fCB0aGlzLnNjYWxlWzFdIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzY2FsZeW/hemhu+aYr+mVv+W6puS4ujLnmoRudW1iZXLnsbvlnovnmoTmlbDnu4Qsc2NhbGVbMF3kuLrlrr3luqbvvIxzY2FsZVsxXeS4uumVv+W6pizlv4XpobvlpKfkuo7nrYnkuo4wJyk7XG4gICAgICAgIH1cbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCLmnoTlu7rlj4LmlbDmo4Dmn6Xlrozmr5VcIik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDlvIDlp4vkuIrkvKBcbiAgICAgKi9cbiAgICBVcGxvYWRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwiXFx1NEUwQVxcdTRGMjBcXHU0RUZCXFx1NTJBMVxcdTkwNERcXHU1Mzg2XFx1NUYwMFxcdTU5Q0JcIik7XG4gICAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmsqHmnInpgInkuK3nmoTmlofku7bvvIzml6Dms5XlvIDlp4vkuIrkvKAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXNraW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S7u+WKoeaJp+ihjOS4re+8jOivt+S4jeimgemHjeWkjeS4iuS8oCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXIub25TdGFydCh0aGlzLnRhc2tRdWV1ZSk7XG4gICAgICAgIC8v6YGN5Y6G5Lu75Yqh6Zif5YiXXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnRhc2tRdWV1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gX2FbX2ldO1xuICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCJcXHU0RTBBXFx1NEYyMFxcdTY1ODdcXHU0RUY2XFx1NTQwRFxcdUZGMUFcIiArIHRhc2suZmlsZS5uYW1lKTtcbiAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwiXFx1NEUwQVxcdTRGMjBcXHU2NTg3XFx1NEVGNlxcdTU5MjdcXHU1QzBGXFx1RkYxQVwiICsgdGFzay5maWxlLnNpemUgKyBcIlxcdTVCNTdcXHU4MjgyXFx1RkYwQ1wiICsgdGFzay5maWxlLnNpemUgLyAxMDI0ICsgXCIga2JcXHVGRjBDXCIgKyB0YXNrLmZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0ICsgXCIgbWJcIik7XG4gICAgICAgICAgICAvL+agueaNruS7u+WKoeeahOexu+Wei+iwg+eUqOS4jeWQjOeahOS4iuS8oOaooeW8j+i/m+ihjOS4iuS8oFxuICAgICAgICAgICAgaWYgKFVwbG9hZGVyLmlzRGlyZWN0VGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKCfor6XkuIrkvKDku7vliqHkuLrnm7TkvKDku7vliqEnKTtcbiAgICAgICAgICAgICAgICAvL+ebtOS8oFxuICAgICAgICAgICAgICAgIG5ldyBEaXJlY3RVcGxvYWRQYXR0ZXJuXzEuZGVmYXVsdCh0aGlzKS51cGxvYWQodGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChVcGxvYWRlci5pc0NodW5rVGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKCfor6XkuIrkvKDku7vliqHkuLrliIbniYfku7vliqEnKTtcbiAgICAgICAgICAgICAgICAvL+WIhuWdl+S4iuS8oFxuICAgICAgICAgICAgICAgIG5ldyBDaHVua1VwbG9hZFBhdHRlcm5fMS5kZWZhdWx0KHRoaXMpLnVwbG9hZCh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6Z2e5rOV55qEdGFza+exu+WeiycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmiYDmnInku7vliqHmmK/lkKblrozmiJBcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBVcGxvYWRlci5wcm90b3R5cGUuaXNUYXNrUXVldWVGaW5pc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnRhc2tRdWV1ZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gX2FbX2ldO1xuICAgICAgICAgICAgaWYgKCF0YXNrLmlzRmluaXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog6YCJ5oup5paH5Lu2XG4gICAgICovXG4gICAgVXBsb2FkZXIucHJvdG90eXBlLmNob29zZUZpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgfTtcbiAgICBVcGxvYWRlci5wcm90b3R5cGUuZ2V0VG9rZW4gPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5fdG9rZW5TaGFyZSAmJiB0aGlzLl90b2tlbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fdG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwiXFx1NUYwMFxcdTU5Q0JcXHU4M0I3XFx1NTNENlxcdTRFMEFcXHU0RjIwdG9rZW5cIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fdG9rZW5GdW5jKHRoaXMsIHRhc2spKS50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCJcXHU0RTBBXFx1NEYyMHRva2VuXFx1ODNCN1xcdTUzRDZcXHU2MjEwXFx1NTI5RjogXCIgKyB0b2tlbik7XG4gICAgICAgICAgICBfdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBVcGxvYWRlci5wcm90b3R5cGUucmVxdWVzdFRhc2tUb2tlbiA9IGZ1bmN0aW9uICh0YXNrLCB1cmwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNhdmVLZXkodGFzaykudGhlbihmdW5jdGlvbiAoc2F2ZUtleSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlcXVlc3RUb2tlbih1cmwsIHNhdmVLZXkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFVwbG9hZGVyLnByb3RvdHlwZS5yZXF1ZXN0VG9rZW4gPSBmdW5jdGlvbiAodXJsLCBzYXZlS2V5KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNhdmVLZXkgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIFwic2F2ZUtleT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzYXZlS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlICE9IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UudXB0b2tlbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdhYm9ydGVkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVXBsb2FkZXIucHJvdG90eXBlLnJlc29sdmVTYXZlS2V5ID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNhdmVLZXkgPSB0aGlzLl9zYXZlS2V5O1xuICAgICAgICBpZiAodHlwZW9mIHNhdmVLZXkgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2F2ZUtleSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMucmVzb2x2ZVVVSUQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoc2F2ZUtleSkgeyByZXR1cm4gX3RoaXMucmVzb2x2ZUltYWdlSW5mbyh0YXNrLmZpbGUsIHNhdmVLZXkpOyB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5vblNhdmVLZXlSZXNvbHZlZCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXIucHJvdG90eXBlLCBcInJldHJ5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmV0cnk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwic2l6ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwiYXV0b1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG87XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwibXVsdGlwbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tdWx0aXBsZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyLnByb3RvdHlwZSwgXCJhY2NlcHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY2NlcHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwiY29tcHJlc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb21wcmVzcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyLnByb3RvdHlwZSwgXCJzY2FsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjYWxlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXIucHJvdG90eXBlLCBcImxpc3RlbmVyXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdGVuZXI7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwiZmlsZUlucHV0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlsZUlucHV0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXIucHJvdG90eXBlLCBcImNodW5rXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2h1bms7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlci5wcm90b3R5cGUsIFwidGFza1F1ZXVlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGFza1F1ZXVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXIucHJvdG90eXBlLCBcInRhc2tpbmdcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90YXNraW5nO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdGFza2luZyA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXIucHJvdG90eXBlLCBcImludGVyY2VwdG9yc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9ycztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyLnByb3RvdHlwZSwgXCJkb21haW5cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kb21haW47XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBVcGxvYWRlcjtcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBVcGxvYWRlcjtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBVcGxvYWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbnZhciBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcbi8qKlxuICogVXBsb2FkZXJCdWlsZGVyXG4gKlxuICovXG52YXIgVXBsb2FkZXJCdWlsZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBVcGxvYWRlckJ1aWxkZXIoKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gMDsgLy/mnIDlpKfph43or5XmrKHmlbBcbiAgICAgICAgdGhpcy5fZG9tYWluID0gVXBsb2FkZXJCdWlsZGVyLlVQTE9BRF9ET01BSU47IC8v5LiK5Lyg5Z+f5ZCNXG4gICAgICAgIHRoaXMuX3NjaGVtZSA9IG51bGw7IC8v5LiK5Lyg5Z+f5ZCN55qEIHNjaGVtZVxuICAgICAgICB0aGlzLl9zaXplID0gMTAyNCAqIDEwMjQ7IC8v5YiG54mH5aSn5bCPLOWNleS9jeWtl+iKgizkuIrpmZA0bSzkuI3og73kuLowXG4gICAgICAgIHRoaXMuX2NodW5rID0gdHJ1ZTsgLy/liIblnZfkuIrkvKBcbiAgICAgICAgdGhpcy5fYXV0byA9IHRydWU7IC8v6Ieq5Yqo5LiK5LygLOavj+asoemAieaLqeaWh+S7tuWQjlxuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IHRydWU7IC8v5piv5ZCm5pSv5oyB5aSa5paH5Lu2XG4gICAgICAgIHRoaXMuX2FjY2VwdCA9IFtdOyAvL+aOpeWPl+eahOaWh+S7tuexu+Wei1xuICAgICAgICB0aGlzLl9jb21wcmVzcyA9IDE7IC8v5Zu+54mH5Y6L57yp6LSo6YePXG4gICAgICAgIHRoaXMuX3NjYWxlID0gWzAsIDBdOyAvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5RbaDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5RbaDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fdG9rZW5TaGFyZSA9IHRydWU7IC8v5YiG5LqrdG9rZW4s5aaC5p6c5Li6ZmFsc2Us5q+P5LiA5qyhSFRUUOivt+axgumDvemcgOimgeaWsOiOt+WPllRva2VuXG4gICAgICAgIHRoaXMuX2ludGVyY2VwdG9ycyA9IFtdOyAvL+S7u+WKoeaLpuaIquWZqFxuICAgICAgICB0aGlzLl9pc0RlYnVnID0gZmFsc2U7IC8vXG4gICAgfVxuICAgIC8qKlxuICAgICAqIOiuvue9ruS4iuS8oOeahOWfn+WQjSzpu5jorqTmmK8ge2h0dHA6ICdodHRwOi8vdXBsb2FkLnFpbml1LmNvbScsIGh0dHBzOiAnaHR0cHM6Ly91cC5xYm94Lm1lJ31cbiAgICAgKiBAcGFyYW0gZG9tYWluXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLmRvbWFpbiA9IGZ1bmN0aW9uIChkb21haW4pIHtcbiAgICAgICAgdGhpcy5fZG9tYWluID0gZG9tYWluO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiuvue9ruS4iuS8oOWfn+WQjeeahOWNj+iuruexu+Wei++8jOm7mOiupOS7jiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wg6K+75Y+WXG4gICAgICogQHBhcmFtIHNjaGVtZVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZS5zY2hlbWUgPSBmdW5jdGlvbiAoc2NoZW1lKSB7XG4gICAgICAgIHRoaXMuX3NjaGVtZSA9IHNjaGVtZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmt7vliqDkuIDkuKrmi6bmiKrlmahcbiAgICAgKiBAcGFyYW0gaW50ZXJjZXB0b3JcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuaW50ZXJjZXB0b3IgPSBmdW5jdGlvbiAoaW50ZXJjZXB0b3IpIHtcbiAgICAgICAgdGhpcy5faW50ZXJjZXB0b3JzLnB1c2goT2JqZWN0LmFzc2lnbihuZXcgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3JfMS5kZWZhdWx0KCksIGludGVyY2VwdG9yKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5LiK5Lyg5aSx6LSl5ZCO55qE6YeN5Lyg5bCd6K+V5qyh5pWwXG4gICAgICogQHBhcmFtIHJldHJ5IOm7mOiupDDmrKHvvIzkuI3lsJ3or5XmrKHph43kvKBcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUucmV0cnkgPSBmdW5jdGlvbiAocmV0cnkpIHtcbiAgICAgICAgdGhpcy5fcmV0cnkgPSByZXRyeTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDorr7nva7liIbniYflpKflsI9cbiAgICAgKiBAcGFyYW0gc2l6ZSDliIblnZflpKflsI8s5Y2V5L2N5a2X6IqCLOm7mOiupDQqMTAyNCoxMDI05a2X6IqCKDRtYilcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuc2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuX3NpemUgPSBNYXRoLm1pbihNYXRoLm1heChzaXplLCAxKSwgVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDpgInmi6nmlofku7blkI4s5piv5ZCm6Ieq5Yqo5LiK5LygXG4gICAgICogQHBhcmFtIGF1dG8g6buY6K6kdHJ1ZVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZS5hdXRvID0gZnVuY3Rpb24gKGF1dG8pIHtcbiAgICAgICAgdGhpcy5fYXV0byA9IGF1dG87XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5piv5ZCm5pSv5oyB5aSa5paH5Lu26YCJ5oupXG4gICAgICogQHBhcmFtIG11bHRpcGxlIOm7mOiupHRydWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUubXVsdGlwbGUgPSBmdW5jdGlvbiAobXVsdGlwbGUpIHtcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBtdWx0aXBsZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmjqXlj5fkuIrkvKDnmoTmlofku7bnsbvlnotcbiAgICAgKiBAcGFyYW0gYWNjZXB0IOaVsOe7hOW9ouW8j+S+i+WmgjpbJy5wbmcnLCd2aWRlby8qJ11cbiAgICAgKlxuICAgICAqIOivpue7humFjee9ruingWh0dHA6Ly93d3cudzNzY2hvb2xzLmNvbS90YWdzL2F0dF9pbnB1dF9hY2NlcHQuYXNwXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKGFjY2VwdCkge1xuICAgICAgICB0aGlzLl9hY2NlcHQgPSBhY2NlcHQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog6K6+572u5LiK5Lyg5oyJ6ZKuXG4gICAgICogQHBhcmFtIGJ1dHRvbiDkuIrkvKDmjInpkq5JRFxuICAgICAqIEBwYXJhbSBldmVudE5hbWUg5LiK5Lyg5oyJ6ZKu55qE55uR5ZCs5LqL5Lu25ZCN56ew77yM6buY6K6k5Li6IFwiY2xpY2tcIiDjgIJcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuYnV0dG9uID0gZnVuY3Rpb24gKGJ1dHRvbiwgZXZlbnROYW1lKSB7XG4gICAgICAgIGlmIChldmVudE5hbWUgPT09IHZvaWQgMCkgeyBldmVudE5hbWUgPSBcImNsaWNrXCI7IH1cbiAgICAgICAgdGhpcy5fYnV0dG9uID0gYnV0dG9uO1xuICAgICAgICB0aGlzLl9idXR0b25FdmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5Zu+54mH6LSo6YeP5Y6L57ypLOWPquWcqOS4iuS8oOeahOaWh+S7tuaYr+WbvueJh+eahOaXtuWAmeacieaViFxuICAgICAqIEBwYXJhbSBjb21wcmVzcyAwLTEs6buY6K6kMSzkuI3ljovnvKlcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuY29tcHJlc3MgPSBmdW5jdGlvbiAoY29tcHJlc3MpIHtcbiAgICAgICAgdGhpcy5fY29tcHJlc3MgPSBNYXRoLm1heChNYXRoLm1pbihjb21wcmVzcywgMSksIDApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOWbvueJh+e8qeaUvlxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICogQHBhcmFtIHNjYWxlXG4gICAgICovXG4gICAgVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzY2FsZSkge1xuICAgICAgICB0aGlzLl9zY2FsZSA9IHNjYWxlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiuvue9riBzYXZlS2V5XG4gICAgICogQHBhcmFtIHNhdmVLZXlcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuc2F2ZUtleSA9IGZ1bmN0aW9uIChzYXZlS2V5KSB7XG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBzYXZlS2V5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiOt+WPllRva2Vu55qE5Zyw5Z2AXG4gICAgICogQHBhcmFtIHRva2VuVXJsXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLnRva2VuVXJsID0gZnVuY3Rpb24gKHRva2VuVXJsKSB7XG4gICAgICAgIHRoaXMuX3Rva2VuRnVuYyA9IGZ1bmN0aW9uICh1cGxvYWRlciwgdGFzaykge1xuICAgICAgICAgICAgcmV0dXJuIHVwbG9hZGVyLnJlcXVlc3RUYXNrVG9rZW4odGFzaywgdG9rZW5VcmwpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiOt+WPllRva2Vu55qE5Ye95pWwXG4gICAgICogQHBhcmFtIHRva2VuRnVuY1xuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZS50b2tlbkZ1bmMgPSBmdW5jdGlvbiAodG9rZW5GdW5jKSB7XG4gICAgICAgIHRoaXMuX3Rva2VuRnVuYyA9IGZ1bmN0aW9uICh1cGxvYWRlciwgdGFzaykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5GdW5jKHJlc29sdmUsIHRhc2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5LiK5Lyg55Sf5ZG95ZGo5pyf6ZKp5a2QXG4gICAgICogQHBhcmFtIGxpc3RlbmVyXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLmxpc3RlbmVyID0gZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog5piv5ZCm5YiG5LqrdG9rZW4s5aaC5p6c5Li6ZmFsc2Xmr4/kuIrkvKDkuIDkuKrmlofku7bpg73pnIDopoHor7fmsYLkuIDmrKFUb2tlbuOAglxuICAgICAqIEBwYXJhbSB0b2tlblNoYXJlXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLnRva2VuU2hhcmUgPSBmdW5jdGlvbiAodG9rZW5TaGFyZSkge1xuICAgICAgICB0aGlzLl90b2tlblNoYXJlID0gdG9rZW5TaGFyZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmmK/lkKbliIblnZfkuIrkvKBcbiAgICAgKiBAcGFyYW0gY2h1bmsg6buY6K6kZmFsc2VcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUuY2h1bmsgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICAgICAgdGhpcy5fY2h1bmsgPSBjaHVuaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmmK/lkKblvIDlkK9kZWJ1Z+aooeW8j1xuICAgICAqIEBwYXJhbSBkZWJ1ZyDpu5jorqRmYWxzZVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uIChkZWJ1Zykge1xuICAgICAgICB0aGlzLl9pc0RlYnVnID0gZGVidWc7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0UmV0cnlcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXRyeTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0U2l6ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLCBcImdldEF1dG9cIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hdXRvO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRNdWx0aXBsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRBY2NlcHRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY2NlcHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLCBcImdldEJ1dHRvblwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2J1dHRvbjtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0QnV0dG9uRXZlbnROYW1lXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uRXZlbnROYW1lO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRDb21wcmVzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXByZXNzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRTY2FsZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjYWxlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRMaXN0ZW5lclwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRTYXZlS2V5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2F2ZUtleTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0VG9rZW5GdW5jXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5GdW5jO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVXBsb2FkZXJCdWlsZGVyLnByb3RvdHlwZSwgXCJnZXRUb2tlblNoYXJlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5TaGFyZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0Q2h1bmtcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaHVuaztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0SXNEZWJ1Z1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVidWc7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLCBcImdldEludGVyY2VwdG9yc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9ycztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFVwbG9hZGVyQnVpbGRlci5wcm90b3R5cGUsIFwiZ2V0RG9tYWluXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZG9tYWluID0gdGhpcy5fZG9tYWluO1xuICAgICAgICAgICAgaWYgKGRvbWFpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZG9tYWluID0gVXBsb2FkZXJCdWlsZGVyLlVQTE9BRF9ET01BSU47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvbWFpbiAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjaGVtZSA9IHRoaXMuX3NjaGVtZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNjaGVtZSAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm90b2NvbCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1lID0gcHJvdG9jb2wuc3Vic3RyaW5nKDAsIHByb3RvY29sLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkb21haW4gPSBkb21haW5bc2NoZW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkb21haW4uZW5kc1dpdGgoJy8nKSA/IGRvbWFpbi5zdWJzdHJpbmcoMCwgZG9tYWluLmxlbmd0aCAtIDEpIDogZG9tYWluO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBVcGxvYWRlckJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFVwbG9hZGVyXzEuZGVmYXVsdCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBVcGxvYWRlckJ1aWxkZXI7XG59KCkpO1xuVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFID0gNCAqIDEwMjQgKiAxMDI0OyAvL+WIhueJh+acgOWkp+WAvFxuVXBsb2FkZXJCdWlsZGVyLkJMT0NLX1NJWkUgPSBVcGxvYWRlckJ1aWxkZXIuTUFYX0NIVU5LX1NJWkU7IC8v5YiG5Z2X5aSn5bCP77yM5Y+q5pyJ5aSn5LqO6L+Z5Liq5pWw5omN6ZyA6KaB5YiG5Z2XXG5VcGxvYWRlckJ1aWxkZXIuVVBMT0FEX1VSTCA9ICdodHRwOi8vdXBsb2FkLnFpbml1LmNvbSc7XG5VcGxvYWRlckJ1aWxkZXIuVVBMT0FEX0RPTUFJTiA9IHsgaHR0cDogJ2h0dHA6Ly91cGxvYWQucWluaXUuY29tJywgaHR0cHM6ICdodHRwczovL3VwLnFib3gubWUnIH07XG5leHBvcnRzLmRlZmF1bHQgPSBVcGxvYWRlckJ1aWxkZXI7XG5cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vKipcbiAqIOS4iuS8oOS7u+WKoVxuICovXG52YXIgQmFzZVRhc2sgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJhc2VUYXNrKGZpbGUpIHtcbiAgICAgICAgdGhpcy5fcmV0cnkgPSAwOyAvL+W3sumHjeivleasoeaVsFxuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IDA7IC8v5Lu75Yqh6L+b5bqmLOacgOWkpzEwMFxuICAgICAgICB0aGlzLl9pc1N1Y2Nlc3MgPSBmYWxzZTsgLy/mmK/lkKbkuIrkvKDmiJDlip9cbiAgICAgICAgdGhpcy5faXNGaW5pc2ggPSBmYWxzZTsgLy/mmK/lkKbnu5PmnZ9cbiAgICAgICAgdGhpcy5fZmlsZSA9IGZpbGU7XG4gICAgICAgIHRoaXMuX2NyZWF0ZURhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzZVRhc2sucHJvdG90eXBlLCBcImZpbGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWxlO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChmaWxlKSB7XG4gICAgICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJyZXRyeVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmV0cnkgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJjcmVhdGVEYXRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NyZWF0ZURhdGUgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJzdGFydERhdGVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydERhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydERhdGUgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJlbmREYXRlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5kRGF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2VuZERhdGUgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJpc1N1Y2Nlc3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc1N1Y2Nlc3M7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1N1Y2Nlc3MgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2VUYXNrLnByb3RvdHlwZSwgXCJwcm9ncmVzc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2dyZXNzO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcHJvZ3Jlc3MgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB2YWx1ZSksIDEwMCk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGFzay5wcm90b3R5cGUsIFwicmVzdWx0XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGFzay5wcm90b3R5cGUsIFwiZXJyb3JcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGFzay5wcm90b3R5cGUsIFwia2V5XCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fa2V5ID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCYXNlVGFzay5wcm90b3R5cGUsIFwiaXNGaW5pc2hcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc0ZpbmlzaDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBCYXNlVGFzaztcbn0oKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBCYXNlVGFzaztcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBVcGxvYWRlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcbmV4cG9ydHMuVXBsb2FkZXIgPSBVcGxvYWRlcl8xLmRlZmF1bHQ7XG52YXIgVXBsb2FkZXJCdWlsZGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuZXhwb3J0cy5VcGxvYWRlckJ1aWxkZXIgPSBVcGxvYWRlckJ1aWxkZXJfMS5kZWZhdWx0O1xuXG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFNpbXBsZVVwbG9hZExpc3RlbmVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW1wbGVVcGxvYWRMaXN0ZW5lcigpIHtcbiAgICB9XG4gICAgU2ltcGxlVXBsb2FkTGlzdGVuZXIucHJvdG90eXBlLm9uUmVhZHkgPSBmdW5jdGlvbiAodGFza1F1ZXVlKSB7XG4gICAgfTtcbiAgICBTaW1wbGVVcGxvYWRMaXN0ZW5lci5wcm90b3R5cGUub25TdGFydCA9IGZ1bmN0aW9uICh0YXNrUXVldWUpIHtcbiAgICB9O1xuICAgIFNpbXBsZVVwbG9hZExpc3RlbmVyLnByb3RvdHlwZS5vblRhc2tQcm9ncmVzcyA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgfTtcbiAgICBTaW1wbGVVcGxvYWRMaXN0ZW5lci5wcm90b3R5cGUub25UYXNrR2V0S2V5ID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBTaW1wbGVVcGxvYWRMaXN0ZW5lci5wcm90b3R5cGUub25UYXNrRmFpbCA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgfTtcbiAgICBTaW1wbGVVcGxvYWRMaXN0ZW5lci5wcm90b3R5cGUub25UYXNrU3VjY2VzcyA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgfTtcbiAgICBTaW1wbGVVcGxvYWRMaXN0ZW5lci5wcm90b3R5cGUub25UYXNrUmV0cnkgPSBmdW5jdGlvbiAodGFzaykge1xuICAgIH07XG4gICAgU2ltcGxlVXBsb2FkTGlzdGVuZXIucHJvdG90eXBlLm9uRmluaXNoID0gZnVuY3Rpb24gKHRhc2tRdWV1ZSkge1xuICAgIH07XG4gICAgcmV0dXJuIFNpbXBsZVVwbG9hZExpc3RlbmVyO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFNpbXBsZVVwbG9hZExpc3RlbmVyO1xuXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFNpbXBsZVVwbG9hZEludGVyY2VwdG9yID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcigpIHtcbiAgICB9XG4gICAgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IucHJvdG90eXBlLm9uSW50ZXJjZXB0ID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2ltcGxlVXBsb2FkSW50ZXJjZXB0b3IucHJvdG90eXBlLm9uSW50ZXJydXB0ID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgcmV0dXJuIFNpbXBsZVVwbG9hZEludGVyY2VwdG9yO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yO1xuXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIERlYnVnXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqXG4gKiDliIblnZfkuIrkvKBcbiAqL1xudmFyIENodW5rVXBsb2FkUGF0dGVybiA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ2h1bmtVcGxvYWRQYXR0ZXJuKHVwbG9hZGVyKSB7XG4gICAgICAgIHRoaXMudXBsb2FkZXIgPSB1cGxvYWRlcjtcbiAgICB9XG4gICAgQ2h1bmtVcGxvYWRQYXR0ZXJuLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHVwbG9hZGVyKSB7XG4gICAgICAgIHRoaXMudXBsb2FkZXIgPSB1cGxvYWRlcjtcbiAgICB9O1xuICAgIENodW5rVXBsb2FkUGF0dGVybi5wcm90b3R5cGUudXBsb2FkID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy50YXNrID0gdGFzaztcbiAgICAgICAgdGhpcy51cGxvYWRlci5nZXRUb2tlbih0YXNrKS50aGVuKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICAgICAgdGFzay5zdGFydERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgX3RoaXMudXBsb2FkQmxvY2sodG9rZW4pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENodW5rVXBsb2FkUGF0dGVybi5wcm90b3R5cGUudXBsb2FkQmxvY2sgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCJcXHU1MUM2XFx1NTkwN1xcdTVGMDBcXHU1OUNCXFx1NEUwQVxcdTRGMjBcXHU1NzU3XCIpO1xuICAgICAgICB2YXIgY2hhaW4gPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCJcXHU1MTcxXCIgKyB0aGlzLnRhc2suYmxvY2tzLmxlbmd0aCArIFwiXFx1NTc1N1xcdTdCNDlcXHU1Rjg1XFx1NEUwQVxcdTRGMjBcIik7XG4gICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwiXFx1NTE3MVwiICsgdGhpcy50YXNrLnRvdGFsQ2h1bmtDb3VudCArIFwiXFx1NTIwNlxcdTcyNDdcXHU3QjQ5XFx1NUY4NVxcdTRFMEFcXHU0RjIwXCIpO1xuICAgICAgICB0aGlzLnRhc2suYmxvY2tzLmZvckVhY2goZnVuY3Rpb24gKGJsb2NrLCBibG9ja0luZGV4KSB7XG4gICAgICAgICAgICBibG9jay5jaHVua3MuZm9yRWFjaChmdW5jdGlvbiAoY2h1bmssIGNodW5rSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBjaGFpbiA9IGNoYWluLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcIlxcdTVGMDBcXHU1OUNCXFx1NEUwQVxcdTRGMjBcXHU3QjJDXCIgKyAoYmxvY2tJbmRleCArIDEpICsgXCJcXHU1NzU3LFxcdTdCMkNcIiArIChjaHVua0luZGV4ICsgMSkgKyBcIlxcdTcyNDdcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGxvYWRDaHVuayhjaHVuaywgdG9rZW4pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjaGFpbi50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5jb25jYXRDaHVua3ModG9rZW4pO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8v5omA5pyJ5Lu75Yqh6YO957uT5p2f5LqGXG4gICAgICAgICAgICBpZiAoX3RoaXMudXBsb2FkZXIuaXNUYXNrUXVldWVGaW5pc2goKSkge1xuICAgICAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwiXFx1NEUwQVxcdTRGMjBcXHU0RUZCXFx1NTJBMVxcdTk2MUZcXHU1MjE3XFx1NURGMlxcdTdFRDNcXHU2NzVGXCIpO1xuICAgICAgICAgICAgICAgIC8v5pu05pS55Lu75Yqh5omn6KGM5Lit5qCH5b+XXG4gICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIudGFza2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8v55uR5ZCs5Zmo6LCD55SoXG4gICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIubGlzdGVuZXIub25GaW5pc2goX3RoaXMudXBsb2FkZXIudGFza1F1ZXVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQudyhfdGhpcy50YXNrLmZpbGUubmFtZSArIFwiXFx1NTIwNlxcdTU3NTdcXHU0RTBBXFx1NEYyMFxcdTU5MzFcXHU4RDI1XCIpO1xuICAgICAgICAgICAgX3RoaXMudGFzay5lcnJvciA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgX3RoaXMudGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLnRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMudGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIF90aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza0ZhaWwoX3RoaXMudGFzayk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2h1bmtVcGxvYWRQYXR0ZXJuLnByb3RvdHlwZS51cGxvYWRDaHVuayA9IGZ1bmN0aW9uIChjaHVuaywgdG9rZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBpc0ZpcnN0Q2h1bmtJbkJsb2NrID0gY2h1bmsuYmxvY2suY2h1bmtzLmluZGV4T2YoY2h1bmspID09IDA7XG4gICAgICAgICAgICB2YXIgY2h1bmtJbmRleCA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKTtcbiAgICAgICAgICAgIC8v5YmN5LiA5LiqY2h1bmss5aaC5p6c5a2Y5Zyo55qE6K+dXG4gICAgICAgICAgICB2YXIgcHJldkNodW5rID0gaXNGaXJzdENodW5rSW5CbG9jayA/IG51bGwgOiBjaHVuay5ibG9jay5jaHVua3NbY2h1bmtJbmRleCAtIDFdO1xuICAgICAgICAgICAgdmFyIHVybCA9IGlzRmlyc3RDaHVua0luQmxvY2sgPyBfdGhpcy5nZXRVcGxvYWRCbG9ja1VybChjaHVuay5ibG9jay5kYXRhLnNpemUpIDogX3RoaXMuZ2V0VXBsb2FkQ2h1bmtVcmwoY2h1bmsuc3RhcnQsIHByZXZDaHVuayA/IHByZXZDaHVuay5jdHggOiBudWxsLCBwcmV2Q2h1bmsgPyBwcmV2Q2h1bmsuaG9zdCA6IG51bGwpO1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwgKz0gKCgvXFw/LykudGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJyk7IC8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgXCJVcFRva2VuIFwiICsgdG9rZW4pOyAvL+a3u+WKoHRva2Vu6aqM6K+B5aS0XG4gICAgICAgICAgICAvL+WIhueJh+S4iuS8oOS4rVxuICAgICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoKChfdGhpcy50YXNrLmZpbmlzaGVkQmxvY2tzU2l6ZSArIGNodW5rLnN0YXJ0ICsgZS5sb2FkZWQpIC8gX3RoaXMudGFzay5maWxlLnNpemUpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnRhc2sucHJvZ3Jlc3MgPCBwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudGFzay5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUHJvZ3Jlc3MoX3RoaXMudGFzayk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy/liIbniYfkuIrkvKDlrozmiJBcbiAgICAgICAgICAgIHhoci51cGxvYWQub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoKChfdGhpcy50YXNrLmZpbmlzaGVkQmxvY2tzU2l6ZSArIGNodW5rLnN0YXJ0ICsgY2h1bmsuZGF0YS5zaXplKSAvIF90aGlzLnRhc2suZmlsZS5zaXplKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnRhc2sucHJvZ3Jlc3MgPCBwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy50YXNrLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKF90aGlzLnRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL+WTjeW6lOi/lOWbnlxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDAgJiYgeGhyLnJlc3BvbnNlVGV4dCAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5wcm9jZXNzaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jdHggPSByZXN1bHQuY3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuaG9zdCA9IHJlc3VsdC5ob3N0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNodW5rSW5kZXhfMSA9IGNodW5rLmJsb2NrLmNodW5rcy5pbmRleE9mKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNOZXh0Q2h1bmtJblRoaXNCbG9jayA9IGNodW5rSW5kZXhfMSAhPSBjaHVuay5ibG9jay5jaHVua3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzTmV4dENodW5rSW5UaGlzQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5ibG9jay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuYmxvY2sucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgeGhyLnNlbmQoY2h1bmsuZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2h1bmtVcGxvYWRQYXR0ZXJuLnByb3RvdHlwZS5jb25jYXRDaHVua3MgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBlbmNvZGVkS2V5ID0gX3RoaXMudGFzay5rZXkgPyBidG9hKF90aGlzLnRhc2sua2V5KSA6IG51bGw7XG4gICAgICAgICAgICAvLyDlronlhajlrZfnrKbkuLIg5Y+C6ICD77yaaHR0cHM6Ly9kZXZlbG9wZXIucWluaXUuY29tL2tvZG8vYXBpL21rZmlsZVxuICAgICAgICAgICAgaWYgKGVuY29kZWRLZXkpIHtcbiAgICAgICAgICAgICAgICBlbmNvZGVkS2V5ID0gZW5jb2RlZEtleS5yZXBsYWNlKC9cXCsvZywgJy0nKTtcbiAgICAgICAgICAgICAgICBlbmNvZGVkS2V5ID0gZW5jb2RlZEtleS5yZXBsYWNlKC9cXC8vZywgJ18nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB1cmwgPSBfdGhpcy5nZXRNYWtlRmlsZVVybChfdGhpcy50YXNrLmZpbGUuc2l6ZSwgZW5jb2RlZEtleSk7XG4gICAgICAgICAgICAvL+aehOW7uuaJgOacieaVsOaNruWdl+acgOWQjuS4gOS4quaVsOaNrueJh+S4iuS8oOWQjuW+l+WIsOeahDxjdHg+55qE57uE5ZCI5oiQ55qE5YiX6KGo5a2X56ym5LiyXG4gICAgICAgICAgICB2YXIgY3R4TGlzdFN0cmluZyA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRhc2suYmxvY2tzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IF9hW19pXTtcbiAgICAgICAgICAgICAgICB2YXIgbGFzdENodW5rID0gYmxvY2suY2h1bmtzW2Jsb2NrLmNodW5rcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjdHhMaXN0U3RyaW5nICs9IGxhc3RDaHVuay5jdHggKyAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3R4TGlzdFN0cmluZy5lbmRzV2l0aCgnLCcpKSB7XG4gICAgICAgICAgICAgICAgY3R4TGlzdFN0cmluZyA9IGN0eExpc3RTdHJpbmcuc3Vic3RyaW5nKDAsIGN0eExpc3RTdHJpbmcubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCArPSAoKC9cXD8vKS50ZXN0KHVybCkgPyBcIiZcIiA6IFwiP1wiKSArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCksIHRydWUpO1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L3BsYWluJyk7IC8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgXCJVcFRva2VuIFwiICsgdG9rZW4pOyAvL+a3u+WKoHRva2Vu6aqM6K+B5aS0XG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDAgJiYgeGhyLnJlc3BvbnNlVGV4dCAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50YXNrLmlzU3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50YXNrLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tTdWNjZXNzKF90aGlzLnRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnJldHJ5VGFzayhfdGhpcy50YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgRGVidWdfMS5kZWZhdWx0LncoX3RoaXMudGFzay5maWxlLm5hbWUgKyBcIlxcdTUyMDZcXHU1NzU3XFx1NEUwQVxcdTRGMjBcXHU1OTMxXFx1OEQyNSxcXHU1MUM2XFx1NTkwN1xcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tSZXRyeShfdGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKGN0eExpc3RTdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiOt+WPluWdl+S4iuS8oOeahHVybFxuICAgICAqIEBwYXJhbSBibG9ja1NpemVcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIENodW5rVXBsb2FkUGF0dGVybi5wcm90b3R5cGUuZ2V0VXBsb2FkQmxvY2tVcmwgPSBmdW5jdGlvbiAoYmxvY2tTaXplKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVwbG9hZGVyLmRvbWFpbiArIFwiL21rYmxrL1wiICsgYmxvY2tTaXplO1xuICAgIH07XG4gICAgLyoqXG4gICAgICog6I635Y+W54mH5LiK5Lyg55qEdXJsXG4gICAgICogQHBhcmFtIHN0YXJ0IOeJh+eahOWcqOWdl+S4reeahOi1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBjdHgg5YmN5LiA5qyh5LiK5Lyg6L+U5Zue55qE5Z2X57qn5LiK5Lyg5o6n5Yi25L+h5oGv44CCXG4gICAgICogQHBhcmFtIGhvc3Qg5oyH5a6aaG9zdFxuICAgICAqL1xuICAgIENodW5rVXBsb2FkUGF0dGVybi5wcm90b3R5cGUuZ2V0VXBsb2FkQ2h1bmtVcmwgPSBmdW5jdGlvbiAoc3RhcnQsIGN0eCwgaG9zdCkge1xuICAgICAgICByZXR1cm4gKGhvc3QgPyBob3N0IDogdGhpcy51cGxvYWRlci5kb21haW4pICsgXCIvYnB1dC9cIiArIGN0eCArIFwiL1wiICsgc3RhcnQgKyBcIi9cIjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOiOt+WPluWQiOW5tuWdl+S4uuaWh+S7tueahHVybFxuICAgICAqIEBwYXJhbSBmaWxlU2l6ZSDmlofku7blpKflsI9cbiAgICAgKiBAcGFyYW0gZW5jb2RlZEtleSBiYXNlNjRVcmxFbmNvZGXlkI7nmoTotYTmupDlkI3np7As6Iul5pyq5oyH5a6a77yM5YiZ5L2/55Soc2F2ZUtlee+8m+iLpeacquaMh+WumnNhdmVLZXnvvIzliJnkvb/nlKjotYTmupDlhoXlrrnnmoRTSEEx5YC85L2c5Li66LWE5rqQ5ZCN44CCXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBDaHVua1VwbG9hZFBhdHRlcm4ucHJvdG90eXBlLmdldE1ha2VGaWxlVXJsID0gZnVuY3Rpb24gKGZpbGVTaXplLCBlbmNvZGVkS2V5KSB7XG4gICAgICAgIGlmIChlbmNvZGVkS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRlci5kb21haW4gKyBcIi9ta2ZpbGUvXCIgKyBmaWxlU2l6ZSArIFwiL2tleS9cIiArIGVuY29kZWRLZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRlci5kb21haW4gKyBcIi9ta2ZpbGUvXCIgKyBmaWxlU2l6ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2h1bmtVcGxvYWRQYXR0ZXJuLnByb3RvdHlwZS5yZXRyeVRhc2sgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICAvL+i+vuWIsOmHjeivleasoeaVsFxuICAgICAgICBpZiAodGFzay5yZXRyeSA+PSB0aGlzLnVwbG9hZGVyLnJldHJ5KSB7XG4gICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQudyh0YXNrLmZpbGUubmFtZSArIFwiXFx1OEZCRVxcdTUyMzBcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXFx1NEUwQVxcdTk2NTBcIiArIHRoaXMudXBsb2FkZXIucmV0cnkgKyBcIixcXHU1MDVDXFx1NkI2MlxcdTkxQ0RcXHU0RjIwXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRhc2sucmV0cnkrKztcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjAsXFx1NUY1M1xcdTUyNERcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXCIgKyB0YXNrLnJldHJ5KTtcbiAgICAgICAgLy8gdGhpcy51cGxvYWQodGFzayk7XG4gICAgICAgIC8vdG9kb1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBDaHVua1VwbG9hZFBhdHRlcm47XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gQ2h1bmtVcGxvYWRQYXR0ZXJuO1xuXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIERlYnVnXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqXG4gKiDnm7TmjqXkuIrkvKBcbiAqL1xudmFyIERpcmVjdFVwbG9hZFBhdHRlcm4gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpcmVjdFVwbG9hZFBhdHRlcm4odXBsb2FkZXIpIHtcbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDlrp7njrDmjqXlj6PnmoTkuIrkvKDmlrnms5VcbiAgICAgKiBAcGFyYW0gdGFza1xuICAgICAqL1xuICAgIERpcmVjdFVwbG9hZFBhdHRlcm4ucHJvdG90eXBlLnVwbG9hZCA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudGFzayA9IHRhc2s7XG4gICAgICAgIHRoaXMudXBsb2FkZXIuZ2V0VG9rZW4odGFzaykudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICAgIHRhc2suc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIF90aGlzLnVwbG9hZEZpbGUodG9rZW4pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOWIm+W7uuihqOWNlVxuICAgICAqIEBwYXJhbSB0b2tlblxuICAgICAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAgICAgKi9cbiAgICBEaXJlY3RVcGxvYWRQYXR0ZXJuLnByb3RvdHlwZS5jcmVhdGVGb3JtRGF0YSA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICB2YXIgdGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIC8va2V55a2Y5Zyo77yM5re75Yqg5YiwZm9ybURhdGHkuK3vvIzoi6XkuI3orr7nva7vvIzkuIPniZvmnI3liqHlmajkvJroh6rliqjnlJ/miJBoYXNoIGtleVxuICAgICAgICBpZiAodGFzay5rZXkgIT09IG51bGwgJiYgdGFzay5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCB0YXNrLmtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0b2tlbicsIHRva2VuKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgdGFzay5maWxlKTtcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LmQoXCJcXHU1MjFCXFx1NUVGQWZvcm1EYXRhXFx1NUJGOVxcdThDNjFcIik7XG4gICAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOS4iuS8oOaWh+S7tlxuICAgICAqIEBwYXJhbSB0b2tlblxuICAgICAqL1xuICAgIERpcmVjdFVwbG9hZFBhdHRlcm4ucHJvdG90eXBlLnVwbG9hZEZpbGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHRhc2sgPSB0aGlzLnRhc2s7XG4gICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgLy/kuIrkvKDkuK1cbiAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKChlLmxvYWRlZCAqIDEwMCkgLyBlLnRvdGFsKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUHJvZ3Jlc3ModGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvL+S4iuS8oOWujOaIkFxuICAgICAgICB4aHIudXBsb2FkLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLnByb2dyZXNzIDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgdGFzay5wcm9ncmVzcyA9IDEwMDtcbiAgICAgICAgICAgICAgICBfdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tQcm9ncmVzcyh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMudXBsb2FkZXIuZG9tYWluO1xuICAgICAgICAvL+mBv+WFjea1j+iniOWZqOe8k+WtmGh0dHDor7fmsYJcbiAgICAgICAgdXJsICs9ICgoL1xcPy8pLnRlc3QodGhpcy51cGxvYWRlci5kb21haW4pID8gXCImXCIgOiBcIj9cIikgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCAmJiB4aHIucmVzcG9uc2VUZXh0ICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sucmVzdWx0ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrU3VjY2Vzcyh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMucmV0cnlUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgIERlYnVnXzEuZGVmYXVsdC53KHRhc2suZmlsZS5uYW1lICsgXCJcXHU0RTBBXFx1NEYyMFxcdTU5MzFcXHU4RDI1LFxcdTUxQzZcXHU1OTA3XFx1NUYwMFxcdTU5Q0JcXHU5MUNEXFx1NEYyMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQudyh0YXNrLmZpbGUubmFtZSArIFwiXFx1NEUwQVxcdTRGMjBcXHU1OTMxXFx1OEQyNVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5lcnJvciA9IHhoci5yZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza0ZhaWwodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5omA5pyJ5Lu75Yqh6YO957uT5p2f5LqGXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnVwbG9hZGVyLmlzVGFza1F1ZXVlRmluaXNoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy/mm7TmlLnku7vliqHmiafooYzkuK3moIflv5dcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBsb2FkZXIudGFza2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAvL29uRmluaXNoIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uRmluaXNoKF90aGlzLnVwbG9hZGVyLnRhc2tRdWV1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgZm9ybURhdGEgPSB0aGlzLmNyZWF0ZUZvcm1EYXRhKHRva2VuKTtcbiAgICAgICAgeGhyLnNlbmQoZm9ybURhdGEpO1xuICAgICAgICBEZWJ1Z18xLmRlZmF1bHQuZChcIuWPkemAgWFqYXggcG9zdCDor7fmsYJcIik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDph43kvKBcbiAgICAgKiBAcGFyYW0gdGFza1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIERpcmVjdFVwbG9hZFBhdHRlcm4ucHJvdG90eXBlLnJldHJ5VGFzayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIERlYnVnXzEuZGVmYXVsdC5kKFwi5byA5aeL5bCd6K+V6YeN5LygXCIpO1xuICAgICAgICAvL+i+vuWIsOmHjeivleasoeaVsFxuICAgICAgICBpZiAodGFzay5yZXRyeSA+PSB0aGlzLnVwbG9hZGVyLnJldHJ5KSB7XG4gICAgICAgICAgICBEZWJ1Z18xLmRlZmF1bHQudyh0YXNrLmZpbGUubmFtZSArIFwiXFx1OEZCRVxcdTUyMzBcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXFx1NEUwQVxcdTk2NTBcIiArIHRoaXMudXBsb2FkZXIucmV0cnkgKyBcIixcXHU1MDVDXFx1NkI2MlxcdTkxQ0RcXHU0RjIwXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRhc2sucmV0cnkrKztcbiAgICAgICAgRGVidWdfMS5kZWZhdWx0LncodGFzay5maWxlLm5hbWUgKyBcIlxcdTVGMDBcXHU1OUNCXFx1OTFDRFxcdTRGMjAsXFx1NUY1M1xcdTUyNERcXHU5MUNEXFx1NEYyMFxcdTZCMjFcXHU2NTcwXCIgKyB0YXNrLnJldHJ5KTtcbiAgICAgICAgdGhpcy51cGxvYWQodGFzayk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIERpcmVjdFVwbG9hZFBhdHRlcm47XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gRGlyZWN0VXBsb2FkUGF0dGVybjtcblxuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIEJhc2VUYXNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuLyoqXG4gKiDliIblnZfku7vliqFcbiAqL1xudmFyIENodW5rVGFzayA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENodW5rVGFzaywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiDmnoTpgKDlh73mlbBcbiAgICAgKiBAcGFyYW0gZmlsZVxuICAgICAqIEBwYXJhbSBibG9ja1NpemUg5Z2X5aSn5bCPXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDniYflpKflsI9cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaHVua1Rhc2soZmlsZSwgYmxvY2tTaXplLCBjaHVua1NpemUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZmlsZSkgfHwgdGhpcztcbiAgICAgICAgLy/liIblnZdcbiAgICAgICAgX3RoaXMuX2Jsb2NrcyA9IFtdO1xuICAgICAgICBfdGhpcy5fYmxvY2tTaXplID0gMDtcbiAgICAgICAgX3RoaXMuX2NodW5rU2l6ZSA9IDA7XG4gICAgICAgIF90aGlzLl9ibG9ja1NpemUgPSBibG9ja1NpemU7XG4gICAgICAgIF90aGlzLl9jaHVua1NpemUgPSBjaHVua1NpemU7XG4gICAgICAgIF90aGlzLnNwbGljZUZpbGUyQmxvY2soKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDlsIbmlofku7bliIblnZdcbiAgICAgKi9cbiAgICBDaHVua1Rhc2sucHJvdG90eXBlLnNwbGljZUZpbGUyQmxvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2Jsb2NrcyA9IFtdO1xuICAgICAgICB2YXIgZmlsZVNpemUgPSB0aGlzLl9maWxlLnNpemU7XG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5fZmlsZTtcbiAgICAgICAgLy/mgLvlnZfmlbBcbiAgICAgICAgdmFyIGJsb2NrQ291bnQgPSBNYXRoLmNlaWwoZmlsZVNpemUgLyB0aGlzLl9ibG9ja1NpemUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJsb2NrQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gaSAqIHRoaXMuX2Jsb2NrU2l6ZTsgLy/otbflp4vkvY3nva5cbiAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIHRoaXMuX2Jsb2NrU2l6ZTsgLy/nu5PmnZ/kvY3nva5cbiAgICAgICAgICAgIC8v5p6E6YCg5LiA5Liq5Z2X5a6e5L6LXG4gICAgICAgICAgICB2YXIgYmxvY2sgPSBuZXcgQmxvY2soc3RhcnQsIGVuZCwgZmlsZS5zbGljZShzdGFydCwgZW5kKSwgdGhpcy5fY2h1bmtTaXplLCBmaWxlKTtcbiAgICAgICAgICAgIC8v5re75Yqg5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaChibG9jayk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVua1Rhc2sucHJvdG90eXBlLCBcImJsb2Nrc1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5bmiYDmnInnmoRibG9ja1xuICAgICAgICAgKiBAcmV0dXJucyB7QmxvY2tbXX1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jsb2NrcztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENodW5rVGFzay5wcm90b3R5cGUsIFwicHJvY2Vzc2luZ0Jsb2NrXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOiOt+WPluato+WcqOWkhOeQhueahGJsb2NrXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ja31cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2Jsb2NrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgaWYgKCFibG9jay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVua1Rhc2sucHJvdG90eXBlLCBcImZpbmlzaGVkQmxvY2tzU2l6ZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNpemUgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2Jsb2NrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgc2l6ZSArPSAoYmxvY2suaXNGaW5pc2ggPyBibG9jay5kYXRhLnNpemUgOiAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2h1bmtUYXNrLnByb3RvdHlwZSwgXCJjaHVua3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2Jsb2NrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IGJsb2NrLmNodW5rczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodW5rID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgICAgICBhcnJheS5wdXNoKGNodW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVua1Rhc2sucHJvdG90eXBlLCBcInByb2Nlc3NpbmdDaHVua1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDojrflj5bmraPlnKjlpITnkIbnmoRjaHVua1xuICAgICAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9ibG9ja3M7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gX2FbX2ldO1xuICAgICAgICAgICAgICAgIGlmICghYmxvY2sucHJvY2Vzc2luZykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBfYyA9IGJsb2NrLmNodW5rczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNodW5rID0gX2NbX2JdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNodW5rLnByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVuaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVua1Rhc2sucHJvdG90eXBlLCBcInRvdGFsQ2h1bmtDb3VudFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDmgLvlhbHliIbniYfmlbDph48o5omA5pyJ5YiG5Z2X55qE5YiG54mH5pWw6YeP5oC75ZKMKVxuICAgICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2Jsb2NrczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSBfYVtfaV07XG4gICAgICAgICAgICAgICAgY291bnQgKz0gYmxvY2suY2h1bmtzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIENodW5rVGFzaztcbn0oQmFzZVRhc2tfMS5kZWZhdWx0KSk7XG5leHBvcnRzLkNodW5rVGFzayA9IENodW5rVGFzaztcbi8qKlxuICog5YiG5Z2X77yM5YiG5Z2X5aSn5bCP5LiD54mb5Zu65a6a5pivNE1cbiAqL1xudmFyIEJsb2NrID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGFydCDotbflp4vkvY3nva5cbiAgICAgKiBAcGFyYW0gZW5kIOe7k+adn+S9jee9rlxuICAgICAqIEBwYXJhbSBkYXRhIOWdl+aVsOaNrlxuICAgICAqIEBwYXJhbSBjaHVua1NpemUg5YiG54mH5pWw5o2u55qE5pyA5aSn5aSn5bCPXG4gICAgICogQHBhcmFtIGZpbGUg5YiG5Z2X5omA5bGe5paH5Lu2XG4gICAgICovXG4gICAgZnVuY3Rpb24gQmxvY2soc3RhcnQsIGVuZCwgZGF0YSwgY2h1bmtTaXplLCBmaWxlKSB7XG4gICAgICAgIHRoaXMuX2NodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLl9pc0ZpbmlzaCA9IGZhbHNlOyAvL+aYr+WQpuS4iuS8oOWujOaIkFxuICAgICAgICB0aGlzLl9wcm9jZXNzaW5nID0gZmFsc2U7IC8v5piv5ZCm5q2j5Zyo5LiK5LygXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLl9zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0aGlzLl9lbmQgPSBlbmQ7XG4gICAgICAgIHRoaXMuX2ZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLnNwbGljZUJsb2NrMkNodW5rKGNodW5rU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOWwhuWdl+WIhueJh1xuICAgICAqL1xuICAgIEJsb2NrLnByb3RvdHlwZS5zcGxpY2VCbG9jazJDaHVuayA9IGZ1bmN0aW9uIChjaHVua1NpemUpIHtcbiAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IHRoaXMuX2RhdGEuc2l6ZTtcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhO1xuICAgICAgICAvL+aAu+eJh+aVsFxuICAgICAgICB2YXIgY2h1bmtDb3VudCA9IE1hdGguY2VpbChibG9ja1NpemUgLyBjaHVua1NpemUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gaSAqIGNodW5rU2l6ZTsgLy/otbflp4vkvY3nva5cbiAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIGNodW5rU2l6ZTsgLy/nu5PmnZ/kvY3nva5cbiAgICAgICAgICAgIC8v5p6E6YCg5LiA5Liq54mH5a6e5L6LXG4gICAgICAgICAgICB2YXIgY2h1bmsgPSBuZXcgQ2h1bmsoc3RhcnQsIGVuZCwgZGF0YS5zbGljZShzdGFydCwgZW5kKSwgdGhpcyk7XG4gICAgICAgICAgICAvL+a3u+WKoOWIsOaVsOe7hOS4rVxuICAgICAgICAgICAgdGhpcy5fY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmxvY2sucHJvdG90eXBlLCBcInByb2Nlc3NpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5LiK5Lyg5LitXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NpbmcgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJsb2NrLnByb3RvdHlwZSwgXCJmaWxlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWIhuWdl+aJgOWxnueahOaWh+S7tlxuICAgICAgICAgKiBAcmV0dXJucyB7RmlsZX1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGU7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCbG9jay5wcm90b3R5cGUsIFwiaXNGaW5pc2hcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5bey57uP57uT5p2fXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNGaW5pc2g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0ZpbmlzaCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmxvY2sucHJvdG90eXBlLCBcImRhdGFcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5YiG5Z2X5pWw5o2uXG4gICAgICAgICAqIEByZXR1cm5zIHtCbG9ifVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJsb2NrLnByb3RvdHlwZSwgXCJzdGFydFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDov5Tlm57lrZfoioLotbflp4vkvY3nva5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQmxvY2sucHJvdG90eXBlLCBcImVuZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDov5Tlm57lrZfoioLnu5PmnZ/kvY3nva5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJsb2NrLnByb3RvdHlwZSwgXCJjaHVua3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaHVua3M7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBCbG9jaztcbn0oKSk7XG5leHBvcnRzLkJsb2NrID0gQmxvY2s7XG4vKipcbiAqIOWIhueJh++8jOWIhueJh+Wkp+Wwj+WPr+S7peiHquWumuS5ie+8jOiHs+WwkTHlrZfoioJcbiAqL1xudmFyIENodW5rID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGFydCDlrZfoioLotbflp4vkvY3nva5cbiAgICAgKiBAcGFyYW0gZW5kIOWtl+iKgue7k+adn+S9jee9rlxuICAgICAqIEBwYXJhbSBkYXRhIOWIhueJh+aVsOaNrlxuICAgICAqIEBwYXJhbSBibG9jayDliIblnZflr7nosaFcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaHVuayhzdGFydCwgZW5kLCBkYXRhLCBibG9jaykge1xuICAgICAgICB0aGlzLl9wcm9jZXNzaW5nID0gZmFsc2U7IC8v5piv5ZCm5q2j5Zyo5LiK5LygXG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gZmFsc2U7IC8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX2VuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX2Jsb2NrID0gYmxvY2s7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVuay5wcm90b3R5cGUsIFwiYmxvY2tcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5ZueY2h1bmvmiYDlsZ7nmoRCbG9ja+WvueixoVxuICAgICAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ibG9jaztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENodW5rLnByb3RvdHlwZSwgXCJzdGFydFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDov5Tlm57lrZfoioLotbflp4vkvY3nva5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2h1bmsucHJvdG90eXBlLCBcImVuZFwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiDov5Tlm57lrZfoioLnu5PmnZ/kvY3nva5cbiAgICAgICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENodW5rLnByb3RvdHlwZSwgXCJkYXRhXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOi/lOWbnuWIhueJh+aVsOaNrlxuICAgICAgICAgKiBAcmV0dXJucyB7QmxvYn1cbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaHVuay5wcm90b3R5cGUsIFwiaXNGaW5pc2hcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5bey57uP57uT5p2fXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNGaW5pc2g7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0ZpbmlzaCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2h1bmsucHJvdG90eXBlLCBcImhvc3RcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ob3N0O1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdCA9IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2h1bmsucHJvdG90eXBlLCBcInByb2Nlc3NpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog5piv5ZCm5LiK5Lyg5LitXG4gICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NpbmcgPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENodW5rLnByb3RvdHlwZSwgXCJjdHhcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICog6L+U5Zue5LiK5Lyg5o6n5Yi25L+h5oGvKOS4g+eJm+acjeWKoeWZqOi/lOWbnuWJjeS4gOasoeS4iuS8oOi/lOWbnueahOWIhueJh+S4iuS8oOaOp+WItuS/oeaBryznlKjkuo7kuIvkuIDmrKHkuIrkvKAs56ys5LiA5LiqY2h1bmvmraTlgLzkuLrnqbopXG4gICAgICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdHg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jdHggPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIENodW5rO1xufSgpKTtcbmV4cG9ydHMuQ2h1bmsgPSBDaHVuaztcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBCYXNlVGFza18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbi8qKlxuICog55u05Lyg5Lu75YqhXG4gKi9cbnZhciBEaXJlY3RUYXNrID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRGlyZWN0VGFzaywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEaXJlY3RUYXNrKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBEaXJlY3RUYXNrO1xufShCYXNlVGFza18xLmRlZmF1bHQpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IERpcmVjdFRhc2s7XG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIFVVSUQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFVVSUQoKSB7XG4gICAgfVxuICAgIFVVSUQudXVpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHZhciByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xuICAgICAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTtcbiAgICAgICAgICAgIHJldHVybiAoYyA9PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpKS50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIFVVSUQ7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gVVVJRDtcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIC8qKlxuLy8gICogT2JqZWN0LmFzc2lnbiBwb2x5ZmlsbFxuLy8gICovXG4vLyBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT0gJ2Z1bmN0aW9uJykge1xuLy8gICAgIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4vLyAgICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuLy8gICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4vLyAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgIHRhcmdldCA9IE9iamVjdCh0YXJnZXQpO1xuLy8gICAgICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuLy8gICAgICAgICAgICAgbGV0IHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4vLyAgICAgICAgICAgICBpZiAoc291cmNlICE9IG51bGwpIHtcbi8vICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gc291cmNlKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuLy8gICAgICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4vLyAgICAgfTtcbi8vIH1cbi8vXG4vLyAvKipcbi8vICAqIGNhbnZhcy50b0Jsb2IgcG9seWZpbGxcbi8vICAqL1xuLy8gaWYgKCFIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9CbG9iKSB7XG4vLyAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZSwgJ3RvQmxvYicsIHtcbi8vICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkge1xuLy9cbi8vICAgICAgICAgICAgIGxldCBiaW5TdHIgPSBhdG9iKHRoaXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpLnNwbGl0KCcsJylbMV0pLFxuLy8gICAgICAgICAgICAgICAgIGxlbiA9IGJpblN0ci5sZW5ndGgsXG4vLyAgICAgICAgICAgICAgICAgYXJyID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbi8vXG4vLyAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4vLyAgICAgICAgICAgICAgICAgYXJyW2ldID0gYmluU3RyLmNoYXJDb2RlQXQoaSk7XG4vLyAgICAgICAgICAgICB9XG4vL1xuLy8gICAgICAgICAgICAgY2FsbGJhY2sobmV3IEJsb2IoW2Fycl0sIHt0eXBlOiB0eXBlIHx8ICdpbWFnZS9wbmcnfSkpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9XG4vL1xuLy8gLyoqXG4vLyAgKiBlbmRzV2l0aCBwb2x5ZmlsbFxuLy8gICovXG4vLyBpZiAoIVN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgpIHtcbi8vICAgICBsZXQgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcbi8vICAgICBsZXQgZW5kc1dpdGggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XG4vLyAgICAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbi8vICAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcigpO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIGxldCBzdHJpbmcgPSBTdHJpbmcodGhpcyk7XG4vLyAgICAgICAgIGlmIChzZWFyY2ggJiYgdG9TdHJpbmcuY2FsbChzZWFyY2gpID09ICdbb2JqZWN0IFJlZ0V4cF0nKSB7XG4vLyAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBsZXQgc3RyaW5nTGVuZ3RoID0gc3RyaW5nLmxlbmd0aDtcbi8vICAgICAgICAgbGV0IHNlYXJjaFN0cmluZyA9IFN0cmluZyhzZWFyY2gpO1xuLy8gICAgICAgICBsZXQgc2VhcmNoTGVuZ3RoID0gc2VhcmNoU3RyaW5nLmxlbmd0aDtcbi8vICAgICAgICAgbGV0IHBvcyA9IHN0cmluZ0xlbmd0aDtcbi8vICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4vLyAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBhcmd1bWVudHNbMV07XG4vLyAgICAgICAgICAgICBpZiAocG9zaXRpb24gIT09IHVuZGVmaW5lZCkge1xuLy8gICAgICAgICAgICAgICAgIC8vIGBUb0ludGVnZXJgXG4vLyAgICAgICAgICAgICAgICAgcG9zID0gcG9zaXRpb24gPyBOdW1iZXIocG9zaXRpb24pIDogMDtcbi8vICAgICAgICAgICAgICAgICBpZiAocG9zICE9IHBvcykgeyAvLyBiZXR0ZXIgYGlzTmFOYFxuLy8gICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgfVxuLy8gICAgICAgICBsZXQgZW5kID0gTWF0aC5taW4oTWF0aC5tYXgocG9zLCAwKSwgc3RyaW5nTGVuZ3RoKTtcbi8vICAgICAgICAgbGV0IHN0YXJ0ID0gZW5kIC0gc2VhcmNoTGVuZ3RoO1xuLy8gICAgICAgICBpZiAoc3RhcnQgPCAwKSB7XG4vLyAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgbGV0IGluZGV4ID0gLTE7XG4vLyAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgc2VhcmNoTGVuZ3RoKSB7XG4vLyAgICAgICAgICAgICBpZiAoc3RyaW5nLmNoYXJDb2RlQXQoc3RhcnQgKyBpbmRleCkgIT0gc2VhcmNoU3RyaW5nLmNoYXJDb2RlQXQoaW5kZXgpKSB7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG4vLyAgICAgICAgIHJldHVybiB0cnVlO1xuLy8gICAgIH07XG4vLyAgICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuLy8gICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3RyaW5nLnByb3RvdHlwZSwgJ2VuZHNXaXRoJywge1xuLy8gICAgICAgICAgICAgJ3ZhbHVlJzogZW5kc1dpdGgsXG4vLyAgICAgICAgICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcbi8vICAgICAgICAgICAgICd3cml0YWJsZSc6IHRydWVcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aCA9IGVuZHNXaXRoO1xuLy8gICAgIH1cbi8vIH0gXG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHFpbml1NGpzLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBkZGMyYzJmMzY4OWE3OGVhYzI1MyIsImNsYXNzIERlYnVnIHtcbiAgICBwcml2YXRlIHN0YXRpYyBfZW5hYmxlOiBib29sZWFuID0gdHJ1ZTtcblxuICAgIHN0YXRpYyBnZXQgZW5hYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlO1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXQgZW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2VuYWJsZSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZChvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmRlYnVnKG9iamVjdCk7XG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgbChvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhvYmplY3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZShvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmVycm9yKG9iamVjdCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyB3KG9iamVjdDogYW55KSB7XG4gICAgICAgIGlmICghRGVidWcuX2VuYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUud2FybihvYmplY3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaShvYmplY3Q6IGFueSkge1xuICAgICAgICBpZiAoIURlYnVnLl9lbmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmluZm8ob2JqZWN0KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERlYnVnO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXRpbC9EZWJ1Zy50cyIsImltcG9ydCBCYXNlVGFzayBmcm9tIFwiLi90YXNrL0Jhc2VUYXNrXCI7XG5pbXBvcnQgRGlyZWN0VGFzayBmcm9tIFwiLi90YXNrL0RpcmVjdFRhc2tcIjtcbmltcG9ydCB7Q2h1bmtUYXNrfSBmcm9tIFwiLi90YXNrL0NodW5rVGFza1wiO1xuaW1wb3J0IFRva2VuRnVuYyBmcm9tIFwiLi9Ub2tlbkZ1bmNcIjtcbmltcG9ydCBVVUlEIGZyb20gXCIuL3V1aWQvVVVJRFwiO1xuaW1wb3J0IFVwbG9hZGVyQnVpbGRlciBmcm9tIFwiLi9VcGxvYWRlckJ1aWxkZXJcIjtcbmltcG9ydCBkZWJ1ZyBmcm9tIFwiLi4vdXRpbC9EZWJ1Z1wiO1xuaW1wb3J0IEludGVyY2VwdG9yIGZyb20gXCIuL2ludGVyY2VwdG9yL1VwbG9hZEludGVyY2VwdG9yXCI7XG5pbXBvcnQgVXBsb2FkTGlzdGVuZXIgZnJvbSBcIi4vaG9vay9VcGxvYWRMaXN0ZW5lclwiO1xuaW1wb3J0IFNpbXBsZVVwbG9hZExpc3RlbmVyIGZyb20gXCIuL2hvb2svU2ltcGxlVXBsb2FkTGlzdGVuZXJcIjtcbmltcG9ydCBEaXJlY3RVcGxvYWRQYXR0ZXJuIGZyb20gXCIuL3BhdHRyZW4vRGlyZWN0VXBsb2FkUGF0dGVyblwiO1xuaW1wb3J0IENodW5rVXBsb2FkUGF0dGVybiBmcm9tIFwiLi9wYXR0cmVuL0NodW5rVXBsb2FkUGF0dGVyblwiO1xuaW1wb3J0IFwiLi4vdXRpbC9Qb2x5ZmlsbFwiO1xuXG5jbGFzcyBVcGxvYWRlciB7XG4gICAgcHJpdmF0ZSBGSUxFX0lOUFVUX0VMX0lEOiBzdHJpbmcgPSAncWluaXU0anMtaW5wdXQnO1xuICAgIHByaXZhdGUgX2ZpbGVJbnB1dElkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfZmlsZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50Oy8vaW5wdXQg5YWD57SgXG4gICAgcHJpdmF0ZSBfdG9rZW46IHN0cmluZzsvL3Rva2VuXG4gICAgcHJpdmF0ZSBfdGFza1F1ZXVlOiBCYXNlVGFza1tdID0gW107Ly/ku7vliqHpmJ/liJdcbiAgICBwcml2YXRlIF90YXNraW5nOiBib29sZWFuID0gZmFsc2U7Ly/ku7vliqHmiafooYzkuK1cblxuICAgIHByaXZhdGUgX3JldHJ5OiBudW1iZXI7Ly/mnIDlpKfph43or5XmrKHmlbBcbiAgICBwcml2YXRlIF9zaXplOiBudW1iZXI7Ly/liIbniYflpKflsI8s5Y2V5L2N5a2X6IqCLOacgOWkpzRtYizkuI3og73kuLowXG4gICAgcHJpdmF0ZSBfY2h1bms6IGJvb2xlYW47Ly/liIblnZfkuIrkvKAs6K+l6YCJ6aG55byA5ZCv5ZCO77yM5Y+q5pyJ5Zyo5paH5Lu25aSn5LqONG1i55qE5pe25YCZ5omN5Lya5YiG5Z2X5LiK5LygXG4gICAgcHJpdmF0ZSBfYXV0bzogYm9vbGVhbjsvL+iHquWKqOS4iuS8oCzmr4/mrKHpgInmi6nmlofku7blkI5cbiAgICBwcml2YXRlIF9tdWx0aXBsZTogYm9vbGVhbjsvL+aYr+WQpuaUr+aMgeWkmuaWh+S7tlxuICAgIHByaXZhdGUgX2FjY2VwdDogc3RyaW5nW107Ly/mjqXlj5fnmoTmlofku7bnsbvlnotcbiAgICBwcml2YXRlIF9idXR0b246IHN0cmluZzsvL+S4iuS8oOaMiemSrlxuICAgIHByaXZhdGUgX2J1dHRvbkV2ZW50TmFtZTogc3RyaW5nOy8v5LiK5Lyg5oyJ6ZKu55qE55uR5ZCs5LqL5Lu25ZCN56ewXG4gICAgcHJpdmF0ZSBfY29tcHJlc3M6IG51bWJlcjsvL+WbvueJh+WOi+e8qei0qOmHj1xuICAgIHByaXZhdGUgX3NjYWxlOiBudW1iZXJbXSA9IFtdOy8v57yp5pS+5aSn5bCPLOmZkOWumumrmOW6puetieavlOe8qeaUvltoOjIwMCx3OjBdLOmZkOWumuWuveW6puetieavlOe8qeaUvltoOjAsdzoxMDBdLOmZkOWumumVv+WuvVtoOjIwMCx3OjEwMF1cbiAgICBwcml2YXRlIF9saXN0ZW5lcjogVXBsb2FkTGlzdGVuZXI7Ly/nm5HlkKzlmahcbiAgICBwcml2YXRlIF9zYXZlS2V5OiBib29sZWFuIHwgc3RyaW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfdG9rZW5GdW5jOiBUb2tlbkZ1bmM7Ly90b2tlbuiOt+WPluWHveaVsFxuICAgIHByaXZhdGUgX3Rva2VuU2hhcmU6IGJvb2xlYW47Ly/liIbkuqt0b2tlbizlpoLmnpzkuLpmYWxzZSzmr4/kuIDmrKFIVFRQ6K+35rGC6YO96ZyA6KaB5paw6I635Y+WVG9rZW5cbiAgICBwcml2YXRlIF9pbnRlcmNlcHRvcnM6IEludGVyY2VwdG9yW107Ly/ku7vliqHmi6bmiKrlmahcbiAgICBwcml2YXRlIF9kb21haW46IHN0cmluZzsvL+S4iuS8oOWfn+WQjVxuXG4gICAgY29uc3RydWN0b3IoYnVpbGRlcjogVXBsb2FkZXJCdWlsZGVyKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gYnVpbGRlci5nZXRSZXRyeTtcbiAgICAgICAgdGhpcy5fc2l6ZSA9IGJ1aWxkZXIuZ2V0U2l6ZTtcbiAgICAgICAgdGhpcy5fY2h1bmsgPSBidWlsZGVyLmdldENodW5rO1xuICAgICAgICB0aGlzLl9hdXRvID0gYnVpbGRlci5nZXRBdXRvO1xuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IGJ1aWxkZXIuZ2V0TXVsdGlwbGU7XG4gICAgICAgIHRoaXMuX2FjY2VwdCA9IGJ1aWxkZXIuZ2V0QWNjZXB0O1xuICAgICAgICB0aGlzLl9idXR0b24gPSBidWlsZGVyLmdldEJ1dHRvbjtcbiAgICAgICAgdGhpcy5fYnV0dG9uRXZlbnROYW1lID0gYnVpbGRlci5nZXRCdXR0b25FdmVudE5hbWU7XG4gICAgICAgIHRoaXMuX2NvbXByZXNzID0gYnVpbGRlci5nZXRDb21wcmVzcztcbiAgICAgICAgdGhpcy5fc2NhbGUgPSBidWlsZGVyLmdldFNjYWxlO1xuICAgICAgICB0aGlzLl9zYXZlS2V5ID0gYnVpbGRlci5nZXRTYXZlS2V5O1xuICAgICAgICB0aGlzLl90b2tlbkZ1bmMgPSBidWlsZGVyLmdldFRva2VuRnVuYztcbiAgICAgICAgdGhpcy5fdG9rZW5TaGFyZSA9IGJ1aWxkZXIuZ2V0VG9rZW5TaGFyZTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBPYmplY3QuYXNzaWduKG5ldyBTaW1wbGVVcGxvYWRMaXN0ZW5lcigpLCBidWlsZGVyLmdldExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5faW50ZXJjZXB0b3JzID0gYnVpbGRlci5nZXRJbnRlcmNlcHRvcnM7XG4gICAgICAgIHRoaXMuX2RvbWFpbiA9IGJ1aWxkZXIuZ2V0RG9tYWluO1xuICAgICAgICB0aGlzLl9maWxlSW5wdXRJZCA9IGAke3RoaXMuRklMRV9JTlBVVF9FTF9JRH1fJHtuZXcgRGF0ZSgpLmdldFRpbWUoKX1gO1xuICAgICAgICBkZWJ1Zy5lbmFibGUgPSBidWlsZGVyLmdldElzRGVidWc7XG5cbiAgICAgICAgdGhpcy52YWxpZGF0ZU9wdGlvbnMoKTtcblxuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJbmk43kvZxcbiAgICAgKi9cbiAgICBwcml2YXRlIGluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5pdEZpbGVJbnB1dEVsKCk7XG4gICAgICAgIC8vIHRoaXMuaW5pdFVwbG9hZFBhdHRlcm4oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJbkuIrkvKDmqKHlvI9cbiAgICAgKi9cbiAgICBwcml2YXRlIGluaXRVcGxvYWRQYXR0ZXJuKCk6IHZvaWQge1xuICAgICAgICAvLyB0aGlzLl9kaXJlY3RVcGxvYWRQYXR0ZXJuID0gbmV3IERpcmVjdFVwbG9hZFBhdHRlcm4oKTtcbiAgICAgICAgLy8gdGhpcy5fZGlyZWN0VXBsb2FkUGF0dGVybi5pbml0KHRoaXMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyB0aGlzLl9jaHVua1VwbG9hZFBhdHRlcm4gPSBuZXcgQ2h1bmtVcGxvYWRQYXR0ZXJuKCk7XG4gICAgICAgIC8vIHRoaXMuX2NodW5rVXBsb2FkUGF0dGVybi5pbml0KHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIneWni+WMlmZpbGUgaW5wdXQgZWxlbWVudFxuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdEZpbGVJbnB1dEVsKCk6IHZvaWQge1xuXG4gICAgICAgIC8v5p+l6K+i5bey57uP5a2Y5Zyo55qEZmlsZSBpbnB1dFxuICAgICAgICBsZXQgZXhpc3Q6IEhUTUxJbnB1dEVsZW1lbnQgPSA8SFRNTElucHV0RWxlbWVudD4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fZmlsZUlucHV0SWQpO1xuXG4gICAgICAgIC8v5Yib5bu6aW5wdXTlhYPntKBcbiAgICAgICAgdGhpcy5fZmlsZUlucHV0ID0gZXhpc3QgPyBleGlzdCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7Ly90eXBlIGZpbGVcbiAgICAgICAgdGhpcy5maWxlSW5wdXQuaWQgPSB0aGlzLl9maWxlSW5wdXRJZDsvL2lkIOaWueS+v+WQjumdouafpeaJvlxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOy8v6ZqQ6JePZmlsZSBpbnB1dFxuXG4gICAgICAgIC8v5aSa5paH5Lu2XG4gICAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAvL+WkmuaWh+S7tlxuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQubXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/mlofku7bnsbvlnotcbiAgICAgICAgaWYgKHRoaXMuYWNjZXB0ICYmIHRoaXMuYWNjZXB0Lmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICBsZXQgYWNjZXB0VmFsdWU6IHN0cmluZyA9ICcnO1xuICAgICAgICAgICAgZm9yIChsZXQgdmFsdWU6IHN0cmluZyBvZiB0aGlzLmFjY2VwdCkge1xuICAgICAgICAgICAgICAgIGFjY2VwdFZhbHVlICs9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGFjY2VwdFZhbHVlICs9ICcsJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFjY2VwdFZhbHVlLmVuZHNXaXRoKCcsJykpIHtcbiAgICAgICAgICAgICAgICBhY2NlcHRWYWx1ZSA9IGFjY2VwdFZhbHVlLnN1YnN0cmluZygwLCBhY2NlcHRWYWx1ZS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsZUlucHV0LmFjY2VwdCA9IGFjY2VwdFZhbHVlO1xuICAgICAgICAgICAgZGVidWcuZChgYWNjZXB057G75Z6LICR7YWNjZXB0VmFsdWV9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+WwhmlucHV05YWD57Sg5re75Yqg5YiwYm9keeWtkOiKgueCueeahOacq+WwvlxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZmlsZUlucHV0KTtcblxuICAgICAgICAvL+mAieaLqeaWh+S7tuebkeWQrOWZqFxuICAgICAgICB0aGlzLmZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZUZpbGVzLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2J1dHRvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLl9idXR0b24pO1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5fYnV0dG9uRXZlbnROYW1lLCB0aGlzLmNob29zZUZpbGUuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOS4iuS8oOWujOaIkOaIluiAheWksei0peWQjizlr7nmnKzmrKHkuIrkvKDku7vliqHov5vooYzmuIXmiatcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlc2V0VXBsb2FkZXIoKTogdm9pZCB7XG4gICAgICAgIGRlYnVnLmQoXCLlvIDlp4vph43nva4gdXBsb2FkZXJcIik7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlLmxlbmd0aCA9IDA7XG4gICAgICAgIGRlYnVnLmQoXCLku7vliqHpmJ/liJflt7LmuIXnqbpcIik7XG4gICAgICAgIHRoaXMuX3Rva2VuID0gbnVsbDtcbiAgICAgICAgZGVidWcuZChcInRva2Vu5bey5riF56m6XCIpO1xuICAgICAgICBkZWJ1Zy5kKFwidXBsb2FkZXIg6YeN572u5a6M5q+VXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWkhOeQhuaWh+S7tlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlRmlsZXMgPSAoKSA9PiB7XG4gICAgICAgIC8v5aaC5p6c5rKh5pyJ6YCJ5Lit5paH5Lu25bCx6L+U5ZueXG4gICAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC5maWxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/nlJ/miJB0YXNrXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVUYXNrKCk7XG5cbiAgICAgICAgLy/mmK/lkKbkuK3mlq3ku7vliqFcbiAgICAgICAgbGV0IGlzSW50ZXJydXB0OiBCb29sZWFuID0gZmFsc2U7XG4gICAgICAgIGxldCBpbnRlcmNlcHRlZFRhc2tzOiBCYXNlVGFza1tdID0gW107XG5cbiAgICAgICAgLy/ku7vliqHmi6bmiKrlmajov4fmu6RcbiAgICAgICAgZm9yIChsZXQgdGFzazogQmFzZVRhc2sgb2YgdGhpcy50YXNrUXVldWUpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGludGVyY2VwdG9yOiBJbnRlcmNlcHRvciBvZiB0aGlzLmludGVyY2VwdG9ycykge1xuICAgICAgICAgICAgICAgIC8v5oum5oiq55Sf5pWIXG4gICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLm9uSW50ZXJjZXB0KHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgIGludGVyY2VwdGVkVGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgZGVidWcuZChcIuS7u+WKoeaLpuaIquWZqOaLpuaIquS6huS7u+WKoTpcIik7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnLmQodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8v5omT5pat55Sf5pWIXG4gICAgICAgICAgICAgICAgaWYgKGludGVyY2VwdG9yLm9uSW50ZXJydXB0KHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v5bCG5omT5pat5qCH5b+X5L2N6K6+5Li6dHJ1ZVxuICAgICAgICAgICAgICAgICAgICBpc0ludGVycnVwdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0ludGVycnVwdCkge1xuICAgICAgICAgICAgZGVidWcudyhcIuS7u+WKoeaLpuaIquWZqOS4reaWreS6huS7u+WKoemYn+WIl1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v5LuO5Lu75Yqh6Zif5YiX5Lit5Y676Zmk5Lu75YqhXG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgaW50ZXJjZXB0ZWRUYXNrcykge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy50YXNrUXVldWUuaW5kZXhPZih0YXNrKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFza1F1ZXVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL+Wbnuiwg+WHveaVsOWHveaVsFxuICAgICAgICB0aGlzLmxpc3RlbmVyLm9uUmVhZHkodGhpcy50YXNrUXVldWUpO1xuXG5cbiAgICAgICAgLy/lpITnkIblm77niYdcbiAgICAgICAgdGhpcy5oYW5kbGVJbWFnZXMoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIC8v6Ieq5Yqo5LiK5LygXG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvKSB7XG4gICAgICAgICAgICAgICAgZGVidWcuZChcIuW8gOWni+iHquWKqOS4iuS8oFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuaYr+WIhuWdl+S7u+WKoVxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHJpdmF0ZSBzdGF0aWMgaXNDaHVua1Rhc2sodGFzazogQmFzZVRhc2spOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRhc2suY29uc3RydWN0b3IubmFtZSA9PT0gQ2h1bmtUYXNrLm5hbWUgJiYgdGFzayBpbnN0YW5jZW9mIENodW5rVGFzaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbmmK/nm7TkvKDku7vliqFcbiAgICAgKiBAcGFyYW0gdGFza1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIGlzRGlyZWN0VGFzayh0YXNrOiBCYXNlVGFzayk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGFzay5jb25zdHJ1Y3Rvci5uYW1lID09PSBEaXJlY3RUYXNrLm5hbWUgJiYgdGFzayBpbnN0YW5jZW9mIERpcmVjdFRhc2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog55Sf5oiQdGFza1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2VuZXJhdGVUYXNrKCkge1xuICAgICAgICB0aGlzLnJlc2V0VXBsb2FkZXIoKTtcblxuICAgICAgICBsZXQgZmlsZXM6IEZpbGVMaXN0ID0gdGhpcy5maWxlSW5wdXQuZmlsZXM7XG5cbiAgICAgICAgLy/pgY3ljoZmaWxlcyDliJvlu7rkuIrkvKDku7vliqFcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuZmlsZUlucHV0LmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZmlsZTogRmlsZSA9IGZpbGVzW2ldO1xuXG4gICAgICAgICAgICBsZXQgdGFzazogQmFzZVRhc2s7XG4gICAgICAgICAgICAvL+WPquacieWcqOW8gOWQr+WIhuWdl+S4iuS8oO+8jOW5tuS4lOaWh+S7tuWkp+Wwj+Wkp+S6jjRtYueahOaXtuWAmeaJjei/m+ihjOWIhuWdl+S4iuS8oFxuICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmsgJiYgZmlsZS5zaXplID4gVXBsb2FkZXJCdWlsZGVyLkJMT0NLX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IENodW5rVGFzayhmaWxlLCBVcGxvYWRlckJ1aWxkZXIuQkxPQ0tfU0laRSwgdGhpcy5zaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhc2sgPSBuZXcgRGlyZWN0VGFzayhmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zYXZlS2V5ID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGFzay5rZXkgPSB0aGlzLmxpc3RlbmVyLm9uVGFza0dldEtleSh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFza1F1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlpITnkIblm77niYct57yp5pS+Lei0qOmHj+WOi+e8qVxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlSW1hZ2VzKCk6IFByb21pc2Uge1xuICAgICAgICBsZXQgcHJvbWlzZXM6IFByb21pc2U8QmxvYj5bXSA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbXByZXNzICE9IDEgfHwgdGhpcy5zY2FsZVswXSAhPSAwIHx8IHRoaXMuc2NhbGVbMV0gIT0gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFzazogQmFzZVRhc2sgb2YgdGhpcy50YXNrUXVldWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhc2suZmlsZS50eXBlLm1hdGNoKCdpbWFnZS4qJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlYnVnLmQoYCR7dGFzay5maWxlLm5hbWV9IOWkhOeQhuWJjeeahOWbvueJh+Wkp+Wwjzoke3Rhc2suZmlsZS5zaXplIC8gMTAyNH0ga2JgKTtcblxuICAgICAgICAgICAgICAgIGxldCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gPEhUTUxDYW52YXNFbGVtZW50PiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgICAgICAgICAgICAgIGxldCBpbWc6IEhUTUxJbWFnZUVsZW1lbnQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBsZXQgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgPSA8Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEPmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHRhc2suZmlsZSk7XG5cblxuICAgICAgICAgICAgICAgIGxldCBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlPEJsb2I+KChyZXNvbHZlKSA9PlxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nVyA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbWdIID0gaW1nLmhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlVyA9IF90aGlzLnNjYWxlWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjYWxlSCA9IF90aGlzLnNjYWxlWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGVXID09IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZ1cgLyBpbWdIICogc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY2FsZUg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzY2FsZUggPT0gMCAmJiBzY2FsZVcgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gc2NhbGVXO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWdIIC8gaW1nVyAqIHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNjYWxlVyA+IDAgJiYgc2NhbGVIID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHNjYWxlVztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2NhbGVIO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+i/memHjOeahOmVv+WuveaYr+e7mOWItuWIsOeUu+W4g+S4iueahOWbvueJh+eahOmVv+WuvVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYW52YXMudG9CbG9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vMC45NeaYr+acgOaOpei/keWOn+WbvuWkp+Wwj++8jOWmguaenOi0qOmHj+S4ujHnmoTor53kvJrlr7zoh7Tmr5Tljp/lm77lpKflh6DlgI3jgIJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy50b0Jsb2IoKGJsb2I6IEJsb2IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGJsb2IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnLmQoYCR7dGFzay5maWxlLm5hbWV9IOWkhOeQhuWQjueahOWbvueJh+Wkp+Wwjzoke2Jsb2Iuc2l6ZSAvIDEwMjR9IGtiYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBcImltYWdlL2pwZWdcIiwgX3RoaXMuY29tcHJlc3MgKiAwLjk1KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICkudGhlbigoYmxvYjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2IubmFtZSA9IHRhc2suZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmZpbGUgPSBibG9iO1xuICAgICAgICAgICAgICAgICAgICBpZiAoVXBsb2FkZXIuaXNDaHVua1Rhc2sodGFzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICg8Q2h1bmtUYXNrPnRhc2spLnNwbGljZUZpbGUyQmxvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOajgOmqjOmAiemhueWQiOazleaAp1xuICAgICAqL1xuICAgIHByaXZhdGUgIHZhbGlkYXRlT3B0aW9ucygpOiB2b2lkIHtcbiAgICAgICAgZGVidWcuZChcIuW8gOWni+ajgOafpeaehOW7uuWPguaVsOWQiOazleaAp1wiKTtcbiAgICAgICAgaWYgKCF0aGlzLl90b2tlbkZ1bmMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5L2g5b+F6aG75o+Q5L6b5LiA5Liq6I635Y+WVG9rZW7nmoTlm57osIPlh73mlbAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2NhbGUgfHwgIXRoaXMuc2NhbGUgaW5zdGFuY2VvZiBBcnJheSB8fCB0aGlzLnNjYWxlLmxlbmd0aCAhPSAyIHx8IHRoaXMuc2NhbGVbMF0gPCAwIHx8IHRoaXMuc2NhbGVbMV0gPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NjYWxl5b+F6aG75piv6ZW/5bqm5Li6MueahG51bWJlcuexu+Wei+eahOaVsOe7hCxzY2FsZVswXeS4uuWuveW6pu+8jHNjYWxlWzFd5Li66ZW/5bqmLOW/hemhu+Wkp+S6juetieS6jjAnKTtcbiAgICAgICAgfVxuICAgICAgICBkZWJ1Zy5kKFwi5p6E5bu65Y+C5pWw5qOA5p+l5a6M5q+VXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOW8gOWni+S4iuS8oFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgZGVidWcuZChg5LiK5Lyg5Lu75Yqh6YGN5Y6G5byA5aeLYCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZmlsZUlucHV0LmZpbGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ayoeaciemAieS4reeahOaWh+S7tu+8jOaXoOazleW8gOWni+S4iuS8oCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudGFza2luZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfku7vliqHmiafooYzkuK3vvIzor7fkuI3opoHph43lpI3kuIrkvKAnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGlzdGVuZXIub25TdGFydCh0aGlzLnRhc2tRdWV1ZSk7XG5cbiAgICAgICAgLy/pgY3ljobku7vliqHpmJ/liJdcbiAgICAgICAgZm9yIChsZXQgdGFzazogQmFzZVRhc2sgb2YgdGhpcy50YXNrUXVldWUpIHtcbiAgICAgICAgICAgIGRlYnVnLmQoYOS4iuS8oOaWh+S7tuWQje+8miR7dGFzay5maWxlLm5hbWV9YCk7XG4gICAgICAgICAgICBkZWJ1Zy5kKGDkuIrkvKDmlofku7blpKflsI/vvJoke3Rhc2suZmlsZS5zaXplfeWtl+iKgu+8jCR7dGFzay5maWxlLnNpemUgLyAxMDI0fSBrYu+8jCR7dGFzay5maWxlLnNpemUgLyAxMDI0IC8gMTAyNH0gbWJgKTtcbiAgICAgICAgICAgIC8v5qC55o2u5Lu75Yqh55qE57G75Z6L6LCD55So5LiN5ZCM55qE5LiK5Lyg5qih5byP6L+b6KGM5LiK5LygXG4gICAgICAgICAgICBpZiAoVXBsb2FkZXIuaXNEaXJlY3RUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICAgICAgZGVidWcuZCgn6K+l5LiK5Lyg5Lu75Yqh5Li655u05Lyg5Lu75YqhJyk7XG4gICAgICAgICAgICAgICAgLy/nm7TkvKBcbiAgICAgICAgICAgICAgICBuZXcgRGlyZWN0VXBsb2FkUGF0dGVybih0aGlzKS51cGxvYWQoPERpcmVjdFRhc2s+dGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChVcGxvYWRlci5pc0NodW5rVGFzayh0YXNrKSkge1xuICAgICAgICAgICAgICAgIGRlYnVnLmQoJ+ivpeS4iuS8oOS7u+WKoeS4uuWIhueJh+S7u+WKoScpO1xuICAgICAgICAgICAgICAgIC8v5YiG5Z2X5LiK5LygXG4gICAgICAgICAgICAgICAgbmV3IENodW5rVXBsb2FkUGF0dGVybih0aGlzKS51cGxvYWQoPENodW5rVGFzaz50YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6Z2e5rOV55qEdGFza+exu+WeiycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5omA5pyJ5Lu75Yqh5piv5ZCm5a6M5oiQXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgcHVibGljIGlzVGFza1F1ZXVlRmluaXNoKCkge1xuICAgICAgICBmb3IgKGxldCB0YXNrOiBCYXNlVGFzayBvZiB0aGlzLnRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgaWYgKCF0YXNrLmlzRmluaXNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOmAieaLqeaWh+S7tlxuICAgICAqL1xuICAgIHB1YmxpYyBjaG9vc2VGaWxlKCkge1xuICAgICAgICB0aGlzLmZpbGVJbnB1dC5jbGljaygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUb2tlbih0YXNrOiBCYXNlVGFzayk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGlmICh0aGlzLl90b2tlblNoYXJlICYmIHRoaXMuX3Rva2VuICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl90b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWcuZChg5byA5aeL6I635Y+W5LiK5LygdG9rZW5gKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl90b2tlbkZ1bmModGhpcywgdGFzaykpLnRoZW4oKHRva2VuOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgZGVidWcuZChg5LiK5LygdG9rZW7ojrflj5bmiJDlip86ICR7dG9rZW59YCk7XG4gICAgICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWVzdFRhc2tUb2tlbih0YXNrOiBCYXNlVGFzaywgdXJsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlU2F2ZUtleSh0YXNrKS50aGVuKChzYXZlS2V5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RUb2tlbih1cmwsIHNhdmVLZXkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlcXVlc3RUb2tlbih1cmw6IHN0cmluZywgc2F2ZUtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2F2ZUtleSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdXJsICs9ICgoL1xcPy8pLnRlc3QodXJsKSA/IFwiJlwiIDogXCI/XCIpICsgXCJzYXZlS2V5PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNhdmVLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsICs9ICgoL1xcPy8pLnRlc3QodXJsKSA/IFwiJlwiIDogXCI/XCIpICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgbGV0IHhocjogWE1MSHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgIT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHhoci5yZXNwb25zZS51cHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWplY3QoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QoJ2Fib3J0ZWQnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNvbHZlU2F2ZUtleSh0YXNrOiBCYXNlVGFzayk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBzYXZlS2V5ID0gdGhpcy5fc2F2ZUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBzYXZlS2V5ICE9IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNhdmVLZXkpXG4gICAgICAgICAgICAudGhlbih0aGlzLnJlc29sdmVVVUlEKVxuICAgICAgICAgICAgLnRoZW4oc2F2ZUtleSA9PiB0aGlzLnJlc29sdmVJbWFnZUluZm8odGFzay5maWxlLCBzYXZlS2V5KSlcbiAgICAgICAgICAgIC50aGVuKHRoaXMub25TYXZlS2V5UmVzb2x2ZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzb2x2ZVVVSUQgPSAoczogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAgICAgbGV0IHJlID0gL1xcJFxcKHV1aWRcXCkvO1xuICAgICAgICBpZiAocmUudGVzdChzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHMucmVwbGFjZShyZSwgVVVJRC51dWlkKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH07XG5cbiAgICBwcml2YXRlIHJlc29sdmVJbWFnZUluZm8gPSAoYmxvYjogQmxvYiwgczogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICAgICAgbGV0IHdpZHRoUmUgPSAvXFwkXFwoaW1hZ2VJbmZvXFwud2lkdGhcXCkvO1xuICAgICAgICBsZXQgaGVpZ2h0UmUgPSAvXFwkXFwoaW1hZ2VJbmZvXFwuaGVpZ2h0XFwpLztcbiAgICAgICAgaWYgKCF3aWR0aFJlLnRlc3QocykgJiYgIWhlaWdodFJlLnRlc3QocykpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzID0gcy5yZXBsYWNlKHdpZHRoUmUsIGltZy53aWR0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5yZXBsYWNlKGhlaWdodFJlLCBpbWcuaGVpZ2h0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUocyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvblNhdmVLZXlSZXNvbHZlZCA9IChzYXZlS2V5OiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgICAgICB0aGlzLl90b2tlblNoYXJlID0gdGhpcy5fdG9rZW5TaGFyZSAmJiB0aGlzLl9zYXZlS2V5ID09IHNhdmVLZXk7XG4gICAgICAgIHJldHVybiBzYXZlS2V5O1xuICAgIH07XG5cbiAgICBnZXQgcmV0cnkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgIH1cblxuICAgIGdldCBzaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgIH1cblxuICAgIGdldCBhdXRvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXV0bztcbiAgICB9XG5cbiAgICBnZXQgbXVsdGlwbGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdWx0aXBsZTtcbiAgICB9XG5cbiAgICBnZXQgYWNjZXB0KCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2VwdDtcbiAgICB9XG5cbiAgICBnZXQgY29tcHJlc3MoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXByZXNzO1xuICAgIH1cblxuICAgIGdldCBzY2FsZSgpOiBudW1iZXJbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY2FsZTtcbiAgICB9XG5cbiAgICBnZXQgbGlzdGVuZXIoKTogVXBsb2FkTGlzdGVuZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlzdGVuZXI7XG4gICAgfVxuXG4gICAgZ2V0IGZpbGVJbnB1dCgpOiBIVE1MSW5wdXRFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbGVJbnB1dDtcbiAgICB9XG5cbiAgICBnZXQgY2h1bmsoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaHVuaztcbiAgICB9XG5cbiAgICBnZXQgdGFza1F1ZXVlKCk6IEJhc2VUYXNrW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza1F1ZXVlO1xuICAgIH1cblxuXG4gICAgZ2V0IHRhc2tpbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNraW5nO1xuICAgIH1cblxuICAgIHNldCB0YXNraW5nKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3Rhc2tpbmcgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgaW50ZXJjZXB0b3JzKCk6IEludGVyY2VwdG9yW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJjZXB0b3JzO1xuICAgIH1cblxuICAgIGdldCBkb21haW4oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpbjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVwbG9hZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXBsb2FkL1VwbG9hZGVyLnRzIiwiaW1wb3J0IFVwbG9hZGVyIGZyb20gXCIuL1VwbG9hZGVyXCI7XG5pbXBvcnQgQmFzZVRhc2sgZnJvbSBcIi4vdGFzay9CYXNlVGFza1wiO1xuaW1wb3J0IFRva2VuRnVuYyBmcm9tIFwiLi9Ub2tlbkZ1bmNcIjtcbmltcG9ydCBJbnRlcmNlcHRvciBmcm9tIFwiLi9pbnRlcmNlcHRvci9VcGxvYWRJbnRlcmNlcHRvclwiO1xuaW1wb3J0IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yIGZyb20gXCIuL2ludGVyY2VwdG9yL1NpbXBsZVVwbG9hZEludGVyY2VwdG9yXCI7XG5pbXBvcnQgVXBsb2FkTGlzdGVuZXIgZnJvbSBcIi4vaG9vay9VcGxvYWRMaXN0ZW5lclwiO1xuaW1wb3J0IHtTY2hlbWUsIERvbWFpbn0gZnJvbSBcIi4vdXJsL0RvbWFpblwiO1xuXG4vKipcbiAqIFVwbG9hZGVyQnVpbGRlclxuICpcbiAqL1xuY2xhc3MgVXBsb2FkZXJCdWlsZGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIE1BWF9DSFVOS19TSVpFID0gNCAqIDEwMjQgKiAxMDI0Oy8v5YiG54mH5pyA5aSn5YC8XG4gICAgcHVibGljIHN0YXRpYyBCTE9DS19TSVpFID0gVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFOy8v5YiG5Z2X5aSn5bCP77yM5Y+q5pyJ5aSn5LqO6L+Z5Liq5pWw5omN6ZyA6KaB5YiG5Z2XXG4gICAgcHVibGljIHN0YXRpYyBVUExPQURfVVJMID0gJ2h0dHA6Ly91cGxvYWQucWluaXUuY29tJztcbiAgICBwdWJsaWMgc3RhdGljIFVQTE9BRF9ET01BSU4gPSB7aHR0cDogJ2h0dHA6Ly91cGxvYWQucWluaXUuY29tJywgaHR0cHM6ICdodHRwczovL3VwLnFib3gubWUnfTtcblxuICAgIHByaXZhdGUgX3JldHJ5OiBudW1iZXIgPSAwOy8v5pyA5aSn6YeN6K+V5qyh5pWwXG4gICAgcHJpdmF0ZSBfZG9tYWluOiBEb21haW4gPSBVcGxvYWRlckJ1aWxkZXIuVVBMT0FEX0RPTUFJTjsvL+S4iuS8oOWfn+WQjVxuICAgIHByaXZhdGUgX3NjaGVtZTogU2NoZW1lID0gbnVsbDsvL+S4iuS8oOWfn+WQjeeahCBzY2hlbWVcbiAgICBwcml2YXRlIF9zaXplOiBudW1iZXIgPSAxMDI0ICogMTAyNDsvL+WIhueJh+Wkp+WwjyzljZXkvY3lrZfoioIs5LiK6ZmQNG0s5LiN6IO95Li6MFxuICAgIHByaXZhdGUgX2NodW5rOiBib29sZWFuID0gdHJ1ZTsvL+WIhuWdl+S4iuS8oFxuICAgIHByaXZhdGUgX2F1dG86IGJvb2xlYW4gPSB0cnVlOy8v6Ieq5Yqo5LiK5LygLOavj+asoemAieaLqeaWh+S7tuWQjlxuICAgIHByaXZhdGUgX211bHRpcGxlOiBib29sZWFuID0gdHJ1ZTsvL+aYr+WQpuaUr+aMgeWkmuaWh+S7tlxuICAgIHByaXZhdGUgX2FjY2VwdDogc3RyaW5nW10gPSBbXTsvL+aOpeWPl+eahOaWh+S7tuexu+Wei1xuICAgIHByaXZhdGUgX2J1dHRvbjogc3RyaW5nOy8v5LiK5Lyg5oyJ6ZKuXG4gICAgcHJpdmF0ZSBfYnV0dG9uRXZlbnROYW1lOiBzdHJpbmc7Ly/kuIrkvKDmjInpkq7nmoTnm5HlkKzkuovku7blkI3np7BcbiAgICBwcml2YXRlIF9jb21wcmVzczogbnVtYmVyID0gMTsvL+WbvueJh+WOi+e8qei0qOmHj1xuICAgIHByaXZhdGUgX3NjYWxlOiBudW1iZXJbXSA9IFswLCAwXTsvL+e8qeaUvuWkp+WwjyzpmZDlrprpq5jluqbnrYnmr5RbaDoyMDAsdzowXSzpmZDlrprlrr3luqbnrYnmr5RbaDowLHc6MTAwXSzpmZDlrprplb/lrr1baDoyMDAsdzoxMDBdXG4gICAgcHJpdmF0ZSBfbGlzdGVuZXI6IFVwbG9hZExpc3RlbmVyOy8v55uR5ZCs5ZmoXG4gICAgcHJpdmF0ZSBfc2F2ZUtleTogYm9vbGVhbiB8IHN0cmluZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgX3Rva2VuRnVuYzogVG9rZW5GdW5jOy8vdG9rZW7ojrflj5blh73mlbBcbiAgICBwcml2YXRlIF90b2tlblNoYXJlOiBib29sZWFuID0gdHJ1ZTsvL+WIhuS6q3Rva2VuLOWmguaenOS4umZhbHNlLOavj+S4gOasoUhUVFDor7fmsYLpg73pnIDopoHmlrDojrflj5ZUb2tlblxuICAgIHByaXZhdGUgX2ludGVyY2VwdG9yczogSW50ZXJjZXB0b3JbXSA9IFtdOy8v5Lu75Yqh5oum5oiq5ZmoXG4gICAgcHJpdmF0ZSBfaXNEZWJ1ZzogYm9vbGVhbiA9IGZhbHNlOy8vXG5cblxuICAgIC8qKlxuICAgICAqIOiuvue9ruS4iuS8oOeahOWfn+WQjSzpu5jorqTmmK8ge2h0dHA6ICdodHRwOi8vdXBsb2FkLnFpbml1LmNvbScsIGh0dHBzOiAnaHR0cHM6Ly91cC5xYm94Lm1lJ31cbiAgICAgKiBAcGFyYW0gZG9tYWluXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgZG9tYWluKGRvbWFpbjogRG9tYWluKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fZG9tYWluID0gZG9tYWluO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorr7nva7kuIrkvKDln5/lkI3nmoTljY/orq7nsbvlnovvvIzpu5jorqTku44gd2luZG93LmxvY2F0aW9uLnByb3RvY29sIOivu+WPllxuICAgICAqIEBwYXJhbSBzY2hlbWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBzY2hlbWUoc2NoZW1lOiBTY2hlbWUpOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9zY2hlbWUgPSBzY2hlbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOa3u+WKoOS4gOS4quaLpuaIquWZqFxuICAgICAqIEBwYXJhbSBpbnRlcmNlcHRvclxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGludGVyY2VwdG9yKGludGVyY2VwdG9yOiBJbnRlcmNlcHRvcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2ludGVyY2VwdG9ycy5wdXNoKE9iamVjdC5hc3NpZ24obmV3IFNpbXBsZVVwbG9hZEludGVyY2VwdG9yKCksIGludGVyY2VwdG9yKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS4iuS8oOWksei0peWQjueahOmHjeS8oOWwneivleasoeaVsFxuICAgICAqIEBwYXJhbSByZXRyeSDpu5jorqQw5qyh77yM5LiN5bCd6K+V5qyh6YeN5LygXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgcmV0cnkocmV0cnk6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gcmV0cnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiuvue9ruWIhueJh+Wkp+Wwj1xuICAgICAqIEBwYXJhbSBzaXplIOWIhuWdl+Wkp+WwjyzljZXkvY3lrZfoioIs6buY6K6kNCoxMDI0KjEwMjTlrZfoioIoNG1iKVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHJpdmF0ZSBzaXplKHNpemU6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3NpemUgPSBNYXRoLm1pbihNYXRoLm1heChzaXplLCAxKSwgVXBsb2FkZXJCdWlsZGVyLk1BWF9DSFVOS19TSVpFKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6YCJ5oup5paH5Lu25ZCOLOaYr+WQpuiHquWKqOS4iuS8oFxuICAgICAqIEBwYXJhbSBhdXRvIOm7mOiupHRydWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBhdXRvKGF1dG86IGJvb2xlYW4pOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9hdXRvID0gYXV0bztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5pSv5oyB5aSa5paH5Lu26YCJ5oupXG4gICAgICogQHBhcmFtIG11bHRpcGxlIOm7mOiupHRydWVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBtdWx0aXBsZShtdWx0aXBsZTogYm9vbGVhbik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX211bHRpcGxlID0gbXVsdGlwbGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaOpeWPl+S4iuS8oOeahOaWh+S7tuexu+Wei1xuICAgICAqIEBwYXJhbSBhY2NlcHQg5pWw57uE5b2i5byP5L6L5aaCOlsnLnBuZycsJ3ZpZGVvLyonXVxuICAgICAqXG4gICAgICog6K+m57uG6YWN572u6KeBaHR0cDovL3d3dy53M3NjaG9vbHMuY29tL3RhZ3MvYXR0X2lucHV0X2FjY2VwdC5hc3BcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGFjY2VwdChhY2NlcHQ6IHN0cmluZ1tdKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fYWNjZXB0ID0gYWNjZXB0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDorr7nva7kuIrkvKDmjInpkq5cbiAgICAgKiBAcGFyYW0gYnV0dG9uIOS4iuS8oOaMiemSrklEXG4gICAgICogQHBhcmFtIGV2ZW50TmFtZSDkuIrkvKDmjInpkq7nmoTnm5HlkKzkuovku7blkI3np7DvvIzpu5jorqTkuLogXCJjbGlja1wiIOOAglxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGJ1dHRvbihidXR0b246IHN0cmluZywgZXZlbnROYW1lID0gXCJjbGlja1wiKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gYnV0dG9uO1xuICAgICAgICB0aGlzLl9idXR0b25FdmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWbvueJh+i0qOmHj+WOi+e8qSzlj6rlnKjkuIrkvKDnmoTmlofku7bmmK/lm77niYfnmoTml7blgJnmnInmlYhcbiAgICAgKiBAcGFyYW0gY29tcHJlc3MgMC0xLOm7mOiupDEs5LiN5Y6L57ypXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcHJlc3MoY29tcHJlc3M6IG51bWJlcik6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2NvbXByZXNzID0gTWF0aC5tYXgoTWF0aC5taW4oY29tcHJlc3MsIDEpLCAwKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Zu+54mH57yp5pS+XG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKiBAcGFyYW0gc2NhbGVcbiAgICAgKi9cbiAgICBwdWJsaWMgc2NhbGUoc2NhbGU6IG51bWJlcltdKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fc2NhbGUgPSBzY2FsZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6K6+572uIHNhdmVLZXlcbiAgICAgKiBAcGFyYW0gc2F2ZUtleVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIHNhdmVLZXkoc2F2ZUtleTogYm9vbGVhbiB8IHN0cmluZyk6IFVwbG9hZGVyQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX3NhdmVLZXkgPSBzYXZlS2V5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZUb2tlbueahOWcsOWdgFxuICAgICAqIEBwYXJhbSB0b2tlblVybFxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIHRva2VuVXJsKHRva2VuVXJsKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fdG9rZW5GdW5jID0gKHVwbG9hZGVyOiBVcGxvYWRlciwgdGFzazogQmFzZVRhc2spID0+IHtcbiAgICAgICAgICAgIHJldHVybiB1cGxvYWRlci5yZXF1ZXN0VGFza1Rva2VuKHRhc2ssIHRva2VuVXJsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZUb2tlbueahOWHveaVsFxuICAgICAqIEBwYXJhbSB0b2tlbkZ1bmNcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyB0b2tlbkZ1bmModG9rZW5GdW5jKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fdG9rZW5GdW5jID0gKHVwbG9hZGVyOiBVcGxvYWRlciwgdGFzazogQmFzZVRhc2spID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRva2VuRnVuYyhyZXNvbHZlLCB0YXNrKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDkuIrkvKDnlJ/lkb3lkajmnJ/pkqnlrZBcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXJcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyBsaXN0ZW5lcihsaXN0ZW5lcjogVXBsb2FkTGlzdGVuZXIpOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbliIbkuqt0b2tlbizlpoLmnpzkuLpmYWxzZeavj+S4iuS8oOS4gOS4quaWh+S7tumDvemcgOimgeivt+axguS4gOasoVRva2Vu44CCXG4gICAgICogQHBhcmFtIHRva2VuU2hhcmVcbiAgICAgKiBAcmV0dXJucyB7VXBsb2FkZXJCdWlsZGVyfVxuICAgICAqL1xuICAgIHB1YmxpYyB0b2tlblNoYXJlKHRva2VuU2hhcmU6IGJvb2xlYW4pOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl90b2tlblNoYXJlID0gdG9rZW5TaGFyZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5YiG5Z2X5LiK5LygXG4gICAgICogQHBhcmFtIGNodW5rIOm7mOiupGZhbHNlXG4gICAgICogQHJldHVybnMge1VwbG9hZGVyQnVpbGRlcn1cbiAgICAgKi9cbiAgICBwdWJsaWMgY2h1bmsoY2h1bms6IGJvb2xlYW4pOiBVcGxvYWRlckJ1aWxkZXIge1xuICAgICAgICB0aGlzLl9jaHVuayA9IGNodW5rO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKblvIDlkK9kZWJ1Z+aooeW8j1xuICAgICAqIEBwYXJhbSBkZWJ1ZyDpu5jorqRmYWxzZVxuICAgICAqIEByZXR1cm5zIHtVcGxvYWRlckJ1aWxkZXJ9XG4gICAgICovXG4gICAgcHVibGljIGRlYnVnKGRlYnVnOiBib29sZWFuKTogVXBsb2FkZXJCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5faXNEZWJ1ZyA9IGRlYnVnO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXQgZ2V0UmV0cnkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgIH1cblxuICAgIGdldCBnZXRTaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgIH1cblxuICAgIGdldCBnZXRBdXRvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXV0bztcbiAgICB9XG5cbiAgICBnZXQgZ2V0TXVsdGlwbGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdWx0aXBsZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0QWNjZXB0KCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjY2VwdDtcbiAgICB9XG5cbiAgICBnZXQgZ2V0QnV0dG9uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9idXR0b247XG4gICAgfVxuXG4gICAgZ2V0IGdldEJ1dHRvbkV2ZW50TmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnV0dG9uRXZlbnROYW1lO1xuICAgIH1cblxuICAgIGdldCBnZXRDb21wcmVzcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcHJlc3M7XG4gICAgfVxuXG4gICAgZ2V0IGdldFNjYWxlKCk6IG51bWJlcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjYWxlO1xuICAgIH1cblxuICAgIGdldCBnZXRMaXN0ZW5lcigpOiBVcGxvYWRMaXN0ZW5lciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5lcjtcbiAgICB9XG5cbiAgICBnZXQgZ2V0U2F2ZUtleSgpOiBib29sZWFuIHwgc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NhdmVLZXk7XG4gICAgfVxuXG4gICAgZ2V0IGdldFRva2VuRnVuYygpOiBUb2tlbkZ1bmMge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5GdW5jO1xuICAgIH1cblxuICAgIGdldCBnZXRUb2tlblNoYXJlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9rZW5TaGFyZTtcbiAgICB9XG5cbiAgICBnZXQgZ2V0Q2h1bmsoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaHVuaztcbiAgICB9XG5cbiAgICBnZXQgZ2V0SXNEZWJ1ZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVidWc7XG4gICAgfVxuXG4gICAgZ2V0IGdldEludGVyY2VwdG9ycygpOiBJbnRlcmNlcHRvcltdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdG9ycztcbiAgICB9XG5cbiAgICBnZXQgZ2V0RG9tYWluKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBkb21haW46IGFueSA9IHRoaXMuX2RvbWFpbjtcbiAgICAgICAgaWYgKGRvbWFpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBkb21haW4gPSBVcGxvYWRlckJ1aWxkZXIuVVBMT0FEX0RPTUFJTjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRvbWFpbiAhPSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBsZXQgc2NoZW1lID0gdGhpcy5fc2NoZW1lO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzY2hlbWUgIT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxldCBwcm90b2NvbCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgICAgICAgICBzY2hlbWUgPSBwcm90b2NvbC5zdWJzdHJpbmcoMCwgcHJvdG9jb2wubGVuZ3RoIC0gMSkgYXMgU2NoZW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb21haW4gPSBkb21haW5bc2NoZW1lXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tYWluLmVuZHNXaXRoKCcvJykgPyBkb21haW4uc3Vic3RyaW5nKDAsIGRvbWFpbi5sZW5ndGggLSAxKSA6IGRvbWFpbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgYnVpbGQoKTogVXBsb2FkZXIge1xuICAgICAgICByZXR1cm4gbmV3IFVwbG9hZGVyKHRoaXMpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkZXJCdWlsZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXBsb2FkL1VwbG9hZGVyQnVpbGRlci50cyIsIi8qKlxuICog5LiK5Lyg5Lu75YqhXG4gKi9cbmFic3RyYWN0IGNsYXNzIEJhc2VUYXNrIHtcbiAgICBwcm90ZWN0ZWQgX2ZpbGU6IEZpbGU7XG4gICAgcHJvdGVjdGVkIF9yZXRyeTogTnVtYmVyID0gMDsvL+W3sumHjeivleasoeaVsFxuICAgIHByb3RlY3RlZCBfY3JlYXRlRGF0ZTogRGF0ZTsvL+WIm+W7uuaXtumXtFxuICAgIHByb3RlY3RlZCBfc3RhcnREYXRlOiBEYXRlOy8v5byA5aeL5pe26Ze0XG4gICAgcHJvdGVjdGVkIF9lbmREYXRlOiBEYXRlOy8v57uT5p2f5pe26Ze0XG4gICAgcHJvdGVjdGVkIF9rZXk6IFN0cmluZzsvL2tleeaWh+S7tuWQjVxuICAgIHByb3RlY3RlZCBfcHJvZ3Jlc3M6IE51bWJlciA9IDA7Ly/ku7vliqHov5vluqYs5pyA5aSnMTAwXG4gICAgcHJvdGVjdGVkIF9pc1N1Y2Nlc3M6IEJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpuS4iuS8oOaIkOWKn1xuICAgIHByb3RlY3RlZCBfaXNGaW5pc2g6IGJvb2xlYW4gPSBmYWxzZTsvL+aYr+WQpue7k+adn1xuICAgIHByb3RlY3RlZCBfcmVzdWx0OiBPYmplY3Q7XG4gICAgcHJvdGVjdGVkIF9lcnJvcjogYW55O1xuXG4gICAgY29uc3RydWN0b3IoZmlsZTogRmlsZSkge1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5fY3JlYXRlRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBmaWxlKCk6IEZpbGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGZpbGUoZmlsZTogRmlsZSkge1xuICAgICAgICB0aGlzLl9maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBnZXQgcmV0cnkoKTogTnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JldHJ5O1xuICAgIH1cblxuICAgIHNldCByZXRyeSh2YWx1ZTogTnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3JldHJ5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGNyZWF0ZURhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVhdGVEYXRlO1xuICAgIH1cblxuICAgIHNldCBjcmVhdGVEYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2NyZWF0ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgc3RhcnREYXRlKCk6IERhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnREYXRlO1xuICAgIH1cblxuICAgIHNldCBzdGFydERhdGUodmFsdWU6IERhdGUpIHtcbiAgICAgICAgdGhpcy5fc3RhcnREYXRlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGVuZERhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmREYXRlO1xuICAgIH1cblxuICAgIHNldCBlbmREYXRlKHZhbHVlOiBEYXRlKSB7XG4gICAgICAgIHRoaXMuX2VuZERhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgaXNTdWNjZXNzKCk6IEJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNTdWNjZXNzO1xuICAgIH1cblxuICAgIHNldCBpc1N1Y2Nlc3ModmFsdWU6IEJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNTdWNjZXNzID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IHByb2dyZXNzKCk6IE51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9ncmVzcztcbiAgICB9XG5cbiAgICBzZXQgcHJvZ3Jlc3ModmFsdWU6IE51bWJlcikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzcyA9IE1hdGgubWluKE1hdGgubWF4KDAsIHZhbHVlKSwgMTAwKTtcbiAgICB9XG5cblxuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHQ7XG4gICAgfVxuXG4gICAgc2V0IHJlc3VsdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9yZXN1bHQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICB9XG5cbiAgICBzZXQgZXJyb3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZXJyb3IgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIGdldCBrZXkoKTogU3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleTtcbiAgICB9XG5cbiAgICBzZXQga2V5KHZhbHVlOiBTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fa2V5ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGlzRmluaXNoKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNGaW5pc2g7XG4gICAgfVxuXG4gICAgc2V0IGlzRmluaXNoKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlVGFzaztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL3VwbG9hZC90YXNrL0Jhc2VUYXNrLnRzIiwiaW1wb3J0IFVwbG9hZGVyIGZyb20gXCIuL3VwbG9hZC9VcGxvYWRlclwiO1xuaW1wb3J0IFVwbG9hZGVyQnVpbGRlciBmcm9tIFwiLi91cGxvYWQvVXBsb2FkZXJCdWlsZGVyXCI7XG5leHBvcnQgIHtVcGxvYWRlciwgVXBsb2FkZXJCdWlsZGVyfTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL01haW4udHMiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi4vdGFzay9EaXJlY3RUYXNrXCI7XG5pbXBvcnQgVXBsb2FkTGlzdGVuZXIgZnJvbSBcIi4vVXBsb2FkTGlzdGVuZXJcIjtcbmNsYXNzIFNpbXBsZVVwbG9hZExpc3RlbmVyIGltcGxlbWVudHMgVXBsb2FkTGlzdGVuZXIge1xuXG4gICAgb25SZWFkeSh0YXNrUXVldWU6IFRhc2tbXSk6IHZvaWQge1xuICAgIH1cblxuICAgIG9uU3RhcnQodGFza1F1ZXVlOiBUYXNrW10pOiB2b2lkIHtcbiAgICB9XG5cbiAgICBvblRhc2tQcm9ncmVzcyh0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgfVxuXG4gICAgb25UYXNrR2V0S2V5KHRhc2s6IFRhc2spOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBvblRhc2tGYWlsKHRhc2s6IFRhc2spOiB2b2lkIHtcbiAgICB9XG5cbiAgICBvblRhc2tTdWNjZXNzKHRhc2s6IFRhc2spOiB2b2lkIHtcbiAgICB9XG5cbiAgICBvblRhc2tSZXRyeSh0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgfVxuXG4gICAgb25GaW5pc2godGFza1F1ZXVlOiBUYXNrW10pOiB2b2lkIHtcbiAgICB9XG59XG5cbmV4cG9ydCAgZGVmYXVsdCBTaW1wbGVVcGxvYWRMaXN0ZW5lcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL3VwbG9hZC9ob29rL1NpbXBsZVVwbG9hZExpc3RlbmVyLnRzIiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4uL3Rhc2svQmFzZVRhc2tcIjtcbmltcG9ydCBVcGxvYWRJbnRlcmNlcHRvciBmcm9tIFwiLi9VcGxvYWRJbnRlcmNlcHRvclwiO1xuXG5jbGFzcyBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvciBpbXBsZW1lbnRzIFVwbG9hZEludGVyY2VwdG9yIHtcblxuICAgIG9uSW50ZXJjZXB0KHRhc2s6IFRhc2spOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIG9uSW50ZXJydXB0KHRhc2s6IFRhc2spOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBTaW1wbGVVcGxvYWRJbnRlcmNlcHRvcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXBsb2FkL2ludGVyY2VwdG9yL1NpbXBsZVVwbG9hZEludGVyY2VwdG9yLnRzIiwiaW1wb3J0IElVcGxvYWRQYXR0ZXJuIGZyb20gXCIuL0lVcGxvYWRQYXR0ZXJuXCI7XG5pbXBvcnQgVXBsb2FkZXIgZnJvbSBcIi4uL1VwbG9hZGVyXCI7XG5pbXBvcnQge0NodW5rVGFzaywgQmxvY2ssIENodW5rfSBmcm9tIFwiLi4vdGFzay9DaHVua1Rhc2tcIjtcbmltcG9ydCBkZWJ1ZyBmcm9tIFwiLi4vLi4vdXRpbC9EZWJ1Z1wiO1xuXG4vKipcbiAqIOWIhuWdl+S4iuS8oFxuICovXG5jbGFzcyBDaHVua1VwbG9hZFBhdHRlcm4gaW1wbGVtZW50cyBJVXBsb2FkUGF0dGVybiB7XG4gICAgcHJpdmF0ZSB1cGxvYWRlcjogVXBsb2FkZXI7XG4gICAgcHJpdmF0ZSB0YXNrOiBDaHVua1Rhc2s7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cGxvYWRlcjogVXBsb2FkZXIpIHtcbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cblxuICAgIGluaXQodXBsb2FkZXI6IFVwbG9hZGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudXBsb2FkZXIgPSB1cGxvYWRlcjtcbiAgICB9XG5cbiAgICB1cGxvYWQodGFzazogQ2h1bmtUYXNrKTogdm9pZCB7XG4gICAgICAgIHRoaXMudGFzayA9IHRhc2s7XG5cbiAgICAgICAgdGhpcy51cGxvYWRlci5nZXRUb2tlbih0YXNrKS50aGVuKCh0b2tlbjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICB0YXNrLnN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZEJsb2NrKHRva2VuKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGxvYWRCbG9jayh0b2tlbjogc3RyaW5nKSB7XG4gICAgICAgIGRlYnVnLmQoYOWHhuWkh+W8gOWni+S4iuS8oOWdl2ApO1xuICAgICAgICBsZXQgY2hhaW46IFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgZGVidWcuZChg5YWxJHt0aGlzLnRhc2suYmxvY2tzLmxlbmd0aH3lnZfnrYnlvoXkuIrkvKBgKTtcbiAgICAgICAgZGVidWcuZChg5YWxJHt0aGlzLnRhc2sudG90YWxDaHVua0NvdW50feWIhueJh+etieW+heS4iuS8oGApO1xuXG4gICAgICAgIHRoaXMudGFzay5ibG9ja3MuZm9yRWFjaCgoYmxvY2ssIGJsb2NrSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGJsb2NrLmNodW5rcy5mb3JFYWNoKChjaHVuaywgY2h1bmtJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNoYWluID0gY2hhaW4udGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnLmQoYOW8gOWni+S4iuS8oOesrCR7KGJsb2NrSW5kZXggKyAxKX3lnZcs56ysJHsoY2h1bmtJbmRleCArIDEpfeeJh2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRDaHVuayhjaHVuaywgdG9rZW4pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjaGFpbi50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmNhdENodW5rcyh0b2tlbik7XG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy/miYDmnInku7vliqHpg73nu5PmnZ/kuoZcbiAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZGVyLmlzVGFza1F1ZXVlRmluaXNoKCkpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Zy5kKGDkuIrkvKDku7vliqHpmJ/liJflt7Lnu5PmnZ9gKTtcblxuICAgICAgICAgICAgICAgIC8v5pu05pS55Lu75Yqh5omn6KGM5Lit5qCH5b+XXG4gICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci50YXNraW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAvL+ebkeWQrOWZqOiwg+eUqFxuICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25GaW5pc2godGhpcy51cGxvYWRlci50YXNrUXVldWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIGRlYnVnLncoYCR7dGhpcy50YXNrLmZpbGUubmFtZX3liIblnZfkuIrkvKDlpLHotKVgKTtcbiAgICAgICAgICAgIHRoaXMudGFzay5lcnJvciA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgdGhpcy50YXNrLmlzU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50YXNrLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudGFzay5lbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrRmFpbCh0aGlzLnRhc2spO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwbG9hZENodW5rKGNodW5rOiBDaHVuaywgdG9rZW46IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGlzRmlyc3RDaHVua0luQmxvY2sgPSBjaHVuay5ibG9jay5jaHVua3MuaW5kZXhPZihjaHVuaykgPT0gMDtcbiAgICAgICAgICAgIGxldCBjaHVua0luZGV4ID0gY2h1bmsuYmxvY2suY2h1bmtzLmluZGV4T2YoY2h1bmspO1xuICAgICAgICAgICAgLy/liY3kuIDkuKpjaHVuayzlpoLmnpzlrZjlnKjnmoTor51cbiAgICAgICAgICAgIGxldCBwcmV2Q2h1bmsgPSBpc0ZpcnN0Q2h1bmtJbkJsb2NrID8gbnVsbCA6IGNodW5rLmJsb2NrLmNodW5rc1tjaHVua0luZGV4IC0gMV07XG5cbiAgICAgICAgICAgIGxldCB1cmw6IHN0cmluZyA9IGlzRmlyc3RDaHVua0luQmxvY2sgPyB0aGlzLmdldFVwbG9hZEJsb2NrVXJsKGNodW5rLmJsb2NrLmRhdGEuc2l6ZSkgOiB0aGlzLmdldFVwbG9hZENodW5rVXJsKGNodW5rLnN0YXJ0LCBwcmV2Q2h1bmsgPyBwcmV2Q2h1bmsuY3R4IDogbnVsbCwgcHJldkNodW5rID8gcHJldkNodW5rLmhvc3QgOiBudWxsKTtcblxuICAgICAgICAgICAgbGV0IHhocjogWE1MSHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgdXJsICs9ICgoL1xcPy8pLnRlc3QodXJsKSA/IFwiJlwiIDogXCI/XCIpICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKSwgdHJ1ZSk7XG4gICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpOy8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgYFVwVG9rZW4gJHt0b2tlbn1gKTsvL+a3u+WKoHRva2Vu6aqM6K+B5aS0XG5cbiAgICAgICAgICAgIC8v5YiG54mH5LiK5Lyg5LitXG4gICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSAoZTogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzID0gTWF0aC5yb3VuZCgoKHRoaXMudGFzay5maW5pc2hlZEJsb2Nrc1NpemUgKyBjaHVuay5zdGFydCArIGUubG9hZGVkKSAvIHRoaXMudGFzay5maWxlLnNpemUpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFzay5wcm9ncmVzcyA8IHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUHJvZ3Jlc3ModGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8v5YiG54mH5LiK5Lyg5a6M5oiQXG4gICAgICAgICAgICB4aHIudXBsb2FkLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKCgodGhpcy50YXNrLmZpbmlzaGVkQmxvY2tzU2l6ZSArIGNodW5rLnN0YXJ0ICsgY2h1bmsuZGF0YS5zaXplKSAvIHRoaXMudGFzay5maWxlLnNpemUpICogMTAwKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrLnByb2dyZXNzIDwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUHJvZ3Jlc3ModGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+WTjeW6lOi/lOWbnlxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PSAyMDAgJiYgeGhyLnJlc3BvbnNlVGV4dCAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdDogYW55ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmlzRmluaXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLnByb2Nlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmN0eCA9IHJlc3VsdC5jdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5ob3N0ID0gcmVzdWx0Lmhvc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2h1bmtJbmRleDogbnVtYmVyID0gY2h1bmsuYmxvY2suY2h1bmtzLmluZGV4T2YoY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhhc05leHRDaHVua0luVGhpc0Jsb2NrOiBib29sZWFuID0gY2h1bmtJbmRleCAhPSBjaHVuay5ibG9jay5jaHVua3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzTmV4dENodW5rSW5UaGlzQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5ibG9jay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuYmxvY2sucHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB4aHIuc2VuZChjaHVuay5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGNvbmNhdENodW5rcyh0b2tlbjogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgZW5jb2RlZEtleSA9IHRoaXMudGFzay5rZXkgPyBidG9hKHRoaXMudGFzay5rZXkpIDogbnVsbDtcbiAgICAgICAgICAgIC8vIOWuieWFqOWtl+espuS4siDlj4LogIPvvJpodHRwczovL2RldmVsb3Blci5xaW5pdS5jb20va29kby9hcGkvbWtmaWxlXG4gICAgICAgICAgICBpZiAoZW5jb2RlZEtleSkge1xuICAgICAgICAgICAgICAgIGVuY29kZWRLZXkgPSBlbmNvZGVkS2V5LnJlcGxhY2UoL1xcKy9nLCAnLScpO1xuICAgICAgICAgICAgICAgIGVuY29kZWRLZXkgPSBlbmNvZGVkS2V5LnJlcGxhY2UoL1xcLy9nLCAnXycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0TWFrZUZpbGVVcmwodGhpcy50YXNrLmZpbGUuc2l6ZSwgZW5jb2RlZEtleSk7XG4gICAgICAgICAgICAvL+aehOW7uuaJgOacieaVsOaNruWdl+acgOWQjuS4gOS4quaVsOaNrueJh+S4iuS8oOWQjuW+l+WIsOeahDxjdHg+55qE57uE5ZCI5oiQ55qE5YiX6KGo5a2X56ym5LiyXG4gICAgICAgICAgICBsZXQgY3R4TGlzdFN0cmluZyA9ICcnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBibG9jazogQmxvY2sgb2YgdGhpcy50YXNrLmJsb2Nrcykge1xuICAgICAgICAgICAgICAgIGxldCBsYXN0Q2h1bmsgPSBibG9jay5jaHVua3NbYmxvY2suY2h1bmtzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGN0eExpc3RTdHJpbmcgKz0gbGFzdENodW5rLmN0eCArICcsJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN0eExpc3RTdHJpbmcuZW5kc1dpdGgoJywnKSkge1xuICAgICAgICAgICAgICAgIGN0eExpc3RTdHJpbmcgPSBjdHhMaXN0U3RyaW5nLnN1YnN0cmluZygwLCBjdHhMaXN0U3RyaW5nLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgeGhyOiBYTUxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwgKz0gKCgvXFw/LykudGVzdCh1cmwpID8gXCImXCIgOiBcIj9cIikgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpLCB0cnVlKTtcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAndGV4dC9wbGFpbicpOy8v6K6+572uY29udGVudFR5cGVcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgYFVwVG9rZW4gJHt0b2tlbn1gKTsvL+a3u+WKoHRva2Vu6aqM6K+B5aS0XG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDIwMCAmJiB4aHIucmVzcG9uc2VUZXh0ICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0OiBhbnkgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLmlzU3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sucmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrLmVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5saXN0ZW5lci5vblRhc2tTdWNjZXNzKHRoaXMudGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5yZXRyeVRhc2sodGhpcy50YXNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcudyhgJHt0aGlzLnRhc2suZmlsZS5uYW1lfeWIhuWdl+S4iuS8oOWksei0pSzlh4blpIflvIDlp4vph43kvKBgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrUmV0cnkodGhpcy50YXNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHhoci5zZW5kKGN0eExpc3RTdHJpbmcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5blnZfkuIrkvKDnmoR1cmxcbiAgICAgKiBAcGFyYW0gYmxvY2tTaXplXG4gICAgICogQHJldHVybnMge3N0cmluZ31cbiAgICAgKi9cbiAgICBwcml2YXRlICBnZXRVcGxvYWRCbG9ja1VybChibG9ja1NpemU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtibGsvJHtibG9ja1NpemV9YDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bniYfkuIrkvKDnmoR1cmxcbiAgICAgKiBAcGFyYW0gc3RhcnQg54mH55qE5Zyo5Z2X5Lit55qE6LW35aeL5L2N572uXG4gICAgICogQHBhcmFtIGN0eCDliY3kuIDmrKHkuIrkvKDov5Tlm57nmoTlnZfnuqfkuIrkvKDmjqfliLbkv6Hmga/jgIJcbiAgICAgKiBAcGFyYW0gaG9zdCDmjIflrppob3N0XG4gICAgICovXG4gICAgcHJpdmF0ZSAgZ2V0VXBsb2FkQ2h1bmtVcmwoc3RhcnQ6IG51bWJlciwgY3R4OiBzdHJpbmcsIGhvc3Q/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7aG9zdCA/IGhvc3QgOiB0aGlzLnVwbG9hZGVyLmRvbWFpbn0vYnB1dC8ke2N0eH0vJHtzdGFydH0vYDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5blkIjlubblnZfkuLrmlofku7bnmoR1cmxcbiAgICAgKiBAcGFyYW0gZmlsZVNpemUg5paH5Lu25aSn5bCPXG4gICAgICogQHBhcmFtIGVuY29kZWRLZXkgYmFzZTY0VXJsRW5jb2Rl5ZCO55qE6LWE5rqQ5ZCN56ewLOiLpeacquaMh+Wumu+8jOWImeS9v+eUqHNhdmVLZXnvvJvoi6XmnKrmjIflrppzYXZlS2V577yM5YiZ5L2/55So6LWE5rqQ5YaF5a6555qEU0hBMeWAvOS9nOS4uui1hOa6kOWQjeOAglxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgICovXG4gICAgcHJpdmF0ZSAgZ2V0TWFrZUZpbGVVcmwoZmlsZVNpemU6IG51bWJlciwgZW5jb2RlZEtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGVuY29kZWRLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtmaWxlLyR7ZmlsZVNpemV9L2tleS8ke2VuY29kZWRLZXl9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnVwbG9hZGVyLmRvbWFpbn0vbWtmaWxlLyR7ZmlsZVNpemV9YDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSByZXRyeVRhc2sodGFzazogQ2h1bmtUYXNrKTogYm9vbGVhbiB7XG4gICAgICAgIC8v6L6+5Yiw6YeN6K+V5qyh5pWwXG4gICAgICAgIGlmICh0YXNrLnJldHJ5ID49IHRoaXMudXBsb2FkZXIucmV0cnkpIHtcbiAgICAgICAgICAgIGRlYnVnLncoYCR7dGFzay5maWxlLm5hbWV96L6+5Yiw6YeN5Lyg5qyh5pWw5LiK6ZmQJHt0aGlzLnVwbG9hZGVyLnJldHJ5fSzlgZzmraLph43kvKBgKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0YXNrLnJldHJ5Kys7XG4gICAgICAgIGRlYnVnLncoYCR7dGFzay5maWxlLm5hbWV95byA5aeL6YeN5LygLOW9k+WJjemHjeS8oOasoeaVsCR7dGFzay5yZXRyeX1gKTtcbiAgICAgICAgLy8gdGhpcy51cGxvYWQodGFzayk7XG5cbiAgICAgICAgLy90b2RvXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxufVxuXG5cbmV4cG9ydCAgZGVmYXVsdCBDaHVua1VwbG9hZFBhdHRlcm47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy91cGxvYWQvcGF0dHJlbi9DaHVua1VwbG9hZFBhdHRlcm4udHMiLCJpbXBvcnQgSVVwbG9hZFBhdHRlcm4gZnJvbSBcIi4vSVVwbG9hZFBhdHRlcm5cIjtcbmltcG9ydCBVcGxvYWRlciBmcm9tIFwiLi4vVXBsb2FkZXJcIjtcbmltcG9ydCBEaXJlY3RUYXNrIGZyb20gXCIuLi90YXNrL0RpcmVjdFRhc2tcIjtcbmltcG9ydCBkZWJ1ZyBmcm9tIFwiLi4vLi4vdXRpbC9EZWJ1Z1wiO1xuLyoqXG4gKiDnm7TmjqXkuIrkvKBcbiAqL1xuY2xhc3MgRGlyZWN0VXBsb2FkUGF0dGVybiBpbXBsZW1lbnRzIElVcGxvYWRQYXR0ZXJuIHtcbiAgICBwcml2YXRlIHVwbG9hZGVyOiBVcGxvYWRlcjtcbiAgICBwcml2YXRlIHRhc2s6IERpcmVjdFRhc2s7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cGxvYWRlcjogVXBsb2FkZXIpIHtcbiAgICAgICAgdGhpcy51cGxvYWRlciA9IHVwbG9hZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWunueOsOaOpeWPo+eahOS4iuS8oOaWueazlVxuICAgICAqIEBwYXJhbSB0YXNrXG4gICAgICovXG4gICAgdXBsb2FkKHRhc2s6IERpcmVjdFRhc2spOiB2b2lkIHtcbiAgICAgICAgdGhpcy50YXNrID0gdGFzaztcblxuICAgICAgICB0aGlzLnVwbG9hZGVyLmdldFRva2VuKHRhc2spLnRoZW4oKHRva2VuOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRhc2suc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkRmlsZSh0b2tlbik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDliJvlu7rooajljZVcbiAgICAgKiBAcGFyYW0gdG9rZW5cbiAgICAgKiBAcmV0dXJucyB7Rm9ybURhdGF9XG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVGb3JtRGF0YSh0b2tlbjogU3RyaW5nKTogRm9ybURhdGEge1xuICAgICAgICBsZXQgdGFzazogRGlyZWN0VGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgbGV0IGZvcm1EYXRhOiBGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICAgIC8va2V55a2Y5Zyo77yM5re75Yqg5YiwZm9ybURhdGHkuK3vvIzoi6XkuI3orr7nva7vvIzkuIPniZvmnI3liqHlmajkvJroh6rliqjnlJ/miJBoYXNoIGtleVxuICAgICAgICBpZiAodGFzay5rZXkgIT09IG51bGwgJiYgdGFzay5rZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdrZXknLCB0YXNrLmtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3Rva2VuJywgdG9rZW4pO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB0YXNrLmZpbGUpO1xuXG4gICAgICAgIGRlYnVnLmQoYOWIm+W7umZvcm1EYXRh5a+56LGhYCk7XG5cbiAgICAgICAgcmV0dXJuIGZvcm1EYXRhO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog5LiK5Lyg5paH5Lu2XG4gICAgICogQHBhcmFtIHRva2VuXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGxvYWRGaWxlKHRva2VuOiBzdHJpbmcpIHtcbiAgICAgICAgbGV0IHRhc2s6IERpcmVjdFRhc2sgPSB0aGlzLnRhc2s7XG5cbiAgICAgICAgbGV0IHhocjogWE1MSHR0cFJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAvL+S4iuS8oOS4rVxuICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSAoZTogUHJvZ3Jlc3NFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgIGxldCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKGUubG9hZGVkICogMTAwKSAvIGUudG90YWwpO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrLnByb2dyZXNzIDwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvL+S4iuS8oOWujOaIkFxuICAgICAgICB4aHIudXBsb2FkLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0YXNrLnByb2dyZXNzIDwgMTAwKSB7XG4gICAgICAgICAgICAgICAgdGFzay5wcm9ncmVzcyA9IDEwMDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1Byb2dyZXNzKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgbGV0IHVybCA9IHRoaXMudXBsb2FkZXIuZG9tYWluO1xuICAgICAgICAvL+mBv+WFjea1j+iniOWZqOe8k+WtmGh0dHDor7fmsYJcbiAgICAgICAgdXJsICs9ICgoL1xcPy8pLnRlc3QodGhpcy51cGxvYWRlci5kb21haW4pID8gXCImXCIgOiBcIj9cIikgKyAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICB4aHIub3BlbignUE9TVCcsIHVybCwgdHJ1ZSk7XG5cbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMjAwICYmIHhoci5yZXNwb25zZVRleHQgIT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5yZXN1bHQgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmlzU3VjY2VzcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suaXNGaW5pc2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmVuZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1N1Y2Nlc3ModGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucmV0cnlUYXNrKHRhc2spKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnLncoYCR7dGFzay5maWxlLm5hbWV95LiK5Lyg5aSx6LSlLOWHhuWkh+W8gOWni+mHjeS8oGApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uVGFza1JldHJ5KHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWcudyhgJHt0YXNrLmZpbGUubmFtZX3kuIrkvKDlpLHotKVgKTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5lcnJvciA9IHhoci5yZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc0ZpbmlzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIubGlzdGVuZXIub25UYXNrRmFpbCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL+aJgOacieS7u+WKoemDvee7k+adn+S6hlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZGVyLmlzVGFza1F1ZXVlRmluaXNoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy/mm7TmlLnku7vliqHmiafooYzkuK3moIflv5dcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci50YXNraW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9vbkZpbmlzaCBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmxpc3RlbmVyLm9uRmluaXNoKHRoaXMudXBsb2FkZXIudGFza1F1ZXVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGZvcm1EYXRhOiBGb3JtRGF0YSA9IHRoaXMuY3JlYXRlRm9ybURhdGEodG9rZW4pO1xuICAgICAgICB4aHIuc2VuZChmb3JtRGF0YSk7XG4gICAgICAgIGRlYnVnLmQoXCLlj5HpgIFhamF4IHBvc3Qg6K+35rGCXCIpO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICog6YeN5LygXG4gICAgICogQHBhcmFtIHRhc2tcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBwcml2YXRlIHJldHJ5VGFzayh0YXNrOiBEaXJlY3RUYXNrKTogYm9vbGVhbiB7XG4gICAgICAgIGRlYnVnLmQoXCLlvIDlp4vlsJ3or5Xph43kvKBcIik7XG4gICAgICAgIC8v6L6+5Yiw6YeN6K+V5qyh5pWwXG4gICAgICAgIGlmICh0YXNrLnJldHJ5ID49IHRoaXMudXBsb2FkZXIucmV0cnkpIHtcbiAgICAgICAgICAgIGRlYnVnLncoYCR7dGFzay5maWxlLm5hbWV96L6+5Yiw6YeN5Lyg5qyh5pWw5LiK6ZmQJHt0aGlzLnVwbG9hZGVyLnJldHJ5fSzlgZzmraLph43kvKBgKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0YXNrLnJldHJ5Kys7XG4gICAgICAgIGRlYnVnLncoYCR7dGFzay5maWxlLm5hbWV95byA5aeL6YeN5LygLOW9k+WJjemHjeS8oOasoeaVsCR7dGFzay5yZXRyeX1gKTtcbiAgICAgICAgdGhpcy51cGxvYWQodGFzayk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuXG5leHBvcnQgIGRlZmF1bHQgRGlyZWN0VXBsb2FkUGF0dGVybjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL3VwbG9hZC9wYXR0cmVuL0RpcmVjdFVwbG9hZFBhdHRlcm4udHMiLCJpbXBvcnQgQmFzZVRhc2sgZnJvbSBcIi4vQmFzZVRhc2tcIjtcbi8qKlxuICog5YiG5Z2X5Lu75YqhXG4gKi9cbmNsYXNzIENodW5rVGFzayBleHRlbmRzIEJhc2VUYXNrIHtcbiAgICAvL+WIhuWdl1xuICAgIHByaXZhdGUgX2Jsb2NrczogQmxvY2tbXSA9IFtdO1xuICAgIHByaXZhdGUgX2Jsb2NrU2l6ZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9jaHVua1NpemU6IG51bWJlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiDmnoTpgKDlh73mlbBcbiAgICAgKiBAcGFyYW0gZmlsZVxuICAgICAqIEBwYXJhbSBibG9ja1NpemUg5Z2X5aSn5bCPXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDniYflpKflsI9cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihmaWxlOiBGaWxlLCBibG9ja1NpemU6IG51bWJlciwgY2h1bmtTaXplOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoZmlsZSk7XG4gICAgICAgIHRoaXMuX2Jsb2NrU2l6ZSA9IGJsb2NrU2l6ZTtcbiAgICAgICAgdGhpcy5fY2h1bmtTaXplID0gY2h1bmtTaXplO1xuICAgICAgICB0aGlzLnNwbGljZUZpbGUyQmxvY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIbmlofku7bliIblnZdcbiAgICAgKi9cbiAgICBwdWJsaWMgc3BsaWNlRmlsZTJCbG9jaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fYmxvY2tzID0gW107XG4gICAgICAgIGxldCBmaWxlU2l6ZTogbnVtYmVyID0gdGhpcy5fZmlsZS5zaXplO1xuICAgICAgICBsZXQgZmlsZTogRmlsZSA9IHRoaXMuX2ZpbGU7XG4gICAgICAgIC8v5oC75Z2X5pWwXG4gICAgICAgIGxldCBibG9ja0NvdW50ID0gTWF0aC5jZWlsKGZpbGVTaXplIC8gdGhpcy5fYmxvY2tTaXplKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsb2NrQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0OiBudW1iZXIgPSBpICogdGhpcy5fYmxvY2tTaXplOy8v6LW35aeL5L2N572uXG4gICAgICAgICAgICBsZXQgZW5kOiBudW1iZXIgPSBzdGFydCArIHRoaXMuX2Jsb2NrU2l6ZTsvL+e7k+adn+S9jee9rlxuICAgICAgICAgICAgLy/mnoTpgKDkuIDkuKrlnZflrp7kvotcbiAgICAgICAgICAgIGxldCBibG9jazogQmxvY2sgPSBuZXcgQmxvY2soc3RhcnQsIGVuZCwgZmlsZS5zbGljZShzdGFydCwgZW5kKSwgdGhpcy5fY2h1bmtTaXplLCBmaWxlKTtcbiAgICAgICAgICAgIC8v5re75Yqg5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB0aGlzLl9ibG9ja3MucHVzaChibG9jayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bmiYDmnInnmoRibG9ja1xuICAgICAqIEByZXR1cm5zIHtCbG9ja1tdfVxuICAgICAqL1xuICAgIGdldCBibG9ja3MoKTogQmxvY2tbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibG9ja3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5q2j5Zyo5aSE55CG55qEYmxvY2tcbiAgICAgKiBAcmV0dXJucyB7QmxvY2t9XG4gICAgICovXG4gICAgZ2V0IHByb2Nlc3NpbmdCbG9jaygpOiBCbG9jayB7XG4gICAgICAgIGZvciAobGV0IGJsb2NrOiBCbG9jayBvZiB0aGlzLl9ibG9ja3MpIHtcbiAgICAgICAgICAgIGlmICghYmxvY2sucHJvY2Vzc2luZykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJsb2NrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGZpbmlzaGVkQmxvY2tzU2l6ZSgpOiBudW1iZXIge1xuICAgICAgICBsZXQgc2l6ZTogbnVtYmVyID0gMDtcbiAgICAgICAgZm9yIChsZXQgYmxvY2s6IEJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgc2l6ZSArPSAoYmxvY2suaXNGaW5pc2ggPyBibG9jay5kYXRhLnNpemUgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG5cbiAgICBnZXQgY2h1bmtzKCk6IENodW5rW10ge1xuICAgICAgICBsZXQgYXJyYXk6IENodW5rW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYmxvY2s6IEJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgZm9yIChsZXQgY2h1bms6IENodW5rIG9mIGJsb2NrLmNodW5rcykge1xuICAgICAgICAgICAgICAgIGFycmF5LnB1c2goY2h1bmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bmraPlnKjlpITnkIbnmoRjaHVua1xuICAgICAqIEByZXR1cm5zIHtCbG9ja31cbiAgICAgKi9cbiAgICBnZXQgcHJvY2Vzc2luZ0NodW5rKCk6IENodW5rIHtcbiAgICAgICAgZm9yIChsZXQgYmxvY2s6IEJsb2NrIG9mIHRoaXMuX2Jsb2Nrcykge1xuICAgICAgICAgICAgaWYgKCFibG9jay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBjaHVuazogQ2h1bmsgb2YgYmxvY2suY2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaHVuay5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmgLvlhbHliIbniYfmlbDph48o5omA5pyJ5YiG5Z2X55qE5YiG54mH5pWw6YeP5oC75ZKMKVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IHRvdGFsQ2h1bmtDb3VudCgpOiBudW1iZXIge1xuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBmb3IgKGxldCBibG9jazogQmxvY2sgb2YgdGhpcy5fYmxvY2tzKSB7XG4gICAgICAgICAgICBjb3VudCArPSBibG9jay5jaHVua3MubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3VudDtcbiAgICB9XG59XG5cbi8qKlxuICog5YiG5Z2X77yM5YiG5Z2X5aSn5bCP5LiD54mb5Zu65a6a5pivNE1cbiAqL1xuY2xhc3MgQmxvY2sge1xuICAgIHByaXZhdGUgX2RhdGE6IEJsb2I7Ly/lnZfmlbDmja5cbiAgICBwcml2YXRlIF9zdGFydDogbnVtYmVyOy8v6LW35aeL5L2N572uXG4gICAgcHJpdmF0ZSBfZW5kOiBudW1iZXI7Ly/nu5PmnZ/kvY3nva5cbiAgICBwcml2YXRlIF9jaHVua3M6IENodW5rW10gPSBbXTtcbiAgICBwcml2YXRlIF9pc0ZpbmlzaDogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgcHJpdmF0ZSBfcHJvY2Vzc2luZzogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5q2j5Zyo5LiK5LygXG4gICAgcHJpdmF0ZSBfZmlsZTogRmlsZTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IOi1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBlbmQg57uT5p2f5L2N572uXG4gICAgICogQHBhcmFtIGRhdGEg5Z2X5pWw5o2uXG4gICAgICogQHBhcmFtIGNodW5rU2l6ZSDliIbniYfmlbDmja7nmoTmnIDlpKflpKflsI9cbiAgICAgKiBAcGFyYW0gZmlsZSDliIblnZfmiYDlsZ7mlofku7ZcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciwgZGF0YTogQmxvYiwgY2h1bmtTaXplOiBudW1iZXIsIGZpbGU6IEZpbGUpIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuX3N0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuX2VuZCA9IGVuZDtcbiAgICAgICAgdGhpcy5fZmlsZSA9IGZpbGU7XG4gICAgICAgIHRoaXMuc3BsaWNlQmxvY2syQ2h1bmsoY2h1bmtTaXplKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIblnZfliIbniYdcbiAgICAgKi9cbiAgICBwcml2YXRlIHNwbGljZUJsb2NrMkNodW5rKGNodW5rU2l6ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCBibG9ja1NpemU6IG51bWJlciA9IHRoaXMuX2RhdGEuc2l6ZTtcbiAgICAgICAgbGV0IGRhdGE6IEJsb2IgPSB0aGlzLl9kYXRhO1xuICAgICAgICAvL+aAu+eJh+aVsFxuICAgICAgICBsZXQgY2h1bmtDb3VudCA9IE1hdGguY2VpbChibG9ja1NpemUgLyBjaHVua1NpemUpO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQ6IG51bWJlciA9IGkgKiBjaHVua1NpemU7Ly/otbflp4vkvY3nva5cbiAgICAgICAgICAgIGxldCBlbmQ6IG51bWJlciA9IHN0YXJ0ICsgY2h1bmtTaXplOy8v57uT5p2f5L2N572uXG4gICAgICAgICAgICAvL+aehOmAoOS4gOS4queJh+WunuS+i1xuICAgICAgICAgICAgbGV0IGNodW5rOiBDaHVuayA9IG5ldyBDaHVuayhzdGFydCwgZW5kLCBkYXRhLnNsaWNlKHN0YXJ0LCBlbmQpLCB0aGlzKTtcbiAgICAgICAgICAgIC8v5re75Yqg5Yiw5pWw57uE5LitXG4gICAgICAgICAgICB0aGlzLl9jaHVua3MucHVzaChjaHVuayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbkuIrkvKDkuK1cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgcHJvY2Vzc2luZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3Npbmc7XG4gICAgfVxuXG4gICAgc2V0IHByb2Nlc3NpbmcodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc2luZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIhuWdl+aJgOWxnueahOaWh+S7tlxuICAgICAqIEByZXR1cm5zIHtGaWxlfVxuICAgICAqL1xuICAgIGdldCBmaWxlKCk6IEZpbGUge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlsZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKblt7Lnu4/nu5PmnZ9cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaXNGaW5pc2goKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0ZpbmlzaDtcbiAgICB9XG5cbiAgICBzZXQgaXNGaW5pc2godmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNGaW5pc2ggPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57liIblnZfmlbDmja5cbiAgICAgKiBAcmV0dXJucyB7QmxvYn1cbiAgICAgKi9cbiAgICBnZXQgZGF0YSgpOiBCbG9iIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5a2X6IqC6LW35aeL5L2N572uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgc3RhcnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi/lOWbnuWtl+iKgue7k+adn+S9jee9rlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0IGVuZCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5kO1xuICAgIH1cblxuICAgIGdldCBjaHVua3MoKTogQ2h1bmtbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaHVua3M7XG4gICAgfVxufVxuXG4vKipcbiAqIOWIhueJh++8jOWIhueJh+Wkp+Wwj+WPr+S7peiHquWumuS5ie+8jOiHs+WwkTHlrZfoioJcbiAqL1xuY2xhc3MgQ2h1bmsge1xuICAgIHByaXZhdGUgX3N0YXJ0OiBudW1iZXI7Ly/otbflp4vkvY3nva5cbiAgICBwcml2YXRlIF9lbmQ6IG51bWJlcjsvL+e7k+adn+S9jee9rlxuICAgIHByaXZhdGUgX2RhdGE6IEJsb2I7Ly/niYfmlbDmja5cbiAgICBwcml2YXRlIF9wcm9jZXNzaW5nOiBib29sZWFuID0gZmFsc2U7Ly/mmK/lkKbmraPlnKjkuIrkvKBcbiAgICBwcml2YXRlIF9pc0ZpbmlzaDogYm9vbGVhbiA9IGZhbHNlOy8v5piv5ZCm5LiK5Lyg5a6M5oiQXG4gICAgcHJpdmF0ZSBfY3R4OiBzdHJpbmc7Ly/liY3kuIDmrKHkuIrkvKDov5Tlm57nmoTlnZfnuqfkuIrkvKDmjqfliLbkv6Hmga8s56ys5LiA5LiqY2h1bmvmraTlgLzkuLrnqbpcbiAgICBwcml2YXRlIF9ibG9jazogQmxvY2s7Ly/liIbniYfmiYDlsZ7nmoTlnZflr7nosaFcbiAgICBwcml2YXRlIF9ob3N0OiBzdHJpbmc7Ly/liY3kuIDmrKHkuIrkvKDov5Tlm57nmoTmjIflrprkuIrkvKDlnLDlnYBcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0IOWtl+iKgui1t+Wni+S9jee9rlxuICAgICAqIEBwYXJhbSBlbmQg5a2X6IqC57uT5p2f5L2N572uXG4gICAgICogQHBhcmFtIGRhdGEg5YiG54mH5pWw5o2uXG4gICAgICogQHBhcmFtIGJsb2NrIOWIhuWdl+WvueixoVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBkYXRhOiBCbG9iLCBibG9jazogQmxvY2spIHtcbiAgICAgICAgdGhpcy5fc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGhpcy5fZW5kID0gZW5kO1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5fYmxvY2sgPSBibG9jaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm55jaHVua+aJgOWxnueahEJsb2Nr5a+56LGhXG4gICAgICogQHJldHVybnMge0Jsb2NrfVxuICAgICAqL1xuICAgIGdldCBibG9jaygpOiBCbG9jayB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ibG9jaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57lrZfoioLotbflp4vkvY3nva5cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCBzdGFydCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5a2X6IqC57uT5p2f5L2N572uXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZW5kKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6L+U5Zue5YiG54mH5pWw5o2uXG4gICAgICogQHJldHVybnMge0Jsb2J9XG4gICAgICovXG4gICAgZ2V0IGRhdGEoKTogQmxvYiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuW3sue7j+e7k+adn1xuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBpc0ZpbmlzaCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRmluaXNoO1xuICAgIH1cblxuXG4gICAgc2V0IGlzRmluaXNoKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2lzRmluaXNoID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICBnZXQgaG9zdCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9zdDtcbiAgICB9XG5cbiAgICBzZXQgaG9zdCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuX2hvc3QgPSB2YWx1ZTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuS4iuS8oOS4rVxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBwcm9jZXNzaW5nKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc2luZztcbiAgICB9XG5cbiAgICBzZXQgcHJvY2Vzc2luZyh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9wcm9jZXNzaW5nID0gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDov5Tlm57kuIrkvKDmjqfliLbkv6Hmga8o5LiD54mb5pyN5Yqh5Zmo6L+U5Zue5YmN5LiA5qyh5LiK5Lyg6L+U5Zue55qE5YiG54mH5LiK5Lyg5o6n5Yi25L+h5oGvLOeUqOS6juS4i+S4gOasoeS4iuS8oCznrKzkuIDkuKpjaHVua+atpOWAvOS4uuepuilcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBjdHgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N0eDtcbiAgICB9XG5cbiAgICBzZXQgY3R4KHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fY3R4ID0gdmFsdWU7XG4gICAgfVxufVxuXG5cbmV4cG9ydCB7Q2h1bmtUYXNrLCBCbG9jaywgQ2h1bmt9O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vc291cmNlLW1hcC1sb2FkZXIhLi9zcmMvdXBsb2FkL3Rhc2svQ2h1bmtUYXNrLnRzIiwiaW1wb3J0IEJhc2VUYXNrIGZyb20gXCIuL0Jhc2VUYXNrXCI7XG4vKipcbiAqIOebtOS8oOS7u+WKoVxuICovXG5jbGFzcyBEaXJlY3RUYXNrIGV4dGVuZHMgQmFzZVRhc2sge1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IERpcmVjdFRhc2s7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9zb3VyY2UtbWFwLWxvYWRlciEuL3NyYy91cGxvYWQvdGFzay9EaXJlY3RUYXNrLnRzIiwiY2xhc3MgVVVJRCB7XG4gICAgcHVibGljIHN0YXRpYyB1dWlkKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICBsZXQgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcbiAgICAgICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XG4gICAgICAgICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVVSUQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vc3JjL3VwbG9hZC91dWlkL1VVSUQudHMiXSwic291cmNlUm9vdCI6IiJ9